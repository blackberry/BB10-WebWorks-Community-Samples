/*! bbUI for BB10 VERSION: 0.9.6.958 | github.com/blackberry/bbUI.js/blob/master/LICENSE !*/bb={scroller:null,screens:[],dropdownScrollers:[],windowListeners:[],documentListeners:[],transparentPixel:"data:image/png;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",imageList:null,activityIndicator:null,fileInput:null,button:null,scrollPanel:null,bbmBubble:null,dropdown:null,textInput:null,roundPanel:null,grid:null,pillButtons:null,labelControlContainers:null,slider:null,radio:null,progress:null,checkbox:null,toggle:null,init:function(e){if(e)for(var t in e)bb.options[t]=e[t];bb.device.isRipple=navigator.userAgent.indexOf("Ripple")>=0||window.tinyHippos,bb.device.isPlayBook=navigator.userAgent.indexOf("PlayBook")>=0||1024==window.innerWidth&&600==window.innerHeight||600==window.innerWidth&&1024==window.innerHeight,bb.device.isBB10=!0,bb.device.requiresScrollingHack=navigator.userAgent.toLowerCase().indexOf("version/10.0")>=0||navigator.userAgent.toLowerCase().indexOf("version/10.1")>=0,bb.device.is10dot2=navigator.userAgent.toLowerCase().indexOf("version/10.2")>=0,bb.device.is10dot1=navigator.userAgent.toLowerCase().indexOf("version/10.1")>=0,bb.device.is10dot0=navigator.userAgent.toLowerCase().indexOf("version/10.0")>=0,bb.device.newerThan10dot0=bb.device.is10dot1||bb.device.is10dot2,bb.device.newerThan10dot1=bb.device.is10dot2,bb.device.newerThan10dot2=!1,bb.device.is1024x600=bb.device.isPlayBook,bb.device.is1280x768=1280==window.innerWidth&&768==window.innerHeight||768==window.innerWidth&&1280==window.innerHeight,bb.device.is720x720=720==window.innerWidth&&720==window.innerHeight,bb.device.is1280x720=1280==window.innerWidth&&720==window.innerHeight||720==window.innerWidth&&1280==window.innerHeight;var t,i=document.head.querySelectorAll("meta[name=viewport]");for(t=0;i.length>t;t++)try{document.head.removeChild(i[t])}catch(n){}var o=document.createElement("meta");o.setAttribute("name","viewport"),bb.device.is1024x600?o.setAttribute("content","initial-scale=1.0,width=device-width,user-scalable=no,target-densitydpi=device-dpi"):o.setAttribute("content","initial-scale="+1/window.devicePixelRatio+",user-scalable=no"),document.head.appendChild(o);var r=parseInt(bb.cutHex(bb.options.highlightColor).substring(0,2),16),s=parseInt(bb.cutHex(bb.options.highlightColor).substring(2,4),16),a=parseInt(bb.cutHex(bb.options.highlightColor).substring(4,6),16);if(bb.options.shades={R:r,G:s,B:a,darkHighlight:"rgb("+(r-120)+", "+(s-120)+", "+(a-120)+")",mediumHighlight:"rgb("+(r-60)+", "+(s-60)+", "+(a-60)+")",darkOutline:"rgb("+(r-32)+", "+(s-32)+", "+(a-32)+")",darkDarkHighlight:"rgb("+(r-140)+", "+(s-140)+", "+(a-140)+")"},document.styleSheets&&document.styleSheets.length)try{document.styleSheets[0].insertRule(".bb10Highlight {background-color:"+bb.options.highlightColor+";background-image:none;}",0),document.styleSheets[0].insertRule(".bbProgressHighlight {background-color:#92B43B;background-image:none;}",0),document.styleSheets[0].insertRule(".bb10-button-highlight {color:White;background-image: -webkit-gradient(linear, center top, center bottom, from("+bb.options.shades.darkHighlight+"), to("+bb.options.highlightColor+"));border-color:#53514F;}",0),document.styleSheets[0].insertRule(".pb-button-light-highlight {color:"+bb.options.shades.darkHighlight+";background-image: -webkit-gradient(linear, center top, center bottom, from("+bb.options.highlightColor+"), to("+bb.options.shades.darkHighlight+"));}",0),document.styleSheets[0].insertRule(".pb-button-dark-highlight {color:"+bb.options.highlightColor+";background-image: -webkit-gradient(linear, center top, center bottom, from("+bb.options.highlightColor+"), to("+bb.options.shades.darkHighlight+"));}",0),document.styleSheets[0].insertRule(".bb10Accent {background-color:"+bb.options.shades.darkHighlight+";}",0),document.styleSheets[0].insertRule(".bb10-title-colored {color:white;border-color: "+bb.options.shades.mediumHighlight+";text-shadow: 0px 2px black;background-image: -webkit-gradient(linear, center top, center bottom, from("+bb.options.highlightColor+"), to("+bb.options.shades.darkHighlight+"));}",0),document.styleSheets[0].insertRule(".bb10-title-button-container-colored {color:white;text-shadow: 0px 2px black;border-color: "+bb.options.shades.darkDarkHighlight+";background-color: "+bb.options.shades.darkHighlight+";}",0),document.styleSheets[0].insertRule(".bb10-title-button-colored {border-color: "+bb.options.shades.darkDarkHighlight+";background-image: -webkit-gradient(linear, center top, center bottom, from("+bb.options.highlightColor+"), to("+bb.options.shades.mediumHighlight+"));}",0),document.styleSheets[0].insertRule(".bb10-title-button-colored-highlight {border-color: "+bb.options.shades.darkDarkHighlight+";background-color: "+bb.options.shades.darkHighlight+";}",0)}catch(n){console.log(n.message)}bb.screen.controlColor=bb.options.controlsDark?"dark":"light",bb.screen.listColor=bb.options.listsDark?"dark":"light",bb.imageList=_bb10_imageList,bb.activityIndicator=_bb10_activityIndicator,bb.fileInput=_bb10_fileInput,bb.button=_bb10_button,bb.scrollPanel=_bb_PlayBook_10_scrollPanel,bb.bbmBubble=_bb_bbmBubble,bb.dropdown=_bb10_dropdown,bb.textInput=_bb10_textInput,bb.roundPanel=_bb10_roundPanel,bb.grid=_bb10_grid,bb.pillButtons=_bb10_pillButtons,bb.labelControlContainers=_bb10_labelControlContainers,bb.slider=_bb10_slider,bb.radio=_bb10_radio,bb.progress=_bb_progress,bb.checkbox=_bb10_checkbox,bb.toggle=_bb10_toggle,bb.contextMenu=bb.device.isPlayBook||bb.device.isRipple?_PlayBook_contextMenu:_bb10_contextMenu,bb.actionOverflow=_PlayBook_contextMenu,bb.device.isPlayBook||bb.device.isRipple||(blackberry.event.addEventListener("keyboardOpening",function(){bb.screen.currentScreen.actionBar&&bb.screen.currentScreen.actionBar.hide()}),blackberry.event.addEventListener("keyboardOpened",function(){bb.screen.currentScreen.actionBar&&bb.screen.focusedInput&&(bb.screen.focusedInput.container?bb.screen.focusedInput.container.scrollIntoView(!1):bb.screen.focusedInput.scrollIntoView(!1))}),blackberry.event.addEventListener("keyboardClosed",function(){bb.screen.currentScreen.actionBar&&bb.screen.currentScreen.actionBar.show()})),bb.device.isPlayBook||bb.device.isRipple||blackberry.ui&&blackberry.ui.contextmenu&&(blackberry.ui.contextmenu.enabled=!0,blackberry.bbui&&blackberry.bbui.initContext({highlightColor:bb.options.highlightColor}))},doLoad:function(e){var t=e||document.body;bb.screen.apply(t.querySelectorAll("[data-bb-type=screen]")),bb.style(t)},style:function(e){bb.scrollPanel&&bb.scrollPanel.apply(e.querySelectorAll("[data-bb-type=scroll-panel]")),bb.textInput&&bb.textInput.apply(e.querySelectorAll("input[type=text], [type=password], [type=tel], [type=url], [type=email], [type=number], [type=date], [type=time], [type=datetime], [type=month], [type=datetime-local], [type=color], [type=search]")),bb.dropdown&&bb.dropdown.apply(e.querySelectorAll("select")),bb.roundPanel&&bb.roundPanel.apply(e.querySelectorAll("[data-bb-type=round-panel]")),bb.imageList&&bb.imageList.apply(e.querySelectorAll("[data-bb-type=image-list]")),bb.grid&&bb.grid.apply(e.querySelectorAll("[data-bb-type=grid-layout]")),bb.bbmBubble&&bb.bbmBubble.apply(e.querySelectorAll("[data-bb-type=bbm-bubble]")),bb.pillButtons&&bb.pillButtons.apply(e.querySelectorAll("[data-bb-type=pill-buttons]")),bb.labelControlContainers&&bb.labelControlContainers.apply(e.querySelectorAll("[data-bb-type=label-control-container]")),bb.button&&bb.button.apply(e.querySelectorAll("[data-bb-type=button]")),bb.fileInput&&bb.fileInput.apply(e.querySelectorAll("input[type=file]")),bb.slider&&bb.slider.apply(e.querySelectorAll("input[type=range]")),bb.progress&&bb.progress.apply(e.querySelectorAll("progress")),bb.radio&&bb.radio.apply(e.querySelectorAll("input[type=radio]")),bb.activityIndicator&&bb.activityIndicator.apply(e.querySelectorAll("[data-bb-type=activity-indicator]")),bb.checkbox&&bb.checkbox.apply(e.querySelectorAll("input[type=checkbox]")),bb.toggle&&bb.toggle.apply(e.querySelectorAll("[data-bb-type=toggle]"))},getCurScreen:function(){return document.querySelector("[data-bb-type=screen]")},device:{isBB10:!1,isPlayBook:!1,isRipple:!1,requiresScrollingHack:!1,is1024x600:!1,is1280x768:!1,is720x720:!1,is1280x720:!1,is10dot2:!1,is10dot1:!1,is10dot0:!1,newerThan10dot0:!1,newerThan10dot1:!1,newerThan10dot2:!1},options:{onscreenready:null,ondomready:null,controlsDark:!1,coloredTitleBar:!1,listsDark:!1,highlightColor:"#00A8DF"},loadScreen:function(e,t,i,n,o,r){var s,a=new XMLHttpRequest,l=document.createElement("div"),b=function(e,t,i){var n=i;return Array.prototype.forEach.apply(e,[function(e){n=t(n,e)}]),n},d=function(e,t){return"SCRIPT"===t.nodeName&&e.push(t),b(t.childNodes,d,e)},c=[],h=[];a.open("GET",e,!1),a.send(),l.setAttribute("id",n),l.innerHTML=a.responseText,c=b(l.childNodes,d,[]),l.scriptIds=[],r&&(r.scripts=[]),c.forEach(function(e){var t=document.createElement("script"),i=e.getAttribute("type");if(!i||"text/javascript"==i.toLowerCase()){var n=bb.guidGenerator();r?r.scripts.push({id:n,onunload:e.getAttribute("onunload")}):l.scriptIds.push({id:n,onunload:e.getAttribute("onunload")}),t.setAttribute("type","text/javascript"),e.text?(t.innerHTML=e.text,t.inline=!0):t.setAttribute("src",e.getAttribute("src")),t.setAttribute("id",n),h.push(t),e.parentNode.removeChild(e)}}),l.getElementById=function(e,t){var i=null;if(t||(t=this),t.getAttribute("id")==e)return t;for(var n=0;t.childNodes.length>n;n++){var o=t.childNodes[n];if(1==o.nodeType&&(i=this.getElementById(e,o)))break}return i},bb.screen.scriptCounter=0,bb.screen.totalScripts=h.length;for(var u,s=0;h.length>s;s++)u=h[s],document.body.appendChild(u),u.onload=function(){bb.screen.scriptCounter++,bb.screen.scriptCounter==bb.screen.totalScripts&&bb.initContainer(l,t,i,o)},1==u.inline&&setTimeout(u.onload,0);return 0===bb.screen.totalScripts&&setTimeout(function(){bb.initContainer(l,t,i,o)},0),l},initContainer:function(e,t,i,n){bb.options.onscreenready&&bb.options.onscreenready(e,t,n),bb.doLoad(e),document.body.appendChild(e);var o,r,s,a=e.querySelectorAll("[data-bb-type=screen]"),l=null;if(a.length>0){if(a=a[0],i){var b,d=bb.screens[bb.screens.length-1].container;o=d.querySelectorAll("[data-bb-type=screen]")[0],b=o.hasAttribute("data-bb-effect")?o.getAttribute("data-bb-effect"):void 0,b&&(a.style["z-index"]="-100","fade"==b.toLowerCase()?o.setAttribute("data-bb-effect","fade-out"):"slide-left"==b.toLowerCase()?o.setAttribute("data-bb-effect","slide-out-right"):"slide-right"==b.toLowerCase()?o.setAttribute("data-bb-effect","slide-out-left"):"slide-up"==b.toLowerCase()?o.setAttribute("data-bb-effect","slide-out-down"):"slide-down"==b.toLowerCase()&&o.setAttribute("data-bb-effect","slide-out-up"))}else o=a;if(o.popping=i,o.hasAttribute("data-bb-effect")&&(r=o.getAttribute("data-bb-effect"))){if(r=r.toLowerCase(),"fade"==r)l=bb.screen.fadeIn;else if("fade-out"==r)l=bb.screen.fadeOut;else switch(r){case"slide-left":l=bb.screen.slideLeft;break;case"slide-out-left":l=bb.screen.slideOutLeft;break;case"slide-right":l=bb.screen.slideRight;break;case"slide-out-right":l=bb.screen.slideOutRight;break;case"slide-up":l=bb.screen.slideUp;break;case"slide-out-up":l=bb.screen.slideOutUp;break;case"slide-down":l=bb.screen.slideDown;break;case"slide-out-down":l=bb.screen.slideOutDown}o.style.display="inline",l&&(s=document.createElement("div"),o.overlay=s,s.setAttribute("class","bb-transition-overlay"),document.body.appendChild(s),bb.screen.animating=!0,o.doEndAnimation=function(){var t=this.style;bb.screen.animating=!1,document.body.removeChild(this.overlay),this.overlay=null,bb.screens.length>1?this.popping?(this.style.display="none",this.parentNode.parentNode.removeChild(this.parentNode),bb.screens.pop(),a.style["z-index"]="",bb.screens[bb.screens.length-1].container=e):(bb.removePreviousScreenFromDom(),t.left="",t.right="",t.top="",t.bottom="",t.width="",t.height="",t["-webkit-animation-name"]="",t["-webkit-animation-duration"]="",t["-webkit-animation-timing-function"]="",t["-webkit-transform"]=""):1>=bb.screens.length&&(t.left="",t.right="",t.top="",t.bottom="",t.width="",t.height="",t["-webkit-animation-name"]="",t["-webkit-animation-duration"]="",t["-webkit-animation-timing-function"]="",t["-webkit-transform"]=""),this.removeEventListener("webkitAnimationEnd",this.doEndAnimation),bb.createScreenScroller(a)},o.doEndAnimation=o.doEndAnimation.bind(o),o.addEventListener("webkitAnimationEnd",o.doEndAnimation),l.call(this,o))}}if(bb.options.ondomready?(bb.domready.container=e,bb.domready.id=t,bb.domready.params=n,setTimeout(bb.domready.fire,1)):setTimeout(bb.domready.fireEventsOnly,1),!l){if(i){if(i){a.style["z-index"]="";var c=bb.screens[bb.screens.length-1].container;c.parentNode.removeChild(c),bb.screens.pop(),bb.screens[bb.screens.length-1].container=e}}else bb.screens.length>1&&bb.removePreviousScreenFromDom();bb.createScreenScroller(a)}},domready:{container:null,id:null,params:null,fire:function(){if(bb.screen.animating)return setTimeout(bb.domready.fire,250),void 0;var e=document.createEvent("Events");e.initEvent("bbuidomready",!0,!0),document.dispatchEvent(e),e=document.createEvent("Events"),e.initEvent("bbuilistready",!0,!0),document.dispatchEvent(e),bb.options.ondomready(bb.domready.container,bb.domready.id,bb.domready.params),bb.domready.container=null,bb.domready.id=null,bb.domready.params=null,e=document.createEvent("Events"),e.initEvent("bbuidomprocessed",!0,!0),document.dispatchEvent(e)},fireEventsOnly:function(){if(bb.screen.animating)return setTimeout(bb.domready.fireEventsOnly,250),void 0;var e=document.createEvent("Events");e.initEvent("bbuidomready",!0,!0),document.dispatchEvent(e),e=document.createEvent("Events"),e.initEvent("bbuilistready",!0,!0),document.dispatchEvent(e),e=document.createEvent("Events"),e.initEvent("bbuidomprocessed",!0,!0),document.dispatchEvent(e)}},createScreenScroller:function(e){var t=e.bbUIscrollWrapper;if(t)if(bb.device.isPlayBook){var i={hideScrollbar:!0,fadeScrollbar:!0,onBeforeScrollStart:function(e){var t=e.target;if(!t.parentNode||"bb-bb10-dropdown-items"!=t.parentNode.getAttribute("class")){for(;1!=t.nodeType;)t=t.parentNode;if("SELECT"!=t.tagName&&"INPUT"!=t.tagName&&"TEXTAREA"!=t.tagName&&"AUDIO"!=t.tagName&&"VIDEO"!=t.tagName){e.preventDefault();var i=document.activeElement;i&&("SELECT"==i.tagName||"INPUT"==i.tagName||"TEXTAREA"==i.tagName||"AUDIO"==i.tagName||"VIDEO"==i.tagName)&&i.blur()}}},onScrollEnd:function(){evt=document.createEvent("Events"),evt.initEvent("bbuiscrolling",!0,!0),document.dispatchEvent(evt)},onScrollMove:function(t){e.onscroll&&e.onscroll(t),evt=document.createEvent("Events"),evt.initEvent("bbuiscrolling",!0,!0),document.dispatchEvent(evt)}};bb.scroller=new iScroll(t,i)}else bb.scroller=null,t.style["-webkit-overflow-scrolling"]="-blackberry-touch",t.onscroll=function(t){e.onscroll&&e.onscroll(t)}},clearScrollers:function(){for(var e,t=bb.dropdownScrollers-1;t>-1;t--)e=bb.dropdownScrollers[t],e.destroy(),e=null,bb.dropdownScrollers.pop()},removeTopMostScreenFromDom:function(){var e=bb.screens.length,t=document.getElementById(bb.screens[e-1].guid);document.body.removeChild(t)},removePreviousScreenFromDom:function(){var e,t,i=bb.screens.length;1!=i&&(t=i>1?2:1,e=document.getElementById(bb.screens[i-t].guid),e&&document.body.removeChild(e))},pushScreen:function(e,t,i){var n,o;for(bb.removeLoadedScripts(),n=0;bb.windowListeners.length>n;n++)o=bb.windowListeners[n],window.removeEventListener(o.name,o.eventHandler,!1);for(bb.windowListeners=[],n=0;bb.documentListeners.length>n;n++)o=bb.documentListeners[n],document.removeEventListener(o.name,o.eventHandler,!1);bb.documentListeners=[],bb.menuBar.clearMenu();var r=bb.screens.length;r>0&&(bb.screen.overlay=null,bb.screen.tabOverlay=null,bb.clearScrollers(),bb.screen.contextMenu&&(bb.screen.contextMenu=null));var s=bb.guidGenerator(),a=bb.loadScreen(e,t,!1,s,i);bb.screens.push({id:t,url:e,scripts:a.scriptIds,container:a,guid:s,params:i})},popScreen:function(){var e,t,i=bb.screens.length;if(i>1){for(bb.removeLoadedScripts(),bb.clearScrollers(),bb.menuBar.clearMenu(),bb.screen.overlay=null,bb.screen.tabOverlay=null,e=0;bb.windowListeners.length>e;e++)t=bb.windowListeners[e],window.removeEventListener(t.name,t.eventHandler,!1);for(bb.windowListeners=[],e=0;bb.documentListeners.length>e;e++)t=bb.documentListeners[e],document.removeEventListener(t.name,t.eventHandler,!1);bb.documentListeners=[];var n=bb.screens[i-2];bb.loadScreen(n.url,n.id,!0,n.guid,n.params,n)}else blackberry&&blackberry.app.exit()},removeLoadedScripts:function(){var numItems=bb.screens.length;if(numItems>0)for(var currentStackItem=bb.screens[numItems-1],current=document.getElementById(currentStackItem.guid),i=0;currentStackItem.scripts.length>i;i++){var bbScript=currentStackItem.scripts[i],scriptTag=document.getElementById(bbScript.id);bbScript.onunload&&eval(bbScript.onunload),scriptTag&&document.body.removeChild(scriptTag)}},innerHeight:function(){return bb.device.isPlayBook?window.orientation?0==window.orientation||180==window.orientation?600:-90==window.orientation||90==window.orientation?1024:void 0:window.innerHeight:window.innerHeight},innerWidth:function(){return bb.device.isPlayBook?window.orientation?0==window.orientation||180==window.orientation?1024:-90==window.orientation||90==window.orientation?600:void 0:window.innerWidth:window.innerWidth},getOrientation:function(){if(bb.device.is720x720)return"portrait";if(bb.device.isPlayBook){if(!window.orientation)return window.innerWidth>window.innerHeight?"landscape":"portrait";if(0==window.orientation||180==window.orientation)return"landscape";if(-90==window.orientation||90==window.orientation)return"portrait"}else{if(void 0==window.orientation)return window.innerWidth>window.innerHeight?"landscape":"portrait";if(0==window.orientation||180==window.orientation)return"portrait";if(-90==window.orientation||90==window.orientation)return"landscape"}},cutHex:function(e){return"#"==e.charAt(0)?e.substring(1,7):e},guidGenerator:function(){var e=function(){return(0|65536*(1+Math.random())).toString(16).substring(1)};return e()+e()+e()+e()+e()+e()+e()+e()},refresh:function(){bb.scroller&&bb.scroller.refresh()},isScrolledIntoView:function(e){var t=0,i=e;if(i.offsetParent)do t+=i.offsetTop,i.scrollTop&&(t-=i.scrollTop),bb.device.isPlayBook&&(i.scroller?t+=i.scroller.y:i.bbUIscrollWrapper&&(t+=bb.scroller.y));while(i=i.offsetParent);return bb.innerHeight()>t}},Function.prototype.bind=function(e){var t=this;return function(){return t.apply(e,arguments)}},bb.actionBar={apply:function(e,t){var i,n,o,r,s,a,l,b=e.querySelectorAll("[data-bb-type=action]"),d=[],c=[],h=[],u=[],m=e,p=bb.getOrientation(),g=document.createElement("div"),v=document.createElement("div");for(e.isVisible=!0,e.setAttribute("class","bb-action-bar bb-action-bar-"+p+" bb-action-bar-dark"),e.mainBarTabs=h,e.mainBarButtons=d,e.overflowButtons=c,e.overflowTabs=u,e.dropShadow=document.createElement("div"),e.dropShadow.setAttribute("class","bb-action-bar-drop-shadow"),t.appendChild(e.dropShadow),e.oncontextmenu=function(e){var t=e.srcElement,i=t.parentNode;if(i)for(;i;){if(i==this){e.preventDefault();break}i=i.parentNode}},e.oncontextmenu=e.oncontextmenu.bind(e),window.addEventListener("contextmenu",e.oncontextmenu),bb.windowListeners.push({name:"contextmenu",eventHandler:e.oncontextmenu}),g.setAttribute("class","bb-action-bar-slide-label"),e.slideLabel=g,v.setAttribute("class","bb-action-bar-slide-label-text"),e.slideText=v,e.parentNode.appendChild(g),e.parentNode.appendChild(v),e.slideUpShown=!1,e.doLabelTimer=function(){this.slideUpShown=!0,this.slideLabel.style.height="48px",this.slideText.style.height="48px",this.slideText.style.visibility="visible"},e.doLabelTimer=e.doLabelTimer.bind(e),e.doTouchEnd=function(){this.timer&&clearTimeout(this.timer),this.slideUpShown&&(this.slideUpShown=!1,this.slideLabel.style.height="0px",this.slideText.style.visibility="hidden",this.slideText.style.height="0px")},e.doTouchEnd=e.doTouchEnd.bind(e),e.showLabel=function(e,t){if(bb.device.is720x720){var i=window.getComputedStyle(e);this.slideText.innerHTML=t,this.slideText.style.width=parseInt(i.width)+"px",this.slideText.style["margin-left"]=bb.actionBar.getBackBtnWidth(this.backBtn)+e.offsetLeft+"px",this.timer=setTimeout(this.doLabelTimer,1e3)}},e.showLabel=e.showLabel.bind(e),l=0;b.length>l;l++)i=b[l],i.hasAttribute("data-bb-style")&&(r=i.getAttribute("data-bb-style").toLowerCase(),"button"==r?i.hasAttribute("data-bb-overflow")&&"true"==i.getAttribute("data-bb-overflow").toLowerCase()?c.push(i):d.push(i):i.hasAttribute("data-bb-overflow")&&"true"==i.getAttribute("data-bb-overflow").toLowerCase()?u.push(i):h.push(i));if(e.hasAttribute("data-bb-back-caption")&&0==e.querySelectorAll("[data-bb-style=tab]").length){var y,f,w,E,x="bb-action-bar-back-button-dark";bb.device.is10dot2&&(x+="-10dot2"),s=document.createElement("div"),s.setAttribute("class","bb-action-bar-back-button "+x+" bb-action-bar-back-button-"+p),s.onclick=function(){window.setTimeout(bb.popScreen,0)},e.backBtn=s,y=document.createElement("div"),y.setAttribute("class","bb-action-bar-back-chevron-dark"),s.appendChild(y),f=document.createElement("div"),f.setAttribute("class","bb-action-bar-back-text bb-action-bar-back-text-"+p),f.innerHTML=e.getAttribute("data-bb-back-caption"),s.backCaption=f,s.appendChild(f),E=document.createElement("div"),E.setAttribute("class","bb-action-bar-back-button-highlight"),E.style.position="absolute",E.style.width=bb.device.is1024x600?"4px":"8px",E.style["background-color"]="transparent",s.updateHighlightDimensions=function(e){bb.device.is1024x600?(E.style.height="portrait"==e?"57px":"57px",E.style.top="8px"):bb.device.is720x720?(E.style.height="78px",E.style.top="15px"):bb.device.is1280x720?(E.style.height="portrait"==e?"84px":"70px",E.style.top="15px"):(E.style.height="portrait"==e?"110px":"70px",E.style.top="15px")},s.updateHighlightDimensions=s.updateHighlightDimensions.bind(s),s.backHighlight=E,s.updateHighlightDimensions(p),s.appendChild(E),s.ontouchstart=function(){this.backHighlight.style["background-color"]=bb.options.highlightColor},s.ontouchend=function(){this.backHighlight.style["background-color"]="transparent"},w=document.createElement("div"),x="bb-action-bar-back-slash-dark",bb.device.is10dot2&&(x+="-10dot2"),w.setAttribute("class",x+" bb-action-bar-back-slash-"+p),s.backslash=w;var k=document.createElement("table"),C=document.createElement("tr"),B=document.createElement("td");for(e.appendChild(k),k.appendChild(C),k.setAttribute("class","bb-action-bar-table"),B.style.width=bb.device.is1024x600?bb.actionBar.getBackBtnWidth(s)-16+"px":bb.actionBar.getBackBtnWidth(s)-33+"px",C.appendChild(B),s.innerChevron=B,B.appendChild(s),B=document.createElement("td"),B.style.width=bb.device.is1024x600?"16px":"33px",w.style["background-color"]=bb.options.shades.darkOutline,C.appendChild(B),B.appendChild(w),B=document.createElement("td"),B.style.width="100%",C.appendChild(B),m=B,l=0;b.length>l;l++)i=b[l],B.appendChild(i)}if(u.length>0&&(e.tabOverflowMenu=bb.tabOverflow.create(t),e.tabOverflowMenu.actionBar=e,i=document.createElement("div"),i.actionBar=e,i.tabOverflowMenu=e.tabOverflowMenu,i.setAttribute("data-bb-type","action"),i.setAttribute("data-bb-style","tab"),i.setAttribute("data-bb-img","overflow"),i.onclick=function(){this.tabOverflowMenu.show()},e.tabOverflowBtn=i,m.insertBefore(i,m.firstChild)),c.length>0&&(e.menu=bb.actionOverflow.create(t),e.appendChild(e.menu),e.moreCaption=e.hasAttribute("data-bb-more-caption")?e.getAttribute("data-bb-more-caption"):"More",i=document.createElement("div"),i.menu=e.menu,i.menu.actionBar=e,i.setAttribute("data-bb-type","action"),i.setAttribute("data-bb-style","button"),i.setAttribute("data-bb-img","overflow"),i.onclick=function(){this.menu.show()},e.actionOverflowBtn=i,m.appendChild(i)),e.getUsableWidth=function(){return bb.innerWidth()-bb.actionBar.getBackBtnWidth(this.backBtn)-bb.actionBar.getActionOverflowBtnWidth(this.actionOverflowBtn)-bb.actionBar.getTabOverflowBtnWidth(this.tabOverflowBtn)},e.getUsableWidth=e.getUsableWidth.bind(e),e.switchOrientationCSS=function(e){if(e){var t=bb.getOrientation();e="portrait"==t?e.replace("landscape","portrait"):e.replace("portrait","landscape")}return e},e.switchOrientationCSS=e.switchOrientationCSS.bind(e),e.reLayoutActionBar=function(){var t,i,n,o,r="button",s=0,a=5,l=0,b=0,d=0,c=bb.getOrientation();for(this.dropShadow.style.bottom=bb.screen.getActionBarHeight()-1+"px",this.dropShadow.style.display=e.isVisible?"block":"",this.actionOverflowBtn&&a--,this.backBtn&&a--,this.tabOverflowBtn&&(a--,this.tabOverflowBtn.dropShadow.style.display="",this.tabOverflowBtn.dropShadow.style.height=bb.screen.getActionBarHeight()+"px"),t=0;this.mainBarTabs.length>t&&l!=a;t++)n=this.mainBarTabs[t],1==n.visible&&l++;for(t=0;this.mainBarButtons.length>t&&l!=a;t++)i=this.mainBarButtons[t],1==i.visible&&l++;for(l=0==l?1:l,s=Math.floor(this.getUsableWidth()/l),o=this.getAttribute("class"),o=this.switchOrientationCSS(o),this.setAttribute("class",o),this.isVisible&&(bb.screen.currentScreen.outerScrollArea.style.bottom=bb.screen.getActionBarHeight()+"px",bb.scroller&&bb.scroller.refresh()),this.backBtn&&(o=this.backBtn.getAttribute("class"),o=this.switchOrientationCSS(o),this.backBtn.setAttribute("class",o),this.backBtn.updateHighlightDimensions(c),o=this.backBtn.backCaption.getAttribute("class"),o=this.switchOrientationCSS(o),this.backBtn.backCaption.setAttribute("class",o),o=this.backBtn.backslash.getAttribute("class"),o=this.switchOrientationCSS(o),this.backBtn.backslash.setAttribute("class",o),this.backBtn.innerChevron.style.width=bb.device.is1024x600?bb.actionBar.getBackBtnWidth(this.backBtn)-16+"px":bb.actionBar.getBackBtnWidth(this.backBtn)-33+"px"),l=0,d=s-2,t=0;this.mainBarTabs.length>t;t++)n=this.mainBarTabs[t],a>l&&1==n.visible?(b+=d+2,n.style.width=d+"px",n.normal=this.switchOrientationCSS(n.normal),n.highlight=this.switchOrientationCSS(n.highlight),o=n.tabInner.getAttribute("class"),o=this.switchOrientationCSS(o),n.tabInner.setAttribute("class",o),o=n.display.getAttribute("class"),o=this.switchOrientationCSS(o),n.display.setAttribute("class",o),r="tab",l++):(n.style.display="none",n.visible=!1);for(d=s-1,t=0;this.mainBarButtons.length>t;t++)i=this.mainBarButtons[t],a>l&&1==i.visible?(b+=d+1,i.style.width=d+"px",i.highlight.style.width=.6*s+"px",i.highlight.style["margin-left"]=.2*s+"px",i.normal="tab"==r?"bb-action-bar-action bb-action-bar-action-"+c+" bb-action-bar-button-dark bb-action-bar-button-tab-left-dark":"bb-action-bar-action bb-action-bar-action-"+c+" bb-action-bar-button-dark",i.setAttribute("class",i.normal),i.normal=this.switchOrientationCSS(i.normal),o=i.getAttribute("class"),o=this.switchOrientationCSS(o),i.setAttribute("class",o),r="button",l++):(i.style.display="none",i.visible=!1);if(this.tabOverflowBtn){var h=bb.actionBar.getTabOverflowBtnWidth(this.tabOverflowBtn)-1;b+=h+2,this.tabOverflowBtn.style.width=h+"px",this.tabOverflowBtn.normal=this.switchOrientationCSS(this.tabOverflowBtn.normal),this.tabOverflowBtn.highlight=this.switchOrientationCSS(this.tabOverflowBtn.highlight),o=this.tabOverflowBtn.getAttribute("class"),o=this.switchOrientationCSS(o),this.tabOverflowBtn.setAttribute("class",o),o=this.tabOverflowBtn.tabHighlight.getAttribute("class"),o=this.switchOrientationCSS(o),this.tabOverflowBtn.tabHighlight.setAttribute("class",o),o=this.tabOverflowBtn.display.getAttribute("class"),o=this.switchOrientationCSS(o),this.tabOverflowBtn.display.setAttribute("class",o),this.tabOverflowBtn.icon.normal=this.switchOrientationCSS(this.tabOverflowBtn.icon.normal),o=this.tabOverflowBtn.icon.getAttribute("class"),o=this.switchOrientationCSS(o),this.tabOverflowBtn.icon.setAttribute("class",o),0==this.mainBarTabs.length&&0==this.mainBarButtons&&(this.tabOverflowBtn.dropShadow.style.display="block")}this.actionOverflowBtn&&("tab"==r?(this.actionOverflowBtn.normal="bb-action-bar-action bb-action-bar-action-"+c+" bb-action-bar-button-dark bb-action-bar-button-tab-left-dark",this.actionOverflowBtn.style.width=bb.innerWidth()-b+"px"):(this.actionOverflowBtn.normal="bb-action-bar-action bb-action-bar-action-"+c+" bb-action-bar-button-dark",this.actionOverflowBtn.style.width=bb.actionBar.getActionOverflowBtnWidth(this.actionOverflowBtn)-1+"px"),this.actionOverflowBtn.highlight.style.width=.6*bb.actionBar.getActionOverflowBtnWidth(this.actionOverflowBtn)+"px",this.actionOverflowBtn.highlight.style["margin-left"]=.2*bb.actionBar.getActionOverflowBtnWidth(this.actionOverflowBtn)+"px",this.actionOverflowBtn.style.float="right",this.actionOverflowBtn.setAttribute("class",this.actionOverflowBtn.normal),this.actionOverflowBtn.normal=this.switchOrientationCSS(this.actionOverflowBtn.normal),o=this.actionOverflowBtn.getAttribute("class"),o=this.switchOrientationCSS(o),this.actionOverflowBtn.setAttribute("class",o),o=this.actionOverflowBtn.icon.getAttribute("class"),o=this.switchOrientationCSS(o),this.actionOverflowBtn.icon.setAttribute("class",o))},e.reLayoutActionBar=e.reLayoutActionBar.bind(e),window.addEventListener("orientationchange",e.reLayoutActionBar,!1),bb.windowListeners.push({name:"orientationchange",eventHandler:e.reLayoutActionBar}),e.setBackCaption=function(e){this.setAttribute("data-bb-back-caption",e),f.innerHTML=e},e.setBackCaption=e.setBackCaption.bind(e),e.setSelectedTab=function(e){"tab"==e.getAttribute("data-bb-style")&&(bb.actionBar.highlightAction(e),e.onclick&&e.onclick())},e.setSelectedTab=e.setSelectedTab.bind(e),e.hide=function(){this.isVisible&&(this.style.display="none",this.dropShadow.style.display="none",this.slideLabel.style.display="none",bb.screen.currentScreen.outerScrollArea.style.bottom="0px",this.isVisible=!1,bb.scroller&&bb.scroller.refresh())},e.hide=e.hide.bind(e),e.show=function(){this.isVisible||(this.style.display="",this.dropShadow.style.display="block",this.slideLabel.style.display="",bb.screen.currentScreen.outerScrollArea.style.bottom=bb.screen.getActionBarHeight()+"px",this.isVisible=!0,bb.scroller&&bb.scroller.refresh())},e.show=e.show.bind(e),u.length>0){var A;for(l=0;h.length>l;l++)i=h[l],"overflow"!=i.getAttribute("data-bb-img")&&(A=i.cloneNode(!0),A.visibleTab=i,A.actionBar=e,e.tabOverflowMenu.add(A));for(l=0;u.length>l;l++)i=u[l],i.actionBar=e,e.tabOverflowMenu.add(i)}for(l=0;c.length>l;l++)i=c[l],e.menu.add(i);var S,T;for(l=0;h.length>l;l++)S=h[l],n=S.innerHTML,S.actionBar=e,S.visible=!0,S.innerHTML="",T=document.createElement("div"),S.tabInner=T,S.appendChild(T),S.setAttribute("class","bb-action-bar-tab-outer"),S.normal="bb-action-bar-action bb-action-bar-action-"+p+" bb-action-bar-tab-dark bb-action-bar-tab-normal-dark",S.highlight=S.normal+" bb-action-bar-tab-selected-dark",T.setAttribute("class",S.normal),S.visible=!0,S.hasAttribute("data-bb-visible")&&"false"==S.getAttribute("data-bb-visible").toLowerCase()&&(S.visible=!1),a=document.createElement("img"),a.setAttribute("class","bb-action-bar-icon"),a.setAttribute("src",S.getAttribute("data-bb-img")),S.icon=a,T.appendChild(a),o=document.createElement("div"),o.setAttribute("class","bb-action-bar-action-display bb-action-bar-action-display-"+p),o.innerHTML=n,S.display=o,T.appendChild(o),S.hasAttribute("data-bb-selected")&&"true"==S.getAttribute("data-bb-selected").toLowerCase()&&bb.actionBar.highlightAction(S),S.addEventListener("click",function(){bb.actionBar.highlightAction(this)},!1),S.setCaption=function(e){if(this.display.innerHTML=e,this.actionBar.tabOverflowMenu){var t,i,n=this.actionBar.tabOverflowMenu.actions;for(t=0;n.length>t;t++)i=n[t],i.visibleTab==this&&i.setCaption(e)}},S.setCaption=S.setCaption.bind(S),S.getCaption=function(){return this.display.innerHTML},S.getCaption=S.getCaption.bind(S),S.setImage=function(e){if(this.icon.setAttribute("src",e),this.actionBar.tabOverflowMenu){var t,i,n=this.actionBar.tabOverflowMenu.actions;for(t=0;n.length>t;t++)i=n[t],i.visibleTab==this&&i.setImage(e)}},S.setImage=S.setImage.bind(S),S.getImage=function(){return this.icon.getAttribute("src")},S.getImage=S.getImage.bind(S),S.hide=bb.actionBar.actionHide,S.hide=S.hide.bind(S),S.show=bb.actionBar.actionShow,S.show=S.show.bind(S),S.ontouchstart=function(){this.actionBar.showLabel(this,this.display.innerHTML)
},S.ontouchend=function(){this.actionBar.doTouchEnd()};var L;e.tabOverflowBtn&&(L=e.tabOverflowBtn,n=L.innerHTML,L.actionBar=e,L.visible=!0,L.innerHTML="",T=document.createElement("div"),L.tabInner=T,L.appendChild(T),L.setAttribute("class","bb-action-bar-tab-outer"),L.normal="bb-action-bar-action bb-action-bar-action-"+p+" bb-action-bar-tab-dark bb-action-bar-tab-normal-dark",L.highlight=L.normal+" bb-action-bar-tab-selected-dark",T.setAttribute("class",L.normal),L.dropShadow=document.createElement("div"),L.dropShadow.setAttribute("class","bb-action-bar-button-tab-left-dark bb-action-bar-button-tab-overflow-only-shadow"),L.parentNode.appendChild(L.dropShadow),a=document.createElement("img"),a.setAttribute("class","bb-action-bar-icon"),a.setAttribute("src",bb.transparentPixel),a.normal="bb-action-bar-icon bb-action-bar-tab-overflow-dark bb-action-bar-tab-overflow-"+p,a.highlight="bb-action-bar-icon",a.setAttribute("class",a.normal),T.appendChild(a),o=document.createElement("div"),o.setAttribute("class","bb-action-bar-action-display bb-action-bar-action-display-"+p),o.innerHTML=n,L.display=o,T.appendChild(o),L.icon=a,o.innerHTML="&nbsp;",L.display=o,L.tabHighlight=document.createElement("div"),L.tabHighlight.setAttribute("class","bb-action-bar-tab-overflow-dark bb-action-bar-tab-overflow-highlight bb-action-bar-tab-overflow-highlight-"+p),T.appendChild(L.tabHighlight),L.style.width=bb.actionBar.getTabOverflowBtnWidth(L)-1+"px",L.reset=function(){this.icon.setAttribute("src",bb.transparentPixel),this.icon.setAttribute("class",this.icon.normal),this.tabHighlight.style.display="none",this.display.innerHTML="&nbsp;"},L.reset=L.reset.bind(L),L.ontouchstart=function(){var e=""==this.display.innerHTML||"&nbsp;"==this.display.innerHTML?this.actionBar.moreCaption:this.display.innerHTML;this.actionBar.showLabel(this,e)},L.ontouchend=function(){this.actionBar.doTouchEnd()});var M;for(l=0;d.length>l;l++)M=d[l],M.actionBar=e,n=M.innerHTML,a=document.createElement("img"),a.setAttribute("src",M.getAttribute("data-bb-img")),a.setAttribute("class","bb-action-bar-icon"),M.normal="bb-action-bar-action bb-action-bar-action-"+p+" bb-action-bar-button-dark",M.visible=!0,M.hasAttribute("data-bb-visible")&&"false"==M.getAttribute("data-bb-visible").toLowerCase()&&(M.visible=!1),M.icon=a,M.innerHTML="",M.setAttribute("class",M.normal),M.appendChild(a),o=document.createElement("div"),o.setAttribute("class","bb-action-bar-action-display"),o.innerHTML=n,M.display=o,M.appendChild(o),M.highlight=document.createElement("div"),M.highlight.setAttribute("class","bb-action-bar-action-highlight"),M.highlight.style.height=bb.device.is1024x600?"4px":"8px",M.highlight.style["background-color"]="transparent",M.appendChild(M.highlight),M.setCaption=function(e){this.display.innerHTML=e},M.setCaption=M.setCaption.bind(M),M.getCaption=function(){return this.display.innerHTML},M.getCaption=M.getCaption.bind(M),M.setImage=function(e){this.icon.setAttribute("src",e)},M.setImage=M.setImage.bind(M),M.getImage=function(){return this.icon.getAttribute("src")},M.getImage=M.getImage.bind(M),M.hide=bb.actionBar.actionHide,M.hide=M.hide.bind(M),M.show=bb.actionBar.actionShow,M.show=M.show.bind(M),M.ontouchstart=function(){this.highlight.style["background-color"]=bb.options.highlightColor,this.actionBar.showLabel(this,this.display.innerHTML)},M.ontouchend=function(){this.highlight.style["background-color"]="transparent",this.actionBar.doTouchEnd()};if(e.actionOverflowBtn){actionOverflow=e.actionOverflowBtn,actionOverflow.actionBar=e,actionOverflow.visible=!0,n=actionOverflow.innerHTML,a=document.createElement("img"),a.setAttribute("src",bb.transparentPixel);var O;O=bb.device.is10dot2&&"portrait"==p.toLowerCase()?"portait-10dot2":p,a.setAttribute("class","bb-action-bar-icon bb-action-bar-overflow-button-dark bb-action-bar-overflow-button-"+O),actionOverflow.icon=a,actionOverflow.normal="bb-action-bar-action bb-action-bar-action-"+p+" bb-action-bar-button-dark",actionOverflow.innerHTML="",actionOverflow.setAttribute("class",actionOverflow.normal),actionOverflow.appendChild(a);var o=document.createElement("div");o.setAttribute("class","bb-action-bar-action-display"),o.innerHTML=bb.device.is10dot2?e.moreCaption:n,actionOverflow.display=o,actionOverflow.appendChild(o),actionOverflow.highlight=document.createElement("div"),actionOverflow.highlight.setAttribute("class","bb-action-bar-action-highlight"),actionOverflow.highlight.style.height=bb.device.is1024x600?"4px":"8px",actionOverflow.highlight.style["background-color"]="transparent",actionOverflow.appendChild(actionOverflow.highlight),actionOverflow.ontouchstart=function(){this.highlight.style["background-color"]=bb.options.highlightColor,this.actionBar.showLabel(this,this.actionBar.moreCaption)},actionOverflow.ontouchend=function(){this.highlight.style["background-color"]="transparent",this.actionBar.doTouchEnd()}}e.menu&&e.menu.centerMenuItems(),e.tabOverflowMenu&&(e.tabOverflowMenu.centerMenuItems(),e.tabOverflowMenu.initSelected()),e.reLayoutActionBar()},actionShow:function(){this.visible||(this.style.display="",this.visible=!0,this.actionBar.reLayoutActionBar())},actionHide:function(){this.visible&&(this.style.display="none",this.visible=!1,this.actionBar.reLayoutActionBar())},getTabOverflowBtnWidth:function(e){return e?bb.device.is1024x600?"portrait"==bb.getOrientation()?77:123:bb.device.is720x720?144:"portrait"==bb.getOrientation()?154:256:0},getActionOverflowBtnWidth:function(e){return e?bb.device.is1024x600?"portrait"==bb.getOrientation()?77:123:bb.device.is720x720?144:"portrait"==bb.getOrientation()?154:256:0},getBackBtnWidth:function(e){return e?bb.device.is1024x600?"portrait"==bb.getOrientation()?93:150:bb.device.is720x720?174:bb.device.is1280x720?"portrait"==bb.getOrientation()?179:300:"portrait"==bb.getOrientation()?187:300:0},highlightAction:function(e,t){var i,n,o=e.actionBar.mainBarTabs;for(i=0;o.length>i;i++)n=o[i],n!=e&&bb.actionBar.unhighlightAction(n);if(e.actionBar.tabOverflowMenu){for(o=e.actionBar.tabOverflowMenu.actions,i=0;o.length>i;i++)n=o[i],n!=t&&bb.actionBar.unhighlightAction(n);e.actionBar.tabOverflowBtn.tabInner&&(e.actionBar.tabOverflowBtn.tabInner.style["border-top-color"]="",e.actionBar.tabOverflowBtn.tabInner.setAttribute("class",e.actionBar.tabOverflowBtn.normal))}if(e.tabInner?(e.tabInner.style["border-top-color"]=bb.options.highlightColor,e.tabInner.setAttribute("class",e.highlight)):(e.style["border-top-color"]=bb.options.highlightColor,e.setAttribute("class",e.highlight)),e.selected=!0,t&&(t.setAttribute("class",t.normal+" bb10Highlight"),t.selected=!0),e.actionBar.tabOverflowMenu&&!t)if(e.actionBar.tabOverflowBtn&&e==e.actionBar.tabOverflowBtn)t.setAttribute("class",t.normal+" bb10Highlight");else for(o=e.actionBar.tabOverflowMenu.actions,i=0;o.length>i;i++)n=o[i],n.visibleTab==e&&n.setAttribute("class",n.normal+" bb10Highlight");e.actionBar.tabOverflowBtn&&e.actionBar.tabOverflowBtn.reset&&e.actionBar.tabOverflowBtn.reset()},unhighlightAction:function(e){var t;if(e.tabInner?(e.tabInner.style["border-top-color"]="",e.tabInner.setAttribute("class",e.normal)):(e.style["border-top-color"]="",e.setAttribute("class",e.normal)),e.actionBar&&e.actionBar.tabOverflowMenu)for(tabs=e.actionBar.tabOverflowMenu.actions,i=0;tabs.length>i;i++)t=tabs[i],t.tabInner?t.tabInner.setAttribute("class",t.normal):t.setAttribute("class",t.normal),t.selected=!1}},_bb_bbmBubble={apply:function(e){for(var t=0;e.length>t;t++)bb.bbmBubble.style(e[t])},style:function(e){var t,i,n,o;if(e.styleItem=function(t){return i=document.createElement("img"),i.setAttribute("src",t.getAttribute("data-bb-img")),o=document.createElement("div"),o.setAttribute("class","details"),o.innerHTML=t.innerHTML,t.innerHTML="",t.appendChild(i),t.appendChild(o),t.image=i,t.details=o,t.outerElement=e,t.getCaption=function(){return this.details.innerText},t.getCaption=t.getCaption.bind(t),t.setCaption=function(e){this.details.innerHTML=e,bb.refresh()},t.setCaption=t.setCaption.bind(t),t.getImage=function(){return this.image.src},t.getImage=t.getImage.bind(t),t.setImage=function(e){this.image.setAttribute("src",e),bb.refresh()},t.setImage=t.setImage.bind(t),t.remove=function(){this.outerHTML="",bb.refresh()},t.remove=t.remove.bind(t),t},e.styleItem=e.styleItem.bind(e),e.hasAttribute("data-bb-style")){var r,s=e.getAttribute("data-bb-style").toLowerCase();"left"==s?e.setAttribute("class","bb-bbm-bubble-left"):e.setAttribute("class","bb-bbm-bubble-right");var a=e.querySelectorAll("[data-bb-type=item]");for(r=0;r>a.length;r++)e.removeChild(a[r]);for(t=document.createElement("div"),t.setAttribute("class","top-left image"),e.appendChild(t),t=document.createElement("div"),t.setAttribute("class","top-right image"),e.appendChild(t),t=document.createElement("div"),t.setAttribute("class","inside"),e.appendChild(t),insidePanel=document.createElement("div"),insidePanel.setAttribute("class","nogap"),t.appendChild(insidePanel),e.insidePanel=insidePanel,t=document.createElement("div"),t.setAttribute("class","bottom-left image"),e.appendChild(t),t=document.createElement("div"),t.setAttribute("class","bottom-right image"),e.appendChild(t),r=0;a.length>r;r++)n=a[r],insidePanel.appendChild(e.styleItem(n))}return e.getStyle=function(){return this.getAttribute("data-bb-style")},e.getStyle=e.getStyle.bind(e),e.setStyle=function(e){"left"==e?(this.setAttribute("data-bb-style",e),this.setAttribute("class","bb-bbm-bubble-left")):"right"==e&&(this.setAttribute("data-bb-style",e),this.setAttribute("class","bb-bbm-bubble-right")),bb.refresh()},e.setStyle=e.setStyle.bind(e),e.show=function(){this.style.display="block",bb.refresh()},e.show=e.show.bind(e),e.hide=function(){this.style.display="none",bb.refresh()},e.hide=e.hide.bind(e),e.remove=function(){this.parentNode.removeChild(this),bb.refresh()},e.remove=e.remove.bind(e),e.clear=function(){this.insidePanel.innerHTML="",bb.refresh()},e.clear=e.clear.bind(e),e.getItems=function(){return this.querySelectorAll("[data-bb-type=item]")},e.getItems=e.getItems.bind(e),e}},function(){var e=Math,t=function(e){return e>>0},i=/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":/trident/i.test(navigator.userAgent)?"ms":"opera"in window?"O":"",n=/android/gi.test(navigator.appVersion),o=/iphone|ipad/gi.test(navigator.appVersion),r=/playbook/gi.test(navigator.appVersion),s=/hp-tablet/gi.test(navigator.appVersion),a="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,l="ontouchstart"in window&&!s,b=i+"Transform"in document.documentElement.style,d=o||r,c=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1)}}(),h=function(){return window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}(),u="onorientationchange"in window?"orientationchange":"resize",m=l?"touchstart":"mousedown",p=l?"touchmove":"mousemove",g=l?"touchend":"mouseup",v=l?"touchcancel":"mouseup",y="Moz"==i?"DOMMouseScroll":"mousewheel",f="translate"+(a?"3d(":"("),w=a?",0)":")",E=function(e,t){var r,s=this,c=document;s.wrapper="object"==typeof e?e:c.getElementById(e),s.wrapper.style.overflow="hidden",s.scroller=s.wrapper.children[0],s.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:n,hideScrollbar:o,fadeScrollbar:o&&a,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(e){e.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(r in t)s.options[r]=t[r];s.x=s.options.x,s.y=s.options.y,s.options.useTransform=b?s.options.useTransform:!1,s.options.hScrollbar=s.options.hScroll&&s.options.hScrollbar,s.options.vScrollbar=s.options.vScroll&&s.options.vScrollbar,s.options.zoom=s.options.useTransform&&s.options.zoom,s.options.useTransition=d&&s.options.useTransition,s.options.zoom&&n&&(f="translate(",w=")"),s.scroller.style[i+"TransitionProperty"]=s.options.useTransform?"-"+i.toLowerCase()+"-transform":"top left",s.scroller.style[i+"TransitionDuration"]="0",s.scroller.style[i+"TransformOrigin"]="0 0",s.options.useTransition&&(s.scroller.style[i+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)"),s.options.useTransform?s.scroller.style[i+"Transform"]=f+s.x+"px,"+s.y+"px"+w:s.scroller.style.cssText+=";position:absolute;top:"+s.y+"px;left:"+s.x+"px",s.options.useTransition&&(s.options.fixedScrollbar=!0),s.refresh(),s._bind(u,window),s._bind(m),l||(s._bind("mouseout",s.wrapper),"none"!=s.options.wheelAction&&s._bind(y)),s.options.checkDOMChanges&&(s.checkDOMTime=setInterval(function(){s._checkDOMChanges()},500))};E.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(e){var t=this;switch(e.type){case m:if(!l&&0!==e.button)return;t._start(e);break;case p:t._move(e);break;case g:case v:t._end(e);break;case u:t._resize();break;case y:t._wheel(e);break;case"mouseout":t._mouseout(e);break;case"webkitTransitionEnd":t._transitionEnd(e)}},_checkDOMChanges:function(){this.moved||this.zoomed||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale||this.refresh()},_scrollbar:function(n){var o,r=this,s=document;return r[n+"Scrollbar"]?(r[n+"ScrollbarWrapper"]||(o=s.createElement("div"),r.options.scrollbarClass?o.className=r.options.scrollbarClass+n.toUpperCase():o.style.cssText="position:absolute;z-index:100;"+("h"==n?"height:7px;bottom:1px;left:2px;right:"+(r.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(r.hScrollbar?"7":"2")+"px;top:2px;right:1px"),o.style.cssText+=";pointer-events:none;-"+i+"-transition-property:opacity;-"+i+"-transition-duration:"+(r.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(r.options.hideScrollbar?"0":"1"),r.wrapper.appendChild(o),r[n+"ScrollbarWrapper"]=o,o=s.createElement("div"),r.options.scrollbarClass||(o.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.3);border:1px solid rgba(255,255,255,0.9);-"+i+"-background-clip:padding-box;-"+i+"-box-sizing:border-box;"+("h"==n?"height:100%":"width:100%")+";-"+i+"-border-radius:3px;border-radius:3px"),o.style.cssText+=";pointer-events:none;-"+i+"-transition-property:-"+i+"-transform;-"+i+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-"+i+"-transition-duration:0;-"+i+"-transform:"+f+"0,0"+w,r.options.useTransition&&(o.style.cssText+=";-"+i+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),r[n+"ScrollbarWrapper"].appendChild(o),r[n+"ScrollbarIndicator"]=o),"h"==n?(r.hScrollbarSize=r.hScrollbarWrapper.clientWidth,r.hScrollbarIndicatorSize=e.max(t(r.hScrollbarSize*r.hScrollbarSize/r.scrollerW),8),r.hScrollbarIndicator.style.width=r.hScrollbarIndicatorSize+"px",r.hScrollbarMaxScroll=r.hScrollbarSize-r.hScrollbarIndicatorSize,r.hScrollbarProp=r.hScrollbarMaxScroll/r.maxScrollX):(r.vScrollbarSize=r.vScrollbarWrapper.clientHeight,r.vScrollbarIndicatorSize=e.max(t(r.vScrollbarSize*r.vScrollbarSize/r.scrollerH),8),r.vScrollbarIndicator.style.height=r.vScrollbarIndicatorSize+"px",r.vScrollbarMaxScroll=r.vScrollbarSize-r.vScrollbarIndicatorSize,r.vScrollbarProp=r.vScrollbarMaxScroll/r.maxScrollY),r._scrollbarPos(n,!0),void 0):(r[n+"ScrollbarWrapper"]&&(b&&(r[n+"ScrollbarIndicator"].style[i+"Transform"]=""),r[n+"ScrollbarWrapper"].parentNode.removeChild(r[n+"ScrollbarWrapper"]),r[n+"ScrollbarWrapper"]=null,r[n+"ScrollbarIndicator"]=null),void 0)},_resize:function(){var e=this;setTimeout(function(){e.refresh()},n?200:0)},_pos:function(e,n){e=this.hScroll?e:0,n=this.vScroll?n:0,this.options.useTransform?this.scroller.style[i+"Transform"]=f+e+"px,"+n+"px"+w+" scale("+this.scale+")":(e=t(e),n=t(n),this.scroller.style.left=e+"px",this.scroller.style.top=n+"px"),this.x=e,this.y=n,this._scrollbarPos("h"),this._scrollbarPos("v")},_scrollbarPos:function(e,n){var o,r=this,s="h"==e?r.x:r.y;r[e+"Scrollbar"]&&(s=r[e+"ScrollbarProp"]*s,0>s?(r.options.fixedScrollbar||(o=r[e+"ScrollbarIndicatorSize"]+t(3*s),8>o&&(o=8),r[e+"ScrollbarIndicator"].style["h"==e?"width":"height"]=o+"px"),s=0):s>r[e+"ScrollbarMaxScroll"]&&(r.options.fixedScrollbar?s=r[e+"ScrollbarMaxScroll"]:(o=r[e+"ScrollbarIndicatorSize"]-t(3*(s-r[e+"ScrollbarMaxScroll"])),8>o&&(o=8),r[e+"ScrollbarIndicator"].style["h"==e?"width":"height"]=o+"px",s=r[e+"ScrollbarMaxScroll"]+(r[e+"ScrollbarIndicatorSize"]-o))),r[e+"ScrollbarWrapper"].style[i+"TransitionDelay"]="0",r[e+"ScrollbarWrapper"].style.opacity=n&&r.options.hideScrollbar?"0":"1",r[e+"ScrollbarIndicator"].style[i+"Transform"]=f+("h"==e?s+"px,0":"0,"+s+"px")+w)},_start:function(t){var n,o,r,s,a,b=this,d=l?t.touches[0]:t;b.enabled&&(b.options.onBeforeScrollStart&&b.options.onBeforeScrollStart.call(b,t),(b.options.useTransition||b.options.zoom)&&b._transitionTime(0),b.moved=!1,b.animating=!1,b.zoomed=!1,b.distX=0,b.distY=0,b.absDistX=0,b.absDistY=0,b.dirX=0,b.dirY=0,b.options.zoom&&l&&t.touches.length>1&&(s=e.abs(t.touches[0].pageX-t.touches[1].pageX),a=e.abs(t.touches[0].pageY-t.touches[1].pageY),b.touchesDistStart=e.sqrt(s*s+a*a),b.originX=e.abs(t.touches[0].pageX+t.touches[1].pageX-2*b.wrapperOffsetLeft)/2-b.x,b.originY=e.abs(t.touches[0].pageY+t.touches[1].pageY-2*b.wrapperOffsetTop)/2-b.y,b.options.onZoomStart&&b.options.onZoomStart.call(b,t)),b.options.momentum&&(b.options.useTransform?(n=getComputedStyle(b.scroller,null)[i+"Transform"].replace(/[^0-9-.,]/g,"").split(","),o=1*n[4],r=1*n[5]):(o=1*getComputedStyle(b.scroller,null).left.replace(/[^0-9-]/g,""),r=1*getComputedStyle(b.scroller,null).top.replace(/[^0-9-]/g,"")),(o!=b.x||r!=b.y)&&(b.options.useTransition?b._unbind("webkitTransitionEnd"):h(b.aniTime),b.steps=[],b._pos(o,r))),b.absStartX=b.x,b.absStartY=b.y,b.startX=b.x,b.startY=b.y,b.pointX=d.pageX,b.pointY=d.pageY,b.startTime=t.timeStamp||Date.now(),b.options.onScrollStart&&b.options.onScrollStart.call(b,t),b._bind(p),b._bind(g),b._bind(v))},_move:function(t){var n,o,r,s=this,a=l?t.touches[0]:t,b=a.pageX-s.pointX,d=a.pageY-s.pointY,c=s.x+b,h=s.y+d,u=t.timeStamp||Date.now();return s.options.onBeforeScrollMove&&s.options.onBeforeScrollMove.call(s,t),s.options.zoom&&l&&t.touches.length>1?(n=e.abs(t.touches[0].pageX-t.touches[1].pageX),o=e.abs(t.touches[0].pageY-t.touches[1].pageY),s.touchesDist=e.sqrt(n*n+o*o),s.zoomed=!0,r=1/s.touchesDistStart*s.touchesDist*this.scale,s.options.zoomMin>r?r=.5*s.options.zoomMin*Math.pow(2,r/s.options.zoomMin):r>s.options.zoomMax&&(r=2*s.options.zoomMax*Math.pow(.5,s.options.zoomMax/r)),s.lastScale=r/this.scale,c=this.originX-this.originX*s.lastScale+this.x,h=this.originY-this.originY*s.lastScale+this.y,this.scroller.style[i+"Transform"]=f+c+"px,"+h+"px"+w+" scale("+r+")",s.options.onZoom&&s.options.onZoom.call(s,t),void 0):(s.pointX=a.pageX,s.pointY=a.pageY,(c>0||s.maxScrollX>c)&&(c=s.options.bounce?s.x+b/2:c>=0||s.maxScrollX>=0?0:s.maxScrollX),(h>s.minScrollY||s.maxScrollY>h)&&(h=s.options.bounce?s.y+d/2:h>=s.minScrollY||s.maxScrollY>=0?s.minScrollY:s.maxScrollY),s.distX+=b,s.distY+=d,s.absDistX=e.abs(s.distX),s.absDistY=e.abs(s.distY),6>s.absDistX&&6>s.absDistY||(s.options.lockDirection&&(s.absDistX>s.absDistY+5?(h=s.y,d=0):s.absDistY>s.absDistX+5&&(c=s.x,b=0)),s.moved=!0,s._pos(c,h),s.dirX=b>0?-1:0>b?1:0,s.dirY=d>0?-1:0>d?1:0,u-s.startTime>300&&(s.startTime=u,s.startX=s.x,s.startY=s.y),s.options.onScrollMove&&s.options.onScrollMove.call(s,t)),void 0)},_end:function(n){if(!l||0==n.touches.length){var o,r,s,a,b,d,c,h=this,u=l?n.changedTouches[0]:n,m={dist:0,time:0},y={dist:0,time:0},E=(n.timeStamp||Date.now())-h.startTime,x=h.x,k=h.y;if(h._unbind(p),h._unbind(g),h._unbind(v),h.options.onBeforeScrollEnd&&h.options.onBeforeScrollEnd.call(h,n),h.zoomed)return c=h.scale*h.lastScale,c=Math.max(h.options.zoomMin,c),c=Math.min(h.options.zoomMax,c),h.lastScale=c/h.scale,h.scale=c,h.x=h.originX-h.originX*h.lastScale+h.x,h.y=h.originY-h.originY*h.lastScale+h.y,h.scroller.style[i+"TransitionDuration"]="200ms",h.scroller.style[i+"Transform"]=f+h.x+"px,"+h.y+"px"+w+" scale("+h.scale+")",h.zoomed=!1,h.refresh(),h.options.onZoomEnd&&h.options.onZoomEnd.call(h,n),void 0;if(!h.moved)return l&&(h.doubleTapTimer&&h.options.zoom?(clearTimeout(h.doubleTapTimer),h.doubleTapTimer=null,h.options.onZoomStart&&h.options.onZoomStart.call(h,n),h.zoom(h.pointX,h.pointY,1==h.scale?h.options.doubleTapZoom:1),h.options.onZoomEnd&&setTimeout(function(){h.options.onZoomEnd.call(h,n)},200)):h.doubleTapTimer=setTimeout(function(){for(h.doubleTapTimer=null,o=u.target;1!=o.nodeType;)o=o.parentNode;"SELECT"!=o.tagName&&"INPUT"!=o.tagName&&"TEXTAREA"!=o.tagName&&(r=document.createEvent("MouseEvents"),r.initMouseEvent("click",!0,!0,n.view,1,u.screenX,u.screenY,u.clientX,u.clientY,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,0,null),r._fake=!0,o.dispatchEvent(r))},h.options.zoom?250:0)),h._resetPos(200),h.options.onTouchEnd&&h.options.onTouchEnd.call(h,n),void 0;if(300>E&&h.options.momentum&&(m=x?h._momentum(x-h.startX,E,-h.x,h.scrollerW-h.wrapperW+h.x,h.options.bounce?h.wrapperW:0):m,y=k?h._momentum(k-h.startY,E,-h.y,0>h.maxScrollY?h.scrollerH-h.wrapperH+h.y-h.minScrollY:0,h.options.bounce?h.wrapperH:0):y,x=h.x+m.dist,k=h.y+y.dist,(h.x>0&&x>0||h.x<h.maxScrollX&&h.maxScrollX>x)&&(m={dist:0,time:0}),(h.y>h.minScrollY&&k>h.minScrollY||h.y<h.maxScrollY&&h.maxScrollY>k)&&(y={dist:0,time:0})),m.dist||y.dist)return b=e.max(e.max(m.time,y.time),10),h.options.snap&&(s=x-h.absStartX,a=k-h.absStartY,e.abs(s)<h.options.snapThreshold&&e.abs(a)<h.options.snapThreshold?h.scrollTo(h.absStartX,h.absStartY,200):(d=h._snap(x,k),x=d.x,k=d.y,b=e.max(d.time,b))),h.scrollTo(t(x),t(k),b),h.options.onTouchEnd&&h.options.onTouchEnd.call(h,n),void 0;if(h.options.snap)return s=x-h.absStartX,a=k-h.absStartY,e.abs(s)<h.options.snapThreshold&&e.abs(a)<h.options.snapThreshold?h.scrollTo(h.absStartX,h.absStartY,200):(d=h._snap(h.x,h.y),(d.x!=h.x||d.y!=h.y)&&h.scrollTo(d.x,d.y,d.time)),h.options.onTouchEnd&&h.options.onTouchEnd.call(h,n),void 0;h._resetPos(200),h.options.onTouchEnd&&h.options.onTouchEnd.call(h,n)}},_resetPos:function(e){var t=this,n=t.x>=0?0:t.x<t.maxScrollX?t.maxScrollX:t.x,o=t.y>=t.minScrollY||t.maxScrollY>0?t.minScrollY:t.y<t.maxScrollY?t.maxScrollY:t.y;return n==t.x&&o==t.y?(t.moved&&(t.moved=!1,t.options.onScrollEnd&&t.options.onScrollEnd.call(t)),t.hScrollbar&&t.options.hideScrollbar&&("webkit"==i&&(t.hScrollbarWrapper.style[i+"TransitionDelay"]="300ms"),t.hScrollbarWrapper.style.opacity="0"),t.vScrollbar&&t.options.hideScrollbar&&("webkit"==i&&(t.vScrollbarWrapper.style[i+"TransitionDelay"]="300ms"),t.vScrollbarWrapper.style.opacity="0"),void 0):(t.scrollTo(n,o,e||0),void 0)},_wheel:function(e){var t,i,n,o,r,s=this;if("wheelDeltaX"in e)t=e.wheelDeltaX/12,i=e.wheelDeltaY/12;else if("wheelDelta"in e)t=i=e.wheelDelta/12;else{if(!("detail"in e))return;t=i=3*-e.detail}return"zoom"==s.options.wheelAction?(r=s.scale*Math.pow(2,1/3*(i?i/Math.abs(i):0)),s.options.zoomMin>r&&(r=s.options.zoomMin),r>s.options.zoomMax&&(r=s.options.zoomMax),r!=s.scale&&(!s.wheelZoomCount&&s.options.onZoomStart&&s.options.onZoomStart.call(s,e),s.wheelZoomCount++,s.zoom(e.pageX,e.pageY,r,400),setTimeout(function(){s.wheelZoomCount--,!s.wheelZoomCount&&s.options.onZoomEnd&&s.options.onZoomEnd.call(s,e)},400)),void 0):(n=s.x+t,o=s.y+i,n>0?n=0:s.maxScrollX>n&&(n=s.maxScrollX),o>s.minScrollY?o=s.minScrollY:s.maxScrollY>o&&(o=s.maxScrollY),s.scrollTo(n,o,0),void 0)},_mouseout:function(e){var t=e.relatedTarget;if(!t)return this._end(e),void 0;for(;t=t.parentNode;)if(t==this.wrapper)return;this._end(e)},_transitionEnd:function(e){var t=this;e.target==t.scroller&&(t._unbind("webkitTransitionEnd"),t._startAni())},_startAni:function(){var t,i,n,o=this,r=o.x,s=o.y,a=Date.now();if(!o.animating){if(!o.steps.length)return o._resetPos(400),void 0;if(t=o.steps.shift(),t.x==r&&t.y==s&&(t.time=0),o.animating=!0,o.moved=!0,o.options.useTransition)return o._transitionTime(t.time),o._pos(t.x,t.y),o.animating=!1,t.time?o._bind("webkitTransitionEnd"):o._resetPos(0),void 0;n=function(){var l,b,d=Date.now();return d>=a+t.time?(o._pos(t.x,t.y),o.animating=!1,o.options.onAnimationEnd&&o.options.onAnimationEnd.call(o),o._startAni(),void 0):(d=(d-a)/t.time-1,i=e.sqrt(1-d*d),l=(t.x-r)*i+r,b=(t.y-s)*i+s,o._pos(l,b),o.animating&&(o.aniTime=c(n)),void 0)},n()}},_transitionTime:function(e){e+="ms",this.scroller.style[i+"TransitionDuration"]=e,this.hScrollbar&&(this.hScrollbarIndicator.style[i+"TransitionDuration"]=e),this.vScrollbar&&(this.vScrollbarIndicator.style[i+"TransitionDuration"]=e)},_momentum:function(i,n,o,r,s){var a=6e-4,l=e.abs(i)/n,b=l*l/(2*a),d=0,c=0;return i>0&&b>o?(c=s/(6/(b/l*a)),o+=c,l=l*o/b,b=o):0>i&&b>r&&(c=s/(6/(b/l*a)),r+=c,l=l*r/b,b=r),b*=0>i?-1:1,d=l/a,{dist:b,time:t(d)}},_offset:function(e){for(var t=-e.offsetLeft,i=-e.offsetTop;e=e.offsetParent;)t-=e.offsetLeft,i-=e.offsetTop;return e!=this.wrapper&&(t*=this.scale,i*=this.scale),{left:t,top:i}},_snap:function(i,n){var o,r,s,a,l,b,d=this;for(s=d.pagesX.length-1,o=0,r=d.pagesX.length;r>o;o++)if(i>=d.pagesX[o]){s=o;break}for(s==d.currPageX&&s>0&&0>d.dirX&&s--,i=d.pagesX[s],l=e.abs(i-d.pagesX[d.currPageX]),l=l?500*(e.abs(d.x-i)/l):0,d.currPageX=s,s=d.pagesY.length-1,o=0;s>o;o++)if(n>=d.pagesY[o]){s=o;break}return s==d.currPageY&&s>0&&0>d.dirY&&s--,n=d.pagesY[s],b=e.abs(n-d.pagesY[d.currPageY]),b=b?500*(e.abs(d.y-n)/b):0,d.currPageY=s,a=t(e.max(l,b))||200,{x:i,y:n,time:a}},_bind:function(e,t,i){(t||this.scroller).addEventListener(e,this,!!i)},_unbind:function(e,t,i){(t||this.scroller).removeEventListener(e,this,!!i)},destroy:function(){var e=this;e.scroller.style[i+"Transform"]="",e.hScrollbar=!1,e.vScrollbar=!1,e._scrollbar("h"),e._scrollbar("v"),e._unbind(u,window),e._unbind(m),e._unbind(p),e._unbind(g),e._unbind(v),e.options.hasTouch||(e._unbind("mouseout",e.wrapper),e._unbind(y)),e.options.useTransition&&e._unbind("webkitTransitionEnd"),e.options.checkDOMChanges&&clearInterval(e.checkDOMTime),e.options.onDestroy&&e.options.onDestroy.call(e)},refresh:function(){var e,n,o,r,s=this,a=0,l=0;if(s.scale<s.options.zoomMin&&(s.scale=s.options.zoomMin),s.wrapperW=s.wrapper.clientWidth||1,s.wrapperH=s.wrapper.clientHeight||1,s.minScrollY=-s.options.topOffset||0,s.scrollerW=t(s.scroller.offsetWidth*s.scale),s.scrollerH=t((s.scroller.offsetHeight+s.minScrollY)*s.scale),s.maxScrollX=s.wrapperW-s.scrollerW,s.maxScrollY=s.wrapperH-s.scrollerH+s.minScrollY,s.dirX=0,s.dirY=0,s.options.onRefresh&&s.options.onRefresh.call(s),s.hScroll=s.options.hScroll&&0>s.maxScrollX,s.vScroll=s.options.vScroll&&(!s.options.bounceLock&&!s.hScroll||s.scrollerH>s.wrapperH),s.hScrollbar=s.hScroll&&s.options.hScrollbar,s.vScrollbar=s.vScroll&&s.options.vScrollbar&&s.scrollerH>s.wrapperH,e=s._offset(s.wrapper),s.wrapperOffsetLeft=-e.left,s.wrapperOffsetTop=-e.top,"string"==typeof s.options.snap)for(s.pagesX=[],s.pagesY=[],r=s.scroller.querySelectorAll(s.options.snap),n=0,o=r.length;o>n;n++)a=s._offset(r[n]),a.left+=s.wrapperOffsetLeft,a.top+=s.wrapperOffsetTop,s.pagesX[n]=a.left<s.maxScrollX?s.maxScrollX:a.left*s.scale,s.pagesY[n]=a.top<s.maxScrollY?s.maxScrollY:a.top*s.scale;else if(s.options.snap){for(s.pagesX=[];a>=s.maxScrollX;)s.pagesX[l]=a,a-=s.wrapperW,l++;for(s.maxScrollX%s.wrapperW&&(s.pagesX[s.pagesX.length]=s.maxScrollX-s.pagesX[s.pagesX.length-1]+s.pagesX[s.pagesX.length-1]),a=0,l=0,s.pagesY=[];a>=s.maxScrollY;)s.pagesY[l]=a,a-=s.wrapperH,l++;s.maxScrollY%s.wrapperH&&(s.pagesY[s.pagesY.length]=s.maxScrollY-s.pagesY[s.pagesY.length-1]+s.pagesY[s.pagesY.length-1])}s._scrollbar("h"),s._scrollbar("v"),s.zoomed||(s.scroller.style[i+"TransitionDuration"]="0",s._resetPos(200))},scrollTo:function(e,t,i,n){var o,r,s=this,a=e;for(s.stop(),a.length||(a=[{x:e,y:t,time:i,relative:n}]),o=0,r=a.length;r>o;o++)a[o].relative&&(a[o].x=s.x-a[o].x,a[o].y=s.y-a[o].y),s.steps.push({x:a[o].x,y:a[o].y,time:a[o].time||0});s._startAni()},scrollToElement:function(t,i){var n,o=this;t=t.nodeType?t:o.scroller.querySelector(t),t&&(n=o._offset(t),n.left+=o.wrapperOffsetLeft,n.top+=o.wrapperOffsetTop,n.left=n.left>0?0:n.left<o.maxScrollX?o.maxScrollX:n.left,n.top=n.top>o.minScrollY?o.minScrollY:n.top<o.maxScrollY?o.maxScrollY:n.top,i=void 0===i?e.max(2*e.abs(n.left),2*e.abs(n.top)):i,o.scrollTo(n.left,n.top,i))},scrollToPage:function(e,t,i){var n,o,r=this;i=void 0===i?400:i,r.options.onScrollStart&&r.options.onScrollStart.call(r),r.options.snap?(e="next"==e?r.currPageX+1:"prev"==e?r.currPageX-1:e,t="next"==t?r.currPageY+1:"prev"==t?r.currPageY-1:t,e=0>e?0:e>r.pagesX.length-1?r.pagesX.length-1:e,t=0>t?0:t>r.pagesY.length-1?r.pagesY.length-1:t,r.currPageX=e,r.currPageY=t,n=r.pagesX[e],o=r.pagesY[t]):(n=-r.wrapperW*e,o=-r.wrapperH*t,r.maxScrollX>n&&(n=r.maxScrollX),r.maxScrollY>o&&(o=r.maxScrollY)),r.scrollTo(n,o,i)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(p),this._unbind(g),this._unbind(v)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind("webkitTransitionEnd"):h(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1},zoom:function(e,t,n,o){var r=this,s=n/r.scale;r.options.useTransform&&(r.zoomed=!0,o=void 0===o?200:o,e=e-r.wrapperOffsetLeft-r.x,t=t-r.wrapperOffsetTop-r.y,r.x=e-e*s+r.x,r.y=t-t*s+r.y,r.scale=n,r.refresh(),r.x=r.x>0?0:r.x<r.maxScrollX?r.maxScrollX:r.x,r.y=r.y>r.minScrollY?r.minScrollY:r.y<r.maxScrollY?r.maxScrollY:r.y,r.scroller.style[i+"TransitionDuration"]=o+"ms",r.scroller.style[i+"Transform"]=f+r.x+"px,"+r.y+"px"+w+" scale("+n+")",r.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}},"undefined"!=typeof exports?exports.iScroll=E:window.iScroll=E}(),bb.menuBar={height:140,itemWidth:143,visible:!1,menu:!1,screen:!1,apply:function(e,t){bb.device.isPlayBook||bb.device.isBB10?(bb.menuBar.createSwipeMenu(e,t),e.parentNode.removeChild(e),window.blackberry&&(bb.device.isPlayBook&&blackberry.app.event?blackberry.app.event.onSwipeDown(bb.menuBar.showMenuBar):bb.device.isBB10&&blackberry.app&&blackberry.event.addEventListener("swipedown",bb.menuBar.showMenuBar))):console.log("Unable to create Application/onSwipeDown menu.")},createSwipeMenu:function(e,t){bb.menuBar.screen=t;var i,n,o,r,s,a,l,b,d,c,h,u=document.createElement("div"),m=5,p=!1,g=!1,v=[];if(bb.device.is1024x600?(bb.menuBar.height=100,bb.menuBar.itemWidth=96):bb.device.is720x720?(bb.menuBar.height=110,bb.menuBar.itemWidth=143):bb.device.is1280x720?(bb.menuBar.height=116,bb.menuBar.itemWidth=113):(bb.menuBar.height=140,bb.menuBar.itemWidth=143),u.oncontextmenu=function(e){var t=e.srcElement,i=t.parentNode;if(i)for(;i;){if(i==this){e.preventDefault();break}i=i.parentNode}},u.oncontextmenu=u.oncontextmenu.bind(u),window.addEventListener("contextmenu",u.oncontextmenu),bb.windowListeners.push({name:"contextmenu",eventHandler:u.oncontextmenu}),u.setAttribute("class","bb-menu-bar bb-menu-bar-dark"),items=e.querySelectorAll("[data-bb-type=menu-item]"),items.length>0){for(i=0,n=items.length;items.length>i;i++)r=items[i],o=r.hasAttribute("data-bb-type")?r.getAttribute("data-bb-type").toLowerCase():void 0,"menu-item"==o?(l=r.innerHTML,a=r.getAttribute("data-bb-img"),l&&a?r.hasAttribute("data-bb-pin")?(pinType=r.getAttribute("data-bb-pin").toLowerCase(),"left"!==pinType||p?"right"!==pinType||g?(console.log("Unknown value from menu-item data-bb-pin: "+pinType+" or value already defined."),v.push(r)):(g=r,m--):(p=r,m--)):v.push(r):console.log("missing menu item caption or image.")):console.log("invalid menu item type for bb10");
for(v.length>=m&&(v=v.slice(0,m)),p&&v.unshift(p),g&&v.push(g),d=bb.menuBar.itemWidth+"px",c=Math.floor((window.innerWidth-bb.menuBar.itemWidth*v.length)/(v.length-1))+"px",i=0,n=v.length;n>i;i++)r=v[i],l=r.innerHTML,a=r.getAttribute("data-bb-img"),h=document.createElement("div"),h.setAttribute("class","bb-menu-bar-item"),r.innerHTML="",s=document.createElement("img"),s.setAttribute("src",a),h.appendChild(s),b=document.createElement("div"),b.setAttribute("class","bb-menu-bar-item-caption"),b.innerHTML=l,h.appendChild(b),h.onclick=r.onclick,h.style.width=d,i==v.length-1&&v.length>1||1===v.length&&!p?(h.style.marginRight=0,h.style.float="right"):h.style.marginRight=c,u.appendChild(h),h.ontouchstart=function(){this.style["border-top-color"]=bb.options.highlightColor},h.ontouchend=function(){this.style["border-top-color"]="transparent"}}else u.style.display="none",bb.menuBar.menu=null;u.addEventListener("click",bb.menuBar.onMenuBarClicked,!1),t.parentNode.appendChild(u),bb.menuBar.menu=u,bb.menuBar.menu.style["z-index"]="-100",bb.menuBar.menu.style.display="none",bb.menuBar.menu.style.height=bb.menuBar.menu.height+"px",bb.menuBar.menu.doOrientationChange=function(){var e,t,i=bb.menuBar.menu.getElementsByClassName("bb-menu-bar-item"),n=Math.floor((window.innerWidth-bb.menuBar.itemWidth*i.length)/(i.length-1))+"px";for(e=0,t=i.length;t>e;e++)e==i.length-1?(i[e].style.marginRight=0,i[e].style.float="right"):i[e].style.marginRight=n},bb.menuBar.menu.doOrientationChange=bb.menuBar.menu.doOrientationChange.bind(bb.menuBar),window.addEventListener("resize",bb.menuBar.menu.doOrientationChange,!1),bb.windowListeners.push({name:"resize",eventHandler:bb.menuBar.menu.doOrientationChange}),bb.screen.overlay||(bb.screen.overlay=document.createElement("div"),bb.screen.overlay.setAttribute("class","bb-menu-bar-overlay")),t.appendChild(bb.screen.overlay),bb.menuBar.menu.overlay=bb.screen.overlay},doEndTransition:function(){bb.menuBar.visible?bb.menuBar.menu.style["z-index"]="":(bb.menuBar.menu.style!==void 0&&(bb.menuBar.menu.style.display="none",bb.menuBar.menu.style.height="0px"),bb.menuBar.screen.removeEventListener("webkitTransitionEnd",bb.menuBar.doEndTransition),bb.menuBar.screen.style["-webkit-transition"]="",bb.menuBar.screen.style["-webkit-transform"]="",bb.menuBar.screen.style["-webkit-backface-visibility"]="")},setDimensions:function(){bb.menuBar.menu.style.display="",bb.menuBar.menu.style.height=bb.menuBar.height+"px",bb.menuBar.screen.parentNode.style.position="absolute",bb.menuBar.screen.parentNode.style.left="0px",bb.menuBar.screen.parentNode.style.top="0px",bb.menuBar.screen.parentNode.style.bottom="0px",bb.menuBar.screen.parentNode.style.right="0px",bb.menuBar.screen.parentNode.style.width="100%",bb.menuBar.screen.parentNode.style.overflow="hidden",bb.menuBar.menu.overlay.style.display="block",bb.menuBar.screen.style["-webkit-transition"]="0.2s ease-out",bb.menuBar.screen.style["-webkit-transform"]="translate3d(0px,"+bb.menuBar.height+"px,0px)",bb.menuBar.screen.style["-webkit-backface-visibility"]="hidden"},showMenuBar:function(){bb.menuBar.visible||bb.screen.animating||(bb.menuBar.visible=!0,bb.device.isPlayBook?blackberry.app.event.onSwipeDown(bb.menuBar.hideMenuBar):bb.device.isBB10&&(blackberry.event.removeEventListener("swipedown",bb.menuBar.showMenuBar),blackberry.event.addEventListener("swipedown",bb.menuBar.hideMenuBar)),bb.device.isBB10?(bb.menuBar.screen.addEventListener("webkitTransitionEnd",bb.menuBar.doEndTransition),bb.menuBar.setDimensions()):bb.device.isPlayBook&&(bb.menuBar.menu.style["-webkit-transition"]="all 0.5s ease-in-out",bb.menuBar.menu.style["-webkit-transform"]="translate3d(0, "+(bb.menuBar.height+3)+"px,0px)"),bb.menuBar.visible=!0,bb.menuBar.menu.overlay.addEventListener("touchstart",bb.menuBar.overlayTouchHandler,!1))},hideMenuBar:function(){bb.menuBar.visible&&(bb.menuBar.visible=!1,bb.device.isPlayBook?blackberry.app.event.onSwipeDown(bb.menuBar.showMenuBar):bb.device.isBB10&&(blackberry.event.removeEventListener("swipedown",bb.menuBar.hideMenuBar),blackberry.event.addEventListener("swipedown",bb.menuBar.showMenuBar)),bb.device.isBB10?(bb.menuBar.menu.style["z-index"]="-100",bb.menuBar.screen.style["-webkit-transform"]="translate3d(0px,0px,0px)",bb.menuBar.menu.overlay.style.display="none"):bb.device.isPlayBook&&(bb.menuBar.menu.style["-webkit-transition"]="all 0.5s ease-in-out",bb.menuBar.menu.style["-webkit-transform"]="translate3d(0, -"+(bb.menuBar.height+3)+"px,0px)"),bb.menuBar.menu.overlay.removeEventListener("touchstart",bb.menuBar.overlayTouchHandler,!1))},overlayTouchHandler:function(e){e.preventDefault(),e.stopPropagation(),bb.menuBar.hideMenuBar()},onMenuBarClicked:function(){bb.menuBar.hideMenuBar()},clearMenu:function(){window.blackberry&&bb.menuBar.menu&&(bb.device.isPlayBook||bb.device.isBB10)&&(bb.menuBar.visible&&bb.menuBar.hideMenuBar(),bb.device.isPlayBook&&blackberry.app.event?blackberry.app.event.onSwipeDown(""):bb.device.isBB10&&blackberry.app&&(blackberry.event.removeEventListener("swipedown",bb.menuBar.showMenuBar),blackberry.event.removeEventListener("swipedown",bb.menuBar.hideMenuBar)),bb.menuBar.menu.parentNode.removeChild(bb.menuBar.menu),bb.menuBar.menu=!1,bb.menuBar.visible=!1)}},_bb_progress={NORMAL:0,PAUSED:1,ERROR:2,apply:function(e){for(var t=0;e.length>t;t++)bb.progress.style(e[t],!0)},style:function(e,t){var i=bb.screen.controlColor,n=bb.options.highlightColor,o=bb.options.shades.darkHighlight;return outerElement=document.createElement("div"),outerElement.progress=e,outerElement.state=bb.progress.NORMAL,e.parentNode&&e.parentNode.insertBefore(outerElement,e),e.style.display="none",outerElement.appendChild(e),outerElement.maxValue=e.hasAttribute("max")?parseInt(e.getAttribute("max")):0,outerElement.value=e.hasAttribute("value")?parseInt(e.getAttribute("value")):0,outerElement.className="bb-progress",outerElement.outer=document.createElement("div"),outerElement.outer.setAttribute("class","outer bb-progress-outer-"+i+" bb-progress-outer-idle-background-"+i),outerElement.appendChild(outerElement.outer),outerElement.fill=document.createElement("div"),outerElement.fill.normal="bb-progress-fill bb10Highlight",outerElement.fill.setAttribute("class",outerElement.fill.normal),outerElement.outer.appendChild(outerElement.fill),outerElement.inner=document.createElement("div"),outerElement.inner.className="inner",outerElement.outer.appendChild(outerElement.inner),e.outerElement=outerElement,e.setValue=function(e){var t,r=0;e&&0>e||e&&e>parseInt(this.outerElement.maxValue)||(e?(this.outerElement.value=e,this.value=e):0==e?(this.outerElement.value=0,this.value=0):e=parseInt(this.outerElement.value),e==this.outerElement.maxValue?(this.outerElement.fill.style.background="-webkit-gradient(linear, center top, center bottom, from("+o+"), to("+n+"))",r=1):0==e?this.outerElement.outer.setAttribute("class","outer bb-progress-outer-"+i+" bb-progress-outer-idle-background-"+i):(this.outerElement.state==bb.progress.PAUSED?this.outerElement.fill.style.background="-webkit-gradient(linear, center top, center bottom, from(#EDC842), to(#BA991E))":this.outerElement.state==bb.progress.ERROR?this.outerElement.fill.style.background="-webkit-gradient(linear, center top, center bottom, from( #E04242), to(#D91111))":(this.outerElement.outer.setAttribute("class","outer bb-progress-outer-"+i),this.outerElement.fill.setAttribute("class",this.outerElement.fill.normal),this.outerElement.fill.style.background=""),r=this.outerElement.value/parseInt(this.outerElement.maxValue)),t=Math.floor(parseInt(window.getComputedStyle(this.outerElement.outer).width)*r),this.outerElement.fill.style.width=t+"px")},e.setValue=e.setValue.bind(e),e.setState=function(e){this.outerElement.state=e,this.setValue()},e.setState=e.setState.bind(e),e.show=function(){this.outerElement.style.display="block",bb.refresh()},e.show=e.show.bind(e),e.hide=function(){this.outerElement.style.display="none",bb.refresh()},e.hide=e.hide.bind(e),e.remove=function(){this.outerElement.parentNode.removeChild(this.outerElement),bb.refresh()},e.remove=e.remove.bind(e),e.setMax=function(e){!e||0>e||e==this.max||(this.max=e,this.outerElement.maxValue=e)},e.setMax=e.setMax.bind(e),t?(e.onbbuidomready=function(){this.setValue(),document.removeEventListener("bbuidomready",this.onbbuidomready,!1)},e.onbbuidomready=e.onbbuidomready.bind(e),document.addEventListener("bbuidomready",e.onbbuidomready,!1)):window.setTimeout(e.setValue,0),outerElement.doOrientationChange=function(){window.setTimeout(this.progress.setValue,0)},outerElement.doOrientationChange=outerElement.doOrientationChange.bind(outerElement),window.addEventListener("resize",outerElement.doOrientationChange,!1),bb.windowListeners.push({name:"resize",eventHandler:outerElement.doOrientationChange}),outerElement}},bb.screen={scriptCounter:0,totalScripts:0,controlColor:"light",listColor:"light",overlay:null,tabOverlay:null,contextMenu:null,currentScreen:null,focusedInput:null,animating:!1,apply:function(e){var t;bb.screen.contextMenu=null;for(var i=0;e.length>i;i++){t=e[i],bb.screen.currentScreen=t,t.setAttribute("class","bb-screen");var n,o,r,s=t.querySelectorAll("[data-bb-type=menu]"),a=t.querySelectorAll("[data-bb-type=title]"),l=t.querySelectorAll("[data-bb-type=action-bar]"),b=t.querySelectorAll("[data-bb-type=context-menu]"),d=[],c=null,h=bb.screen.getMenuBarHeight(),u=bb.screen.getActionBarHeight(),m=bb.screen.getTitleBarHeight();for(s.length>0?(s=s[0],t.menuBar=s):s=null,a.length>0?(a=a[0],t.titleBar=a):a=null,l.length>0?(l=l[0],t.actionBar=l):l=null,n=document.createElement("div"),t.appendChild(n),t.hasAttribute("data-bb-scroll-effect")&&"off"==t.getAttribute("data-bb-scroll-effect").toLowerCase()||(t.bbUIscrollWrapper=n),o=document.createElement("div"),n.appendChild(o),r=0;t.childNodes.length-1>r;r++)c=t.childNodes[r],c!=l&&c!=s&&c!=a&&d.push(c);for(r=0;d.length>r;r++)o.appendChild(d[r]);if(t.menuBarHeight=h,t.actionBarHeight=u,t.titleBarHeight=m,t.outerScrollArea=n,n.addEventListener("scroll",function(){evt=document.createEvent("Events"),evt.initEvent("bbuiscrolling",!0,!0),document.dispatchEvent(evt),bb.device.requiresScrollingHack&&(this.timeout?clearTimeout(this.timeout):this.style["padding-right"]="1px",this.timeout=setTimeout(this.resetPadding,20))},!1),n.resetPadding=function(){this.style["padding-right"]="0px",this.timeout=null},n.resetPadding=n.resetPadding.bind(n),t.getAttribute("data-bb-indicator")){var p=document.createElement("div"),g=document.createElement("div");n.scrollArea=o,n.overlay=p,p.style.position="absolute",p.style.bottom="0px",p.style.top="0px",p.style.left="0px",p.style.right="0px",p.touchstart=function(e){e.preventDefault(),e.stopPropagation()},p.touchend=function(e){e.preventDefault(),e.stopPropagation()},p.click=function(e){e.preventDefault(),e.stopPropagation()},n.appendChild(p),o.style.display="none",g.setAttribute("data-bb-type","activity-indicator"),g.setAttribute("data-bb-size","large"),g.style.margin=bb.device.is720x720?"30% auto 0px auto":"landscape"==bb.getOrientation().toLowerCase()?"20% auto 0px auto":"60% auto 0px auto",p.appendChild(g),n.bbuidomprocessed=function(){this.scrollArea.style.display="",this.removeChild(this.overlay),document.removeEventListener("bbuidomprocessed",this.bbuidomprocessed,!1),bb.device.isPlayBook&&bb.scroller&&bb.scroller.refresh()},n.bbuidomprocessed=n.bbuidomprocessed.bind(n),document.addEventListener("bbuidomprocessed",n.bbuidomprocessed,!1)}a&&l?(n.style.overflow="auto",n.style.position="absolute",n.style.bottom=u+"px",n.style.top=m+"px",n.style.left="0px",n.style.right="0px"):a?(n.style.overflow="auto",n.style.position="absolute",n.style.bottom="0px",n.style.top=m+"px",n.style.left="0px",n.style.right="0px"):l?(n.style.overflow="auto",n.style.position="absolute",n.style.bottom=u+"px",n.style.top="0px",n.style.left="0px",n.style.right="0px"):(n.setAttribute("style","overflow:auto;bottom:0px;position:absolute;top:0px;left:0px;right:0px;"),n.style.overflow="auto",n.style.position="absolute",n.style.bottom="0px",n.style.top="0px",n.style.left="0px",n.style.right="0px"),s&&bb.menuBar.apply(s,t),a&&bb.titleBar.apply(a),l&&bb.actionBar.apply(l,t),b.length>0?bb.screen.processContext(b[0],t):b=null,t.refresh=function(){bb.scroller&&bb.scroller.refresh()},t.refresh=t.refresh.bind(t),t.scrollTo=function(e,t){bb.scroller?bb.scroller.scrollTo(e,t):bb.device.isBB10&&(this.bbUIscrollWrapper.scrollTop=e)},t.scrollTo=t.scrollTo.bind(t),t.scrollToElement=function(e){if(bb.scroller)bb.scroller.scrollToElement(e);else if(bb.device.isBB10){if(!e)return;var t=0,i=e;if(i.offsetParent)do t+=i.offsetTop;while(i=i.offsetParent);bb.screen.currentScreen.titleBar&&(t-=bb.screen.currentScreen.titleBarHeight),bb.screen.currentScreen.actionBar&&(t-=bb.screen.getActionBarHeight()),this.scrollTo(t)}},t.scrollToElement=t.scrollToElement.bind(t)}},processContext:function(e,t){bb.device.isPlayBook||bb.device.isRipple||blackberry.ui&&blackberry.ui.contextmenu&&(blackberry.ui.contextmenu.enabled=!0),t.appendChild(e),e.menu=bb.contextMenu.create(t),e.appendChild(e.menu),bb.screen.contextMenu=e.menu;var i,n=e.querySelectorAll("[data-bb-type=action]");for(i=0;n.length>i;i++)e.menu.add(n[i]);e.menu.centerMenuItems()},fadeIn:function(e){var t=.3,i="ease-out",n=e.style;n["-webkit-animation-name"]="bbUI-fade-in",n["-webkit-animation-duration"]=t+"s",n["-webkit-animation-timing-function"]=i,n["-webkit-transform"]="translate3d(0,0,0)",n["-webkit-backface-visibility"]="hidden"},fadeOut:function(e){var t=.3,i="ease-out",n=e.style;n["-webkit-animation-name"]="bbUI-fade-out",n["-webkit-animation-duration"]=t+"s",n["-webkit-animation-timing-function"]=i,n["-webkit-transform"]="translate3d(0,0,0)",n["-webkit-backface-visibility"]="hidden"},slideLeft:function(e){var t=.2,i="ease-out",n=e.style;n.width=bb.innerWidth()+"px",n["-webkit-animation-name"]="bbUI-slide-left",n["-webkit-animation-duration"]=t+"s",n["-webkit-animation-timing-function"]=i,n["-webkit-transform"]="translate3d(0,0,0)",n["-webkit-backface-visibility"]="hidden"},slideOutLeft:function(e){var t=.3,i="ease-out",n=e.style;n.width=bb.innerWidth()+"px",n["-webkit-animation-name"]="bbUI-slide-out-left",n["-webkit-animation-duration"]=t+"s",n["-webkit-animation-timing-function"]=i,n["-webkit-transform"]="translate3d(0,0,0)",n["-webkit-backface-visibility"]="hidden"},slideRight:function(e){var t=.3,i="ease-out",n=e.style;n.width=bb.innerWidth()+"px",n["-webkit-animation-name"]="bbUI-slide-right",n["-webkit-animation-duration"]=t+"s",n["-webkit-animation-timing-function"]=i,n["-webkit-transform"]="translate3d(0,0,0)",n["-webkit-backface-visibility"]="hidden"},slideOutRight:function(e){var t=.3,i="ease-out",n=e.style;n.width=bb.innerWidth()+"px",n["-webkit-animation-name"]="bbUI-slide-out-right",n["-webkit-animation-duration"]=t+"s",n["-webkit-animation-timing-function"]=i,n["-webkit-transform"]="translate3d(0,0,0)",n["-webkit-backface-visibility"]="hidden"},slideUp:function(e){var t=.3,i="ease-out",n=e.style;n.height=bb.innerHeight()+"px",n["-webkit-animation-name"]="bbUI-slide-up",n["-webkit-animation-duration"]=t+"s",n["-webkit-animation-timing-function"]=i,n["-webkit-transform"]="translate3d(0,0,0)",n["-webkit-backface-visibility"]="hidden"},slideOutUp:function(e){var t=.3,i="ease-out",n=e.style;n.height=bb.innerHeight()+"px",n["-webkit-animation-name"]="bbUI-slide-out-up",n["-webkit-animation-duration"]=t+"s",n["-webkit-animation-timing-function"]=i,n["-webkit-transform"]="translate3d(0,0,0)",n["-webkit-backface-visibility"]="hidden"},slideDown:function(e){var t=.3,i="ease-out",n=e.style;n.height=bb.innerHeight()+"px",n["-webkit-animation-name"]="bbUI-slide-down",n["-webkit-animation-duration"]=t+"s",n["-webkit-animation-timing-function"]=i,n["-webkit-transform"]="translate3d(0,0,0)",n["-webkit-backface-visibility"]="hidden"},slideOutDown:function(e){var t=.3,i="ease-out",n=e.style;n.height=bb.innerHeight()+"px",n["-webkit-animation-name"]="bbUI-slide-out-down",n["-webkit-animation-duration"]=t+"s",n["-webkit-animation-timing-function"]=i,n["-webkit-transform"]="translate3d(0,0,0)",n["-webkit-backface-visibility"]="hidden"},getMenuBarHeight:function(){return bb.device.is1024x600?"portrait"==bb.getOrientation().toLowerCase()?73:73:bb.device.is1280x768||bb.device.is1280x720?"portrait"==bb.getOrientation().toLowerCase()?140:111:"portrait"==bb.getOrientation().toLowerCase()?140:111},getActionBarHeight:function(){return bb.device.is1024x600?"portrait"==bb.getOrientation().toLowerCase()?73:73:bb.device.is1280x768?"portrait"==bb.getOrientation().toLowerCase()?139:99:bb.device.is1280x720?"portrait"==bb.getOrientation().toLowerCase()?116:92:bb.device.is720x720?109:"portrait"==bb.getOrientation().toLowerCase()?139:99},getTitleBarHeight:function(){return bb.device.is1024x600?65:bb.device.is1280x768||bb.device.is1280x720?111:bb.device.is720x720?92:111}},bb.tabOverflow={create:function(e){var t,i=document.createElement("div");return i.screen=e,i.itemClicked=!1,i.visible=!1,i.actions=[],i.tabOverflowState={display:void 0,img:void 0,style:void 0,caption:void 0},i.setAttribute("class","bb-tab-overflow-menu bb-tab-overflow-menu-dark"),e.parentNode.appendChild(i),i.style["z-index"]="-100",i.style.display="none",i.style.width=i.width+"px",i.oncontextmenu=function(e){var t=e.srcElement,i=t.parentNode;if(i)for(;i;){if(i==this){e.preventDefault();break}i=i.parentNode}},i.oncontextmenu=i.oncontextmenu.bind(i),window.addEventListener("contextmenu",i.oncontextmenu),bb.windowListeners.push({name:"contextmenu",eventHandler:i.oncontextmenu}),bb.screen.tabOverlay||(t=document.createElement("div"),t.menu=i,bb.screen.tabOverlay=t,t.setAttribute("class","bb-tab-overflow-menu-overlay "),e.appendChild(t),t.ontouchstart=function(e){e.preventDefault(),e.stopPropagation(),this.menu.hide()}),i.overlay=bb.screen.tabOverlay,i.doEndTransition=function(){this.visible?this.style["z-index"]="":(this.style.display="none",this.style.width="0px",this.screen.removeEventListener("webkitTransitionEnd",i.doEndTransition),this.screen.style["-webkit-transition"]="",this.screen.style["-webkit-transform"]="",this.screen.style["-webkit-backface-visibility"]="")},i.doEndTransition=i.doEndTransition.bind(i),i.show=function(){this.itemClicked=!1,this.visible=!0;var e=this.actionBar.tabOverflowBtn;this.tabOverflowState.display=e.tabHighlight.style.display,this.tabOverflowState.img=e.icon.src,this.tabOverflowState.caption=e.display.innerHTML,this.tabOverflowState.style=e.icon.getAttribute("class"),this.screen.addEventListener("webkitTransitionEnd",i.doEndTransition),this.setDimensions(),e.reset(),bb.device.isPlayBook?blackberry.app.event.onSwipeDown():blackberry.event.removeEventListener("swipedown",bb.menuBar.showMenuBar)},i.show=i.show.bind(i),i.setDimensions=function(){this.style.display="",this.style.width=bb.tabOverflow.getWidth()+"px",this.screen.parentNode.style.position="absolute",this.screen.parentNode.style.left="0px",this.screen.parentNode.style.top="0px",this.screen.parentNode.style.bottom="0px",this.screen.parentNode.style.right="0px",this.screen.parentNode.style.width="100%",this.screen.parentNode.style.overflow="hidden",this.overlay.style.display="block",this.screen.style["-webkit-transition"]="0.2s ease-out",this.screen.style["-webkit-transform"]="translate3d("+bb.tabOverflow.getWidth()+"px,0px,0px)",this.screen.style["-webkit-backface-visibility"]="hidden"},i.setDimensions=i.setDimensions.bind(i),i.hide=function(){if(this.visible=!1,this.style["z-index"]="-100",this.screen.style["-webkit-transform"]="translate3d(0px,0px,0px)",this.overlay.style.display="none",!this.itemClicked){var e=this.actionBar.tabOverflowBtn;e.icon.setAttribute("src",this.tabOverflowState.img),e.icon.setAttribute("class",this.tabOverflowState.style),e.tabHighlight.style.display=this.tabOverflowState.display,e.display.innerHTML=this.tabOverflowState.caption}bb.device.isPlayBook?blackberry.app.event.onSwipeDown(bb.menuBar.showMenuBar):blackberry.event.addEventListener("swipedown",bb.menuBar.showMenuBar)},i.hide=i.hide.bind(i),i.onclick=function(){this.hide()},i.centerMenuItems=function(){var e,t=bb.innerHeight(),i=111;i=bb.device.is1024x600?53:bb.device.is720x720?80:bb.device.is1280x720?91:111,e=t-Math.floor(t/2)-Math.floor(this.actions.length*i/2)-i,0>e&&(e=0),this.actions[0].style["margin-top"]=e+"px"},i.centerMenuItems=i.centerMenuItems.bind(i),i.initSelected=function(){var e,t;for(e=0;this.actions.length>e;e++)if(t=this.actions[e],t.initialSelected){t.setOverflowTab(!0);break}},i.initSelected=i.initSelected.bind(i),i.orientationChanged=function(){this.centerMenuItems(),this.visible&&this.setDimensions()},i.orientationChanged=i.orientationChanged.bind(i),window.addEventListener("orientationchange",i.orientationChanged,!1),bb.windowListeners.push({name:"orientationchange",eventHandler:i.orientationChanged}),i.add=function(e){var t,i,n,o,r=e.innerHTML,s=e.getAttribute("data-bb-accent-text"),a=document.createElement("div"),l="bb-tab-overflow-menu-item-inner",b=document.createElement("img");t="bb-tab-overflow-menu-item bb-tab-overflow-menu-item-dark",this.appendChild(e),e.hasAttribute("data-bb-visible")&&"false"==e.getAttribute("data-bb-visible").toLowerCase()?(e.visible=!1,e.style.display="none"):(e.visible=!0,this.actions.push(e)),1==this.actions.length&&(t+=" bb-tab-overflow-menu-item-first-dark"),e.normal=t,e.accentText=null,e.menu=this,e.caption=r,e.setAttribute("class",e.normal),e.innerHTML="",e.visibleTab||(e.visibleTab=e.actionBar.tabOverflowBtn),i=document.createElement("table"),n=document.createElement("tr"),i.appendChild(n),e.appendChild(i),o=document.createElement("td"),b.setAttribute("src",e.getAttribute("data-bb-img")),b.setAttribute("class","bb-tab-overflow-menu-item-image"),e.img=b,o.appendChild(b),n.appendChild(o),o=document.createElement("td"),a.innerHTML=r,e.display=a,o.appendChild(a),s?(e.accentText=document.createElement("div"),e.accentText.innerHTML=s,e.accentText.setAttribute("class","tab-accent-text"),o.appendChild(e.accentText),l+=" bb-tab-overflow-menu-item-double"):l+=" bb-tab-overflow-menu-item-single",a.setAttribute("class",l),n.appendChild(o),e.setOverflowTab=function(e){var t=this.actionBar.tabOverflowBtn;e&&bb.actionBar.highlightAction(this.visibleTab,this),this.visibleTab==t&&(t.icon.setAttribute("src",this.img.src),t.icon.setAttribute("class",t.icon.highlight),t.tabHighlight.style.display="block",t.display.innerHTML=this.caption)},e.setOverflowTab=e.setOverflowTab.bind(e),e.initialSelected=e.hasAttribute("data-bb-selected")&&"true"==e.getAttribute("data-bb-selected").toLowerCase(),e.selected=e.initialSelected,e.oldClick=e.onclick,e.onclick=function(){var e=this.actionBar.tabOverflowBtn;this.menu.itemClicked=!0,bb.actionBar.highlightAction(this.visibleTab,this),this.visibleTab==e&&this.setOverflowTab(!1),this.oldClick&&this.oldClick()},e.setCaption=function(e){this.display.innerHTML=e,this.caption=e;var t=this.actionBar.tabOverflowBtn;this.visibleTab==t&&1==this.selected&&(t.display.innerHTML=this.caption)},e.setCaption=e.setCaption.bind(e),e.setImage=function(e){this.img.setAttribute("src",e)},e.setImage=e.setImage.bind(e),e.show=function(){this.visible||(this.visible=!0,this.menu.actions.push(this),this.style.display="",this.menu.centerMenuItems())},e.show=e.show.bind(e),e.hide=function(){if(this.visible){this.visible=!1;var e=this.menu.actions.indexOf(this);this.menu.actions.splice(e,1),this.style.display="none",this.menu.centerMenuItems()}},e.hide=e.hide.bind(e)},i.add=i.add.bind(i),i},getWidth:function(){return bb.device.is1024x600?"portrait"==bb.getOrientation()?bb.innerWidth()-77:400:bb.device.is720x720?bb.innerWidth()-143:"portrait"==bb.getOrientation()?bb.innerWidth()-154:700}},bb.titleBar={apply:function(titleBar){var orientation=bb.getOrientation(),button,caption,titleBarClass,details,topTitleArea=document.createElement("div"),img,accentText;titleBar.topTitleArea=topTitleArea,titleBar.appendChild(topTitleArea),titleBar.parentNode&&(titleBar.dropShadow=document.createElement("div"),titleBar.dropShadow.setAttribute("class","bb-title-bar-drop-shadow"),titleBar.dropShadow.style.top=bb.screen.getTitleBarHeight()-1+"px",titleBar.parentNode.appendChild(titleBar.dropShadow)),titleBarClass=bb.options.coloredTitleBar?"bb-title-bar bb-title-bar-"+orientation+" bb10-title-colored":"bb-title-bar bb-title-bar-"+orientation+" bb-title-bar-"+bb.screen.controlColor,topTitleArea.setAttribute("class",titleBarClass),caption=document.createElement("div"),titleBar.caption=caption,caption.setAttribute("class","bb-title-bar-caption bb-title-bar-caption-"+orientation),caption.innerHTML=titleBar.getAttribute("data-bb-caption"),topTitleArea.appendChild(caption),titleBar.hasAttribute("data-bb-back-caption")&&(button=document.createElement("div"),button.innerHTML=titleBar.getAttribute("data-bb-back-caption"),topTitleArea.appendChild(button),titleBar.backButton=button,button.onclick=bb.popScreen,bb.titleBar.styleBB10Button(button),button.style.left="0px"),titleBar.hasAttribute("data-bb-action-caption")&&(button=document.createElement("div"),button.innerHTML=titleBar.getAttribute("data-bb-action-caption"),titleBar.hasAttribute("onactionclick")?(button.titleBar=titleBar,button.onactionclick=titleBar.getAttribute("onactionclick"),titleBar.onactionclick=function(){eval(this.actionButton.onactionclick)},button.onclick=function(){this.titleBar.onactionclick&&this.titleBar.onactionclick()}):titleBar.onactionclick&&(button.onclick=titleBar.onactionclick),bb.titleBar.styleBB10Button(button),button.style.right="0px",topTitleArea.appendChild(button),titleBar.actionButton=button),(titleBar.actionButton||titleBar.backButton)&&(titleBar.evenButtonWidths=function(){var e,t=this.backButton?parseInt(window.getComputedStyle(this.backButton).width):0,i=this.actionButton?parseInt(window.getComputedStyle(this.actionButton).width):0;this.actionButton&&this.backButton?(e=t>i?t:i,this.backButton.style.width=e+"px",this.actionButton.style.width=e+"px",this.caption.style["margin-left"]=e+24+"px",this.caption.style["margin-right"]=e+24+"px"):this.actionButton?(this.caption.style["margin-left"]="0px",this.caption.style["margin-left"]=i+24+"px",this.caption.style["margin-right"]=i+24+"px"):this.backButton&&(this.caption.style["margin-right"]="0px",this.caption.style["margin-left"]=t+24+"px",this.caption.style["margin-right"]=t+24+"px")},titleBar.evenButtonWidths=titleBar.evenButtonWidths.bind(titleBar),window.setTimeout(titleBar.evenButtonWidths,0)),titleBar.actionButton||titleBar.backButton||!titleBar.hasAttribute("data-bb-img")&&!titleBar.hasAttribute("data-bb-accent-text")||(caption.setAttribute("class","bb-title-bar-caption-left"),details=document.createElement("div"),titleBar.details=details,topTitleArea.appendChild(details),details.appendChild(caption),titleBar.hasAttribute("data-bb-img")&&(img=document.createElement("img"),titleBar.img=img,topTitleArea.insertBefore(img,details),details.setAttribute("class","bb-title-bar-caption-details-img"),img.style.opacity="0",img.style["-webkit-transition"]="opacity 0.5s linear",img.style["-webkit-backface-visibility"]="hidden",img.style["-webkit-perspective"]=1e3,img.style["-webkit-transform"]="translate3d(0,0,0)",titleBar.onbbuidomready=function(){this.img.onload=function(){this.style.opacity="1.0"},this.img.src=this.getAttribute("data-bb-img"),document.removeEventListener("bbuidomready",this.onbbuidomready,!1)},titleBar.onbbuidomready=titleBar.onbbuidomready.bind(titleBar),document.addEventListener("bbuidomready",titleBar.onbbuidomready,!1)),titleBar.hasAttribute("data-bb-accent-text")&&(caption.style["line-height"]=bb.device.is1024x600?"40px":bb.device.is1280x768||bb.device.is1280x720?"70px":bb.device.is720x720?"55px":"70px",accentText=document.createElement("div"),accentText.setAttribute("class","bb-title-bar-accent-text"),bb.options.coloredTitleBar&&(accentText.style.color="silver"),titleBar.accentText=accentText,accentText.innerHTML=titleBar.getAttribute("data-bb-accent-text"),details.appendChild(accentText))),titleBar.setCaption=function(e){this.caption.innerHTML=e},titleBar.setCaption=titleBar.setCaption.bind(titleBar),titleBar.getCaption=function(){return this.caption.innerHTML},titleBar.getCaption=titleBar.getCaption.bind(titleBar),titleBar.setBackCaption=function(e){this.backButton.firstChild.innerHTML=e,this.actionButton&&(this.backButton.style.width="",this.evenButtonWidths())},titleBar.setBackCaption=titleBar.setBackCaption.bind(titleBar),titleBar.getBackCaption=function(){return this.backButton.firstChild.innerHTML},titleBar.getBackCaption=titleBar.getBackCaption.bind(titleBar),titleBar.setActionCaption=function(e){this.actionButton.firstChild.innerHTML=e,this.backButton&&(this.actionButton.style.width="",this.evenButtonWidths())},titleBar.setActionCaption=titleBar.setActionCaption.bind(titleBar),titleBar.getActionCaption=function(){return this.actionButton.firstChild.innerHTML},titleBar.getActionCaption=titleBar.getActionCaption.bind(titleBar),titleBar.getAccentText=function(){return this.accentText.innerHTML},titleBar.getAccentText=titleBar.getAccentText.bind(titleBar)},styleBB10Button:function(e){var t,i,n,o=document.createElement("div");bb.options.coloredTitleBar?(t="bb-titlebar-button bb10-title-button-colored",i="bb-titlebar-button bb10-title-button-colored-highlight",n="bb-titlebar-button-container bb10-title-button-container-colored"):(t="bb-titlebar-button bb-titlebar-button-"+bb.screen.controlColor,i="bb-titlebar-button bb-titlebar-button-highlight-"+bb.screen.controlColor,n="bb-titlebar-button-container bb-titlebar-button-container-"+bb.screen.controlColor),bb.device.is10dot2&&(n+=" bb-titlebar-button-container-10dot2"),e.enabled=!0,o.innerHTML=e.innerHTML,e.innerHTML="",e.appendChild(o),o.setAttribute("class",t),e.setAttribute("class",n),e.outerNormal=n,e.innerElement=o,o.normal=t,o.highlight=i,e.ontouchstart=function(){this.innerElement.setAttribute("class",this.innerElement.highlight)},e.ontouchend=function(){this.innerElement.setAttribute("class",this.innerElement.normal)},e.trappedClick=e.onclick,e.onclick=void 0,null!==e.trappedClick&&e.addEventListener("click",function(){this.enabled&&this.trappedClick()},!1)}},_bb10_activityIndicator={apply:function(e){var t,i,n,o,r,s,a,l=bb.screen.controlColor;if(!bb.device.newerThan10dot1&&e.length>0){var b,d,c=document.createElement("canvas");c.setAttribute("height","184px"),c.setAttribute("width","184px"),b=c.getContext("2d"),b.beginPath(),b.moveTo(92,154),b.arcTo(154,154,154,92,62),b.arcTo(154,30,92,30,62),b.arcTo(81,30,81,20,10),b.arcTo(81,10,91,10,10),b.arcTo(173,10,173,92,82),b.arcTo(173,173,92,173,82),b.arcTo(81,173,81,164,10),b.arcTo(81,154,92,154,10),b.closePath(),b.strokeStyle="transparent",b.stroke();var d=b.createLinearGradient(0,50,0,154);d.addColorStop(0,"transparent"),d.addColorStop(1,bb.options.highlightColor),b.fillStyle=d,b.fill(),a=c.toDataURL()}for(t=0;e.length>t;t++)i=e[t],r=i.hasAttribute("data-bb-size")?i.getAttribute("data-bb-size").toLowerCase():"medium","large"==r?s=bb.device.is1024x600?"93px":bb.device.is1280x768?"184px":bb.device.is1280x720?"135px":bb.device.is720x720?"170px":"184px":"small"==r?s=bb.device.is1024x600?"21px":bb.device.is1280x768?"41px":bb.device.is1280x720?"35px":"41px":(r="medium",s=bb.device.is1024x600?"46px":bb.device.is1280x768?"93px":bb.device.is1280x720?"69px":bb.device.is720x720?"88px":"93px"),i.style.width=s,o=document.createElement("div"),bb.device.newerThan10dot1?(o.setAttribute("class","bb-activity-margin bb-activity-"+r),i.appendChild(o),n=document.createElement("div"),n.setAttribute("class","bb-activity-"+r+" bb-activity-"+l+"-10dot2"),o.appendChild(n)):(o.setAttribute("class","bb-activity-margin bb-activity-"+r+" bb-activity-"+l),i.appendChild(o),n=document.createElement("div"),n.setAttribute("class","bb-activity-"+r),n.style["background-image"]='url("'+a+'")',o.appendChild(n)),n.style["-webkit-animation-name"]="activity-rotate",n.style["-webkit-animation-duration"]="0.8s",n.style["-webkit-animation-iteration-count"]="infinite",n.style["-webkit-animation-timing-function"]="linear",i.show=function(){this.style.display="",bb.refresh()
},i.show=i.show.bind(i),i.hide=function(){this.style.display="none",bb.refresh()},i.hide=i.hide.bind(i),i.remove=function(){this.parentNode.removeChild(this),bb.refresh()},i.remove=i.remove.bind(i)}},_bb10_button={apply:function(e){for(var t=0;e.length>t;t++)bb.button.style(e[t])},style:function(e){var t,i,n,o,r,s,a=document.createElement("div"),l=document.createElement("div");if(disabled=e.hasAttribute("data-bb-disabled"),normal="bb-button",outerNormal="bb-button-container bb-button-container-"+bb.screen.controlColor,bb.device.newerThan10dot1?(normal+=" bb-button-10dot2",outerNormal+=" bb-button-container-10dot2",s="bb-button bb-button-10dot2 bb-button-"+bb.screen.controlColor+" bb-button-"+bb.screen.controlColor+"-highlight-10dot2"):s="bb-button bb10-button-highlight",r=outerNormal,e.isImageOnly=!1,e.enabled=!disabled,n=e.innerHTML,a.innerHTML=n,e.innerHTML="",e.stretched=!1,e.captionElement=a,e.appendChild(l),e.innerElement=l,e.hasAttribute("data-bb-style")){var b=e.getAttribute("data-bb-style");"stretch"==b&&(outerNormal+=" bb-button-stretch",e.stretched=!0)}return i=e.hasAttribute("data-bb-img")?e.getAttribute("data-bb-img"):void 0,i&&(n&&0!=n.length?(a.setAttribute("class","bb-button-caption-with-image"),o=document.createElement("div"),e.imgElement=o,bb.device.newerThan10dot1?o.setAttribute("class","bb-button-image bb-button-image-10dot2"):o.setAttribute("class","bb-button-image"),o.style["background-image"]='url("'+i+'")',l.appendChild(o)):(bb.device.newerThan10dot1?(outerNormal+=" bb-button-container-image-only bb-button-caption-with-image-only_10dot2",a.setAttribute("class","bb-button-caption-with-image-only bb-button-caption-with-image-only_10dot2")):(outerNormal+=" bb-button-container-image-only",a.setAttribute("class","bb-button-caption-with-image-only")),a.style["background-image"]='url("'+i+'")',e.style["line-height"]="0px",e.isImageOnly=!0)),l.appendChild(a),t=normal+" bb-button-disabled-"+bb.screen.controlColor,normal=normal+" bb-button-"+bb.screen.controlColor,disabled?(e.removeAttribute("data-bb-disabled"),l.setAttribute("class",t)):l.setAttribute("class",normal),e.setAttribute("class",outerNormal),e.outerNormal=outerNormal,e.outerNormalWithoutImageOnly=r,e.innerElement=l,l.normal=normal,l.highlight=s,l.disabledStyle=t,disabled||(e.ontouchstart=function(){this.innerElement.setAttribute("class",this.innerElement.highlight)},e.ontouchend=function(){this.innerElement.setAttribute("class",this.innerElement.normal)}),e.trappedClick=e.onclick,e.onclick=void 0,null!==e.trappedClick&&e.addEventListener("click",function(){this.enabled&&this.trappedClick()},!1),e.setCaption=function(e){if(this.isImageOnly&&e.length>0){this.captionElement.setAttribute("class","bb-button-caption-with-image");var t=document.createElement("div");this.imgElement=t,t.setAttribute("class","bb-button-image"),t.style["background-image"]=this.captionElement.style["background-image"],this.innerElement.removeChild(this.captionElement),this.innerElement.appendChild(t),this.innerElement.appendChild(this.captionElement),this.setAttribute("class",this.outerNormalWithoutImageOnly),this.captionElement.style["background-image"]="",this.isImageOnly=!1}else 0==e.length&&this.imgElement&&(this.captionElement.setAttribute("class","bb-button-caption-with-image-only"),this.setAttribute("class",this.outerNormalWithoutImageOnly+" bb-button-container-image-only"),this.captionElement.style["background-image"]=this.imgElement.style["background-image"],this.isImageOnly=!0,this.innerElement.removeChild(this.imgElement),this.imgElement=null);this.captionElement.innerHTML=e},e.getCaption=function(){return this.captionElement.innerHTML},e.getCaption=e.getCaption.bind(e),e.setImage=function(e){if(this.isImageOnly)this.captionElement.style["background-image"]='url("'+e+'")';else if(this.imgElement&&e.length>0)this.imgElement.style["background-image"]='url("'+e+'")';else if(e.length>0){this.captionElement.setAttribute("class","bb-button-caption-with-image");var t=document.createElement("div");this.imgElement=t,t.setAttribute("class","bb-button-image"),t.style["background-image"]='url("'+e+'")',this.innerElement.removeChild(this.captionElement),this.innerElement.appendChild(t),this.innerElement.appendChild(this.captionElement)}else this.imgElement&&0==e.length&&(this.innerElement.removeChild(this.imgElement),this.imgElement=null,this.captionElement.setAttribute("class",""))},e.getImage=function(){return this.isImageOnly?this.captionElement.style["background-image"].slice(4,-1):this.imgElement?this.imgElement.style["background-image"].slice(4,-1):""},e.getImage=e.getImage.bind(e),e.enable=function(){this.enabled||(this.innerElement.setAttribute("class",this.innerElement.normal),this.ontouchstart=function(){this.innerElement.setAttribute("class",this.innerElement.highlight)},this.ontouchend=function(){this.innerElement.setAttribute("class",this.innerElement.normal)},this.enabled=!0)},e.enable=e.enable.bind(e),e.disable=function(){this.enabled&&(this.innerElement.setAttribute("class",this.innerElement.disabledStyle),this.ontouchstart=null,this.ontouchend=null,this.enabled=!1)},e.disable=e.disable.bind(e),e.show=function(){this.style.display=this.stretched?"block":"inline-block",bb.refresh()},e.show=e.show.bind(e),e.hide=function(){this.style.display="none",bb.refresh()},e.hide=e.hide.bind(e),e.remove=function(){this.parentNode.removeChild(this),bb.refresh()},e.remove=e.remove.bind(e),e}},_bb10_checkbox={apply:function(e){for(var t=0;e.length>t;t++)bb.checkbox.style(e[t])},style:function(e){var t,i,n,o,r=bb.screen.controlColor;return t=document.createElement("div"),t.setAttribute("class","bb-checkbox-target"),e.parentNode&&e.parentNode.insertBefore(t,e),e.style.display="none",t.appendChild(e),t.input=e,e.touchTarget=t,i=document.createElement("div"),i.setAttribute("class","bb-checkbox-outer bb-checkbox-outer-"+r),t.appendChild(i),n=document.createElement("div"),n.normal="bb-checkbox-inner bb-checkbox-inner-"+r,n.setAttribute("class",n.normal),i.appendChild(n),o=document.createElement("div"),o.hiddenClass="bb-checkbox-check-hidden bb-checkbox-check-image",o.displayClass="bb-checkbox-check-display bb-checkbox-check-image",o.setAttribute("class",o.hiddenClass),o.style["-webkit-transition-property"]="all",o.style["-webkit-transition-duration"]="0.1s",n.appendChild(o),t.checkElement=o,t.innerElement=n,t.highlight="-webkit-linear-gradient(top,  rgb("+(bb.options.shades.R+32)+", "+(bb.options.shades.G+32)+", "+(bb.options.shades.B+32)+") 0%, rgb("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+") 100%)",t.touchHighlight="-webkit-linear-gradient(top,  rgba("+(bb.options.shades.R-64)+", "+(bb.options.shades.G-64)+", "+(bb.options.shades.B-64)+",0.25) 0%, rgba("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+",0.25) 100%)",t.ontouchstart=function(){this.input.checked||this.input.disabled||(this.innerElement.style.background=this.touchHighlight)},t.ontouchend=function(){this.input.checked||this.input.disabled||(this.innerElement.style.background="")},t.onclick=function(){if(!this.input.disabled){var e=document.createEvent("HTMLEvents");e.initEvent("change",!1,!0),this.input.checked=!this.input.checked,this.drawChecked(),this.input.dispatchEvent(e)}},t.drawChecked=function(){this.input.checked?(this.checkElement.setAttribute("class",this.checkElement.displayClass),this.innerElement.style["background-image"]=t.highlight):(this.checkElement.setAttribute("class",this.checkElement.hiddenClass),this.innerElement.style["background-image"]=""),this.input.disabled?(this.innerElement.parentNode.setAttribute("class","bb-checkbox-outer bb-checkbox-outer-disabled-"+r),this.innerElement.setAttribute("class","bb-checkbox-inner bb-checkbox-inner-disabled-"+r),this.innerElement.style.background="#c0c0c0"):(this.innerElement.parentNode.setAttribute("class","bb-checkbox-outer bb-checkbox-outer-"+r),this.innerElement.setAttribute("class","bb-checkbox-inner bb-checkbox-inner-"+r))},t.drawChecked=t.drawChecked.bind(t),e.setChecked=function(e){e!=this.checked&&(this.checked=e,this.touchTarget.drawChecked())},e.setChecked=e.setChecked.bind(e),e.getChecked=function(){return this.checked},e.getChecked=e.getChecked.bind(e),e.enable=function(){this.removeAttribute("disabled"),this.enabled=!0,this.touchTarget.drawChecked()},e.enable=e.enable.bind(e),e.disable=function(){this.enabled=!1,this.setAttribute("disabled","disabled"),this.touchTarget.drawChecked()},e.disable=e.disable.bind(e),e.show=function(){this.touchTarget.style.display="block",bb.refresh()},e.show=e.show.bind(e),e.hide=function(){this.touchTarget.style.display="none",bb.refresh()},e.hide=e.hide.bind(e),e.remove=function(){this.touchTarget.parentNode.removeChild(this.touchTarget),bb.refresh()},e.remove=e.remove.bind(e),t.drawChecked(),t}},_bb10_contextMenu={actionIds:[],create:function(){var e=document.createElement("div");return e.style.display="none",e.actions=[],e.oncontextmenu=function(e){this.centerMenuItems();for(var t,i=e.srcElement,n=!1,o="";i;){if(i.hasAttribute&&(o=i.hasAttribute("data-bb-type")?i.getAttribute("data-bb-type").toLowerCase():void 0,"item"==o)){n=i.hasAttribute("data-webworks-context");break}i=i.parentNode}n?(i.drawSelected(),t=i.getAttribute("data-webworks-context"),t=JSON.parse(t),this.selected={title:t.header,description:t.subheader,selected:i}):e.preventDefault(),blackberry.event.removeEventListener("swipedown",bb.menuBar.showMenuBar)},e.oncontextmenu=e.oncontextmenu.bind(e),window.addEventListener("contextmenu",e.oncontextmenu),bb.windowListeners.push({name:"contextmenu",eventHandler:e.oncontextmenu}),e.oncontextmenuclosed=function(){this.selected&&this.selected.selected&&this.selected.selected.drawUnselected(),blackberry.event.addEventListener("swipedown",bb.menuBar.showMenuBar)},e.oncontextmenuclosed=e.oncontextmenuclosed.bind(e),document.addEventListener("bbui.contextClosed",e.oncontextmenuclosed),bb.documentListeners.push({name:"bbui.contextClosed",eventHandler:e.oncontextmenuclosed}),e.add=function(e){this.actions.push(e),this.appendChild(e);var t={actionId:bb.guidGenerator(),label:e.innerHTML,icon:e.getAttribute("data-bb-img")};bb.contextMenu.actionIds.push(t.actionId),e.pinned=!1,e.menuItem=t,e.menu=this,e.visible=e.hasAttribute("data-bb-visible")?"false"!=e.getAttribute("data-bb-visible").toLowerCase():!0,e.hasAttribute("data-bb-pin")&&"true"==e.getAttribute("data-bb-pin").toLowerCase()&&(e.pinned=!0),e.doclick=function(t){var i,n=document.querySelectorAll("[data-bb-context-menu-id="+t+"]");if(n.length>0){n=n[0],i=n.getAttribute("data-webworks-context"),i=JSON.parse(i),this.menu.selected={title:i.header,description:i.subheader,selected:n};var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(o)}},e.doclick=e.doclick.bind(e),e.show=function(){this.visible||(this.visible=!0,this.removeAttribute("data-bb-visible"))},e.show=e.show.bind(e),e.hide=function(){this.visible&&(this.visible=!1,this.setAttribute("data-bb-visible","false"))},e.hide=e.hide.bind(e)},e.add=e.add.bind(e),e.centerMenuItems=function(){var e,t,i=[blackberry.ui.contextmenu.CONTEXT_ALL],n={includeContextItems:[blackberry.ui.contextmenu.CONTEXT_ALL],includePlatformItems:!1,includeMenuServiceItems:!1};for(e=0;this.actions.length>e;e++)t=this.actions[e],t.visible&&t.pinned&&(n.pinnedItemId=t.menuItem.actionId);for(this.clearWWcontextMenu(),blackberry.ui.contextmenu.defineCustomContext("bbui-context",n),e=this.actions.length-1;e>=0;e--)t=this.actions[e],t.visible&&blackberry.ui.contextmenu.addItem(i,t.menuItem,t.doclick)},e.centerMenuItems=e.centerMenuItems.bind(e),e.clearWWcontextMenu=function(){var e,t=[blackberry.ui.contextmenu.CONTEXT_ALL];for(e=0;bb.contextMenu.actionIds.length>e;e++)blackberry.ui.contextmenu.removeItem(t,bb.contextMenu.actionIds[e])},e.centerMenuItems=e.centerMenuItems.bind(e),e.show=function(){},e.show=e.show.bind(e),e.peek=function(){},e.peek=e.peek.bind(e),e}},_bb10_dropdown={apply:function(e){for(i=0;e.length>i;i++)bb.dropdown.style(e[i])},style:function(e){var t,i,n,o,r,s,a,l,b,d,c=!e.hasAttribute("disabled"),h="bb-dropdown bb-dropdown-"+bb.screen.controlColor,u="bb-dropdown bb-dropdown-highlight-"+bb.screen.controlColor,m="bb-dropdown-container bb-dropdown-container-"+bb.screen.controlColor,p="bb-dropdown-container-inner bb-dropdown-container-inner-"+bb.screen.controlColor,g="bb-dropdown-inner bb-dropdown-inner-"+bb.screen.controlColor;if(bb.device.newerThan10dot1?(m+=" bb-dropdown-container-10dot2",p+=" bb-dropdown-container-inner-10dot2",g+=" bb-dropdown-inner-10dot2",d=u+" bb10Highlight",u+=" bb-dropdown-"+bb.screen.controlColor+"-highlight-10dot2"):u+=" bb10Highlight",e.style.display="none",e.enabled=c,s=document.createElement("div"),s.select=e,s.items=[],s.setAttribute("data-bb-type","dropdown"),e.dropdown=s,e.parentNode&&e.parentNode.insertBefore(s,e),s.appendChild(e),o=document.createElement("div"),o.setAttribute("class",p),s.appendChild(o),e.hasAttribute("data-bb-style")){var v=e.getAttribute("data-bb-style");"stretch"==v&&(h+=" bb-dropdown-stretch",u+=" bb-dropdown-stretch")}r=document.createElement("div"),e.enabled?r.setAttribute("class",h):r.setAttribute("class",h+" bb-dropdown-disabled-"+bb.screen.controlColor),o.appendChild(r),n=document.createElement("div"),n.setAttribute("class",g),r.appendChild(n),a=document.createElement("div"),s.labelElement=a,a.setAttribute("class","bb-dropdown-label"),e.hasAttribute("data-bb-label")&&(a.innerHTML=e.getAttribute("data-bb-label")),n.appendChild(a),t=document.createElement("div"),bb.device.newerThan10dot1?(t.normal="bb-dropdown-arrow-"+bb.screen.controlColor+" bb-dropdown-arrow-10dot2",t.highlight="bb-dropdown-arrow-dark bb-dropdown-arrow-10dot2"):t.normal="bb-dropdown-arrow-"+bb.screen.controlColor,t.setAttribute("class",t.normal),n.appendChild(t),s.img=t,l=document.createElement("div"),s.captionElement=l,bb.device.newerThan10dot1?l.setAttribute("class","bb-dropdown-caption bb-dropdown-caption-10dot2"):l.setAttribute("class","bb-dropdown-caption"),n.appendChild(l);var y=document.createElement("div");y.style.position="relative",y.style["margin-top"]="10px",y.style.overflow="hidden",o.appendChild(y);var f=document.createElement("div");return y.appendChild(f),b=document.createElement("div"),s.itemsElement=b,b.setAttribute("class","bb-dropdown-items"),f.appendChild(b),s.refreshOptions=function(){var n,o,r,s,a,b,d=e.getElementsByTagName("option"),c="";for(this.itemsElement.innerHTML="",this.items=[],this.options=d,i=0;d.length>i;i++)n=d[i],o=document.createElement("div"),this.items.push(o),o.selectedStyle="bb-dropdown-item bb-dropdown-item-"+bb.screen.controlColor+" bb-dropdown-item-selected-"+bb.screen.controlColor,o.normalStyle="bb-dropdown-item bb-dropdown-item-"+bb.screen.controlColor,o.index=i,o.select=this.select,o.dropdown=this,o.dropdown.selected||(o.dropdown.selected=o),a=document.createElement("div"),a.setAttribute("class","primary-text"),a.innerHTML=n.innerHTML,r=document.createElement("div"),r.setAttribute("class","text-container"),r.appendChild(a),s=document.createElement("span"),s.setAttribute("class","text-align"),o.appendChild(s),o.appendChild(r),this.itemsElement.appendChild(o),n.hasAttribute("data-bb-accent-text")&&(b=document.createElement("div"),b.setAttribute("class","accent-text"),b.innerHTML=n.getAttribute("data-bb-accent-text"),o.accentText=b,r.appendChild(b)),t=document.createElement("div"),t.setAttribute("class","bb-dropdown-selected-image-"+bb.screen.controlColor),o.img=t,o.appendChild(t),n.hasAttribute("selected")||n.selected?(c=n.innerHTML,o.setAttribute("class",o.selectedStyle),t.style.visibility="visible",o.dropdown.selected=o):o.setAttribute("class",o.normalStyle),o.ontouchstart=function(){this.style["background-color"]=bb.options.highlightColor,this.style.color="white",this.accentText&&(this.accentText.style.color="white")},o.ontouchend=function(){this.style["background-color"]="transparent",this.style.color="",this.accentText&&(this.accentText.style.color="")},o.onclick=function(){this.select.setSelectedItem(this.index)};""==c&&d.length>0&&(c=d[0].innerHTML),""!=c&&(l.innerHTML=c)},s.refreshOptions=s.refreshOptions.bind(s),s.refreshOptions(),s.setAttribute("class",m),s.buttonOuter=r,s.isRefreshed=!1,s.caption=l,r.dropdown=s,s.open=!1,r.normal=h,r.highlight=u,r.focusedHighlight=d,s.scroller=new iScroll(y,{vScrollbar:!1,onBeforeScrollStart:function(e){bb.scroller&&bb.scroller.disable(),e.preventDefault()},onBeforeScrollEnd:function(){bb.scroller&&bb.scroller.enable()}}),bb.dropdownScrollers.push(s.scroller),s.scrollArea=y,r.dotouchstart=function(){this.setAttribute("class",this.highlight)},r.dotouchend=function(){this.setAttribute("class",this.normal)},r.doclick=function(){this.dropdown.open?this.dropdown.internalHide():this.dropdown.internalShow()},e.enabled&&(r.ontouchstart=r.dotouchstart,r.ontouchend=r.dotouchend,r.onclick=r.doclick),s.internalShow=function(){var e;this.open=!0,this.numItems=bb.device.is720x720&&this.options.length>4?3:this.options.length>5?5:this.options.length,bb.device.is1024x600?(e=43*this.numItems,this.style.height=45+e+"px"):bb.device.is1280x768||bb.device.is1280x720?(e=99*this.numItems,this.style.height=95+e+"px"):bb.device.is720x720?(e=85*this.numItems,this.style.height=77+e+"px"):(e=99*this.numItems,this.style.height=95+e+"px"),this.scrollArea.style.height=e-10+"px",this.isRefreshed||(this.scroller.refresh(),this.isRefreshed=!0),this.scroller.scrollToElement(this.selected,0),this.caption.style.opacity="0.0",this.caption.style["-webkit-transition"]="opacity 0.5s linear",this.caption.style["-webkit-backface-visibility"]="hidden",this.caption.style["-webkit-perspective"]=1e3,this.caption.style["-webkit-transform"]="translate3d(0,0,0)",this.img.style.opacity="1.0",bb.device.newerThan10dot1?(this.img.setAttribute("class",this.img.highlight),this.img.style["-webkit-transition"]="all 0.2s linear",this.img.style["-webkit-transform"]="rotate(-360deg)",this.buttonOuter.setAttribute("class",this.buttonOuter.focusedHighlight),this.buttonOuter.style.color="white"):(this.img.style["-webkit-transform"]="rotate(-360deg)",this.img.style["-webkit-transition"]="all 0.5s ease-in-out"),bb.scroller&&bb.scroller.refresh(),this.scrollIntoView(!1)},s.internalShow=s.internalShow.bind(s),s.internalHide=function(){this.open=!1,this.style.height="59px",this.style.height=bb.device.is1024x600?"43px":bb.device.is1280x768?bb.device.newerThan10dot1?"88px":"95px":bb.device.is720x720?bb.device.newerThan10dot1?"70px":"77px":bb.device.is1280x720&&bb.device.newerThan10dot1&&1.9>window.devicePixelRatio?"76px":"95px",this.caption.style.opacity="1.0",this.caption.style["-webkit-transition"]="opacity 0.5s linear",this.caption.style["-webkit-backface-visibility"]="hidden",this.caption.style["-webkit-perspective"]=1e3,bb.device.newerThan10dot1?(this.img.setAttribute("class",this.img.normal),this.img.style["-webkit-transform"]="rotate(-180deg)",this.img.style["-webkit-transition"]="all 0.2s linear",this.buttonOuter.setAttribute("class",this.buttonOuter.normal),this.buttonOuter.style.color=""):(this.img.style.opacity="0.0",this.img.style["-webkit-transform"]="rotate(0deg)",this.img.style["-webkit-transition"]="all 0.5s ease-in-out"),bb.scroller&&bb.scroller.refresh()},s.internalHide=s.internalHide.bind(s),e.setSelectedItem=function(e){if(this.selectedIndex!=e){var t=this.dropdown.items[e];if(!t)return;this.dropdown.selected&&(this.dropdown.selected.setAttribute("class",t.normalStyle),this.dropdown.selected.img.style.visibility="hidden"),t.setAttribute("class",t.selectedStyle),t.img.style.visibility="visible",this.dropdown.selected=t,this.selectedIndex=e,this.dropdown.caption.innerHTML=this.options[e].text,this.dropdown.internalHide(),window.setTimeout(this.fireEvent,0)}},e.setSelectedItem=e.setSelectedItem.bind(e),e.setSelectedText=function(e){for(var t=0;this.options.length>t;t++)if(this.options[t].text==e)return this.setSelectedItem(t),void 0},e.setSelectedText=e.setSelectedText.bind(e),e.fireEvent=function(){var e=document.createEvent("HTMLEvents");e.initEvent("change",!1,!0),this.dispatchEvent(e)},e.fireEvent=e.fireEvent.bind(e),e.enable=function(){this.enabled||(this.dropdown.buttonOuter.ontouchstart=this.dropdown.buttonOuter.dotouchstart,this.dropdown.buttonOuter.ontouchend=this.dropdown.buttonOuter.dotouchend,this.dropdown.buttonOuter.onclick=this.dropdown.buttonOuter.doclick,this.dropdown.buttonOuter.setAttribute("class",h),this.removeAttribute("disabled"),this.enabled=!0)},e.enable=e.enable.bind(e),e.disable=function(){e.enabled&&(this.dropdown.internalHide(),this.dropdown.buttonOuter.ontouchstart=null,this.dropdown.buttonOuter.ontouchend=null,this.dropdown.buttonOuter.onclick=null,this.dropdown.buttonOuter.setAttribute("class",h+" bb-dropdown-disabled-"+bb.screen.controlColor),this.enabled=!1,this.setAttribute("disabled","disabled"))},e.disable=e.disable.bind(e),e.show=function(){this.dropdown.style.display="block",bb.refresh()},e.show=e.show.bind(e),e.hide=function(){this.dropdown.style.display="none",bb.refresh()},e.hide=e.hide.bind(e),e.remove=function(){this.dropdown.parentNode.removeChild(this.dropdown),bb.refresh()},e.remove=e.remove.bind(e),e.refresh=function(){this.dropdown.internalHide(),this.dropdown.isRefreshed=!1,this.dropdown.refreshOptions()},e.refresh=e.refresh.bind(e),e.setCaption=function(e){this.dropdown.labelElement.innerHTML=e,this.setAttribute("data-bb-label",e)},e.setCaption=e.setCaption.bind(e),e.getCaption=function(){return this.dropdown.labelElement.innerHTML},e.getCaption=e.getCaption.bind(e),s}},_bb10_fileInput={apply:function(e){var t,i,n;for(t=0;e.length>t;t++)i=e[t],i.setAttribute("class","bb-file-button"),n=document.createElement("div"),n.setAttribute("data-bb-type","button"),n.innerHTML=i.hasAttribute("data-bb-caption")?i.getAttribute("data-bb-caption"):"Choose File",n.origCaption=n.innerHTML,bb.button.apply([n]),n.input=i,i.parentNode.insertBefore(n,i),n.appendChild(i),n.handleChange=function(){this.input.value?this.setCaption(this.input.value.replace(/^.*[\\\/]/,"")):this.setCaption(this.origCaption)},n.handleChange=n.handleChange.bind(n),i.addEventListener("change",n.handleChange,!1)}},_bb10_grid={apply:function(e){for(var t,i=!1,n=0;e.length>n;n++){var o,r,s,a,l,b,d=e[n];for(d.setAttribute("class","bb-grid"),d.isSquare=d.hasAttribute("data-bb-style")&&"square"==d.getAttribute("data-bb-style").toLowerCase(),i=d.hasAttribute("data-bb-header-style")?"solid"==d.getAttribute("data-bb-header-style").toLowerCase():!1,t=d.hasAttribute("data-bb-header-justify")?d.getAttribute("data-bb-header-justify").toLowerCase():"center",d.hasAttribute("data-bb-context")&&"true"==d.getAttribute("data-bb-context").toLowerCase()&&(b=bb.screen.contextMenu),r=d.querySelectorAll("[data-bb-type=group], [data-bb-type=row]"),o=0;r.length>o;o++)if(l=r[o],l.hasAttribute("data-bb-type"))if(s=l.getAttribute("data-bb-type").toLowerCase(),"group"==s&&l.hasAttribute("data-bb-title"))a=document.createElement("div"),a.normal="bb-grid-header",a.innerHTML="<p>"+l.getAttribute("data-bb-title")+"</p>",i?(a.normal=a.normal+" bb10Accent",a.style.color="white",a.style["border-bottom-color"]="transparent"):(a.normal=a.normal+" bb-grid-header-normal-"+bb.screen.listColor,a.style["border-bottom-color"]=bb.options.shades.darkOutline),a.normal="left"==t?a.normal+" bb-grid-header-left":"right"==t?a.normal+" bb-grid-header-right":a.normal+" bb-grid-header-center",a.setAttribute("class",a.normal),l.firstChild?l.insertBefore(a,l.firstChild):l.appendChild(a);else if("row"==s){var c,h,u,m,p,g,v,y,f,v,w,E,x,k,C=0,B=-1,A=l.querySelectorAll("[data-bb-type=item]");if(p=A.length,0==p)continue;for(l.hasAttribute("data-bb-columns")&&(B=l.getAttribute("data-bb-columns")),h=document.createElement("table"),h.style.width="100%",l.appendChild(h),u=document.createElement("tr"),h.appendChild(u),B>0?A.length>B&&!bb.device.isPlayBook?(l.style["overflow-y"]="hidden",l.style["overflow-x"]="scroll",E=window.innerWidth/(parseInt(B)+.5)):E=window.innerWidth/B-6:E=window.innerWidth/p-6,c=0;p>c;c++)g=A[c],bb.device.isPlayBook&&B>0&&c>B-1?g.style.display="none":(v=g.innerHTML,a=g.getAttribute("data-bb-title"),x=v||a,g.innerHTML="",m=document.createElement("td"),u.appendChild(m),m.appendChild(g),C++,w=d.isSquare?E:Math.ceil(.5625*E),g.style.width=E+"px",g.style.height=w+"px",y=document.createElement("img"),y.style.height=w+"px",y.style.width=E+"px",y.style.opacity="0",y.style["-webkit-transition"]="opacity 0.5s linear",y.style["-webkit-transform"]="translate3d(0,0,0)",y.itemNode=g,g.image=y,g.appendChild(y),g.onbbuidomready=function(){bb.isScrolledIntoView(this)?(this.image.onload=function(){this.style.opacity="1.0"},this.image.src=this.getAttribute("data-bb-img")):(document.addEventListener("bbuiscrolling",this.onbbuiscrolling,!1),this.listener={name:"bbuiscrolling",eventHandler:this.onbbuiscrolling},bb.documentListeners.push(this.listener)),document.removeEventListener("bbuidomready",this.onbbuidomready,!1)},g.onbbuidomready=g.onbbuidomready.bind(g),document.addEventListener("bbuidomready",g.onbbuidomready,!1),g.onbbuiscrolling=function(){if(bb.isScrolledIntoView(this)){this.image.onload=function(){this.style.opacity="1.0"},this.image.src=this.getAttribute("data-bb-img"),document.removeEventListener("bbuiscrolling",this.onbbuiscrolling,!1);var e=bb.documentListeners.indexOf(this.listener);e>=0&&bb.documentListeners.splice(e,1)}},g.onbbuiscrolling=g.onbbuiscrolling.bind(g),x?(f=document.createElement("div"),a&&v?(f.setAttribute("class","bb-grid-item-overlay bb-grid-item-overlay-two-rows"),f.innerHTML='<div><p class="title title-two-rows">'+a+"<br/>"+v+"</p></div>"):a?(f.setAttribute("class","bb-grid-item-overlay bb-grid-item-overlay-one-row"),f.innerHTML='<div><p class="title title-one-row">'+a+"</p></div>"):v&&(f.setAttribute("class","bb-grid-item-overlay bb-grid-item-overlay-one-row"),f.innerHTML='<div><p class="title title-one-row">'+v+"</p></div>"),g.appendChild(f)):f=null,g.overlay=f,g.title=a,g.description=v,g.fingerDown=!1,g.contextShown=!1,g.contextMenu=b,g.contextMenu&&(g.guid="bbui"+bb.guidGenerator(),g.setAttribute("data-bb-context-menu-id",g.guid),k={},k.id=g.guid,k.type="bbui-context",k.header=g.title,k.subheader=g.description,g.setAttribute("data-webworks-context",JSON.stringify(k))),g.ontouchstart=function(){if(this.overlay&&(this.overlay.style.opacity="1.0",this.overlay.style["background-color"]=bb.options.highlightColor),g.fingerDown=!0,g.contextShown=!1,g.contextMenu&&(bb.device.isPlayBook||bb.device.isRipple)){window.setTimeout(this.touchTimer,667);var e=bb.getCurScreen();g.touchstartx=e.bbUIscrollWrapper.scrollTop}},g.ontouchend=function(){this.overlay&&(this.overlay.style.opacity="",this.overlay.style["background-color"]=""),g.fingerDown=!1,g.contextShown&&(event.preventDefault(),event.stopPropagation())},g.touchTimer=function(){if(bb.device.isPlayBook||bb.device.isRipple){var e=bb.getCurScreen(),t=e.bbUIscrollWrapper.scrollTop;g.fingerDown&&50>Math.abs(g.touchstartx-t)&&(g.contextShown=!0,g.contextMenu.peek({title:this.title,description:this.description,selected:this}))}},g.touchTimer=g.touchTimer.bind(g),g.drawSelected=function(){this.overlay&&(this.overlay.style.opacity="1.0",this.overlay.style["background-color"]=bb.options.highlightColor)},g.drawSelected=g.drawSelected.bind(g),g.drawUnselected=function(){this.overlay&&(this.overlay.style.opacity="",this.overlay.style["background-color"]="")},g.drawUnselected=g.drawUnselected.bind(g));if(B>0&&B>C){var S=B-C;for(l.extraColumns=[],c=0;S>c;c++)m=document.createElement("td"),u.appendChild(m),m.style.width=E+"px",l.extraColumns.push(m)}}d.orientationChanged=function(){var e,t,i,n,o,r,s,a,l=this.querySelectorAll("[data-bb-type=row]");for(e=0;l.length>e;e++){var b=-1;for(n=l[e],i=n.querySelectorAll("[data-bb-type=item]"),o=i.length,n.hasAttribute("data-bb-columns")&&(b=n.getAttribute("data-bb-columns")),s=b>0?i.length>b&&!bb.device.isPlayBook?window.innerWidth/(parseInt(b)+.5):window.innerWidth/b-6:window.innerWidth/o-6,t=0;o>t;t++)r=i[t],a=d.isSquare?s:Math.ceil(.5625*s),r.image.style.height=a+"px",r.image.style.width=s+"px",r.image.style["-webkit-transition-property"]="all",r.image.style["-webkit-transition-duration"]="0.2s",r.image.style["-webkit-transition-timing-function"]="linear",r.image.style["-webkit-transform"]="translate3d(0,0,0)",r.style.width=s+"px",r.style.height=a+"px",r.style["-webkit-transition-property"]="all",r.style["-webkit-transition-duration"]="0.2s",r.style["-webkit-transition-timing-function"]="linear",r.style["-webkit-transform"]="translate3d(0,0,0)";if(n.extraColumns)for(t=0;n.extraColumns.length>t;t++)n.extraColumns[t].style.width=s+"px"}},d.orientationChanged=d.orientationChanged.bind(d),window.addEventListener("resize",d.orientationChanged,!1),bb.windowListeners.push({name:"resize",eventHandler:d.orientationChanged}),d.show=function(){this.style.display="block",bb.refresh()},d.show=d.show.bind(d),d.hide=function(){this.style.display="none",bb.refresh()},d.hide=d.hide.bind(d),d.remove=function(){this.parentNode.removeChild(this),bb.refresh()},d.remove=d.remove.bind(d)}}},_bb10_imageList={apply:function(elements){var i,j,outerElement,items;for(i=0;elements.length>i;i++){outerElement=elements[i],outerElement.items=[],outerElement.setAttribute("class","bb-image-list"),outerElement.hideImages=outerElement.hasAttribute("data-bb-images")?"none"==outerElement.getAttribute("data-bb-images").toLowerCase():!1,outerElement.hideImages||(outerElement.imagePlaceholder=outerElement.hasAttribute("data-bb-image-placeholder")?outerElement.getAttribute("data-bb-image-placeholder"):void 0,outerElement.imageLoading=outerElement.hasAttribute("data-bb-image-loading")?outerElement.getAttribute("data-bb-image-loading"):void 0),outerElement.listStyle=outerElement.hasAttribute("data-bb-style")?outerElement.getAttribute("data-bb-style").toLowerCase():"default",outerElement.solidHeader=outerElement.hasAttribute("data-bb-header-style")?"solid"==outerElement.getAttribute("data-bb-header-style").toLowerCase():!1,outerElement.headerJustify=outerElement.hasAttribute("data-bb-header-justify")?outerElement.getAttribute("data-bb-header-justify").toLowerCase():"center",outerElement.hasAttribute("data-bb-context")&&"true"==outerElement.getAttribute("data-bb-context").toLowerCase()&&(outerElement.contextMenu=bb.screen.contextMenu),outerElement.styleItem=function(innerChildNode){if(innerChildNode.hasAttribute("data-bb-type")){var type=innerChildNode.getAttribute("data-bb-type").toLowerCase(),description=innerChildNode.innerHTML,title,overlay,accentText,img,details,detailsClass,descriptionDiv,btn,btnBorder,highlight,normal,btnInner,json;innerChildNode.btn=void 0,"header"==type?(normal="bb-image-list-header",this.solidHeader?(normal+=" bb10Accent",innerChildNode.style.color="white",innerChildNode.style["border-bottom-color"]="transparent"):(normal=normal+" bb-image-list-header-normal-"+bb.screen.listColor,innerChildNode.style["border-bottom-color"]=bb.options.shades.darkOutline),normal+="left"==this.headerJustify?" bb-image-list-header-left":"right"==this.headerJustify?" bb-image-list-header-right":" bb-image-list-header-center",innerChildNode.normal=normal,innerChildNode.innerHTML="<p>"+description+"</p>",innerChildNode.setAttribute("class",normal)):"item"==type&&(normal="bb-image-list-item bb-image-list-item-"+bb.screen.listColor,highlight=normal+" bb-image-list-item-hover bb10Highlight",innerChildNode.normal=normal,innerChildNode.highlight=highlight,innerChildNode.setAttribute("class",normal),innerChildNode.innerHTML="",img=void 0,details=document.createElement("div"),details.innerChildNode=innerChildNode,innerChildNode.details=details,innerChildNode.appendChild(details),detailsClass="bb-image-list-item-details",this.hideImages?detailsClass+=" bb-image-list-item-noimage":(img=new Image,innerChildNode.img=img,this.imagePlaceholder?(img.placeholder=this.imagePlaceholder,img.path=innerChildNode.hasAttribute("data-bb-img")?innerChildNode.getAttribute("data-bb-img"):this.imagePlaceholder):img.path=innerChildNode.getAttribute("data-bb-img"),innerChildNode.onimageload=function(){this.details.style["background-image"]='url("'+this.img.src+'")',innerChildNode.details.style["background-size"]="",this.img=this.img.src
},innerChildNode.onimageload=innerChildNode.onimageload.bind(innerChildNode),img.onload=innerChildNode.onimageload,this.imagePlaceholder&&(innerChildNode.onimageerror=function(){this.img.src!=this.img.placeholder&&(this.img.src=this.img.placeholder)},innerChildNode.onimageerror=innerChildNode.onimageerror.bind(innerChildNode),img.onerror=innerChildNode.onimageerror),this.imageLoading&&(innerChildNode.details.style["background-image"]='url("'+this.imageLoading+'")',innerChildNode.details.style["background-size"]=bb.device.is1024x600?"64px 65px":bb.device.is1280x768||bb.device.is1280x720?"109px 110px":bb.device.is720x720?"92px 93px":"109px 110px"),img.src=img.path),title=document.createElement("div"),title.setAttribute("class","title"),title.innerHTML=innerChildNode.getAttribute("data-bb-title"),details.title=title,0==title.innerHTML.length&&(title.innerHTML="&nbsp;"),details.appendChild(title),descriptionDiv=document.createElement("div"),descriptionDiv.setAttribute("class","description bb-image-list-description-"+bb.screen.listColor),details.description=descriptionDiv,details.appendChild(descriptionDiv),overlay=document.createElement("div"),overlay.setAttribute("class","bb-image-list-item-overlay"),innerChildNode.appendChild(overlay),"arrowlist"==this.listStyle||"arrowbuttons"==this.listStyle||"addbuttons"==this.listStyle||"removebuttons"==this.listStyle?(btn=document.createElement("div"),innerChildNode.appendChild(btn),innerChildNode.btn=btn,btn.outerElement=this,btn.innerChildNode=innerChildNode,innerChildNode.onbtnclick?btn.onbtnclick=innerChildNode.onbtnclick:innerChildNode.hasAttribute("onbtnclick")&&(innerChildNode.onbtnclick=innerChildNode.getAttribute("onbtnclick"),btn.onbtnclick=function(){eval(this.innerChildNode.onbtnclick)}),detailsClass+=" details-button-margin",btn.setAttribute("class","button"),btnBorder=document.createElement("div"),btnBorder.normal="bb-image-list-item-button-border bb-image-list-item-button-"+bb.screen.listColor,btnBorder.setAttribute("class",btnBorder.normal),btn.btnBorder=btnBorder,btn.appendChild(btnBorder),btnInner=document.createElement("div"),btnInner.normal="bb-image-list-item-button-inner",btnInner.highlight=btnInner.normal,btn.btnInner=btnInner,btnBorder.appendChild(btnInner),"arrowlist"!==this.listStyle?("arrowbuttons"==this.listStyle?(btnInner.normal=btnInner.normal+" bb-image-list-item-chevron-"+bb.screen.listColor,btnInner.highlight=btnInner.highlight+" bb-image-list-item-chevron-dark"):"addbuttons"==this.listStyle?(btnInner.normal=btnInner.normal+" bb-image-list-item-add-"+bb.screen.listColor,btnInner.highlight=btnInner.highlight+" bb-image-list-item-add-dark"):"removebuttons"==this.listStyle&&(btnInner.normal=btnInner.normal+" bb-image-list-item-remove-"+bb.screen.listColor,btnInner.highlight=btnInner.highlight+" bb-image-list-item-remove-dark"),btn.ontouchstart=function(){this.onbtnclick&&(this.btnInner.setAttribute("class",this.btnInner.highlight),this.btnBorder.style.background="-webkit-gradient(linear, center top, center bottom, from(rgb("+(bb.options.shades.R+32)+","+(bb.options.shades.G+32)+","+(bb.options.shades.B+32)+")), to("+bb.options.highlightColor+"))")},btn.ontouchend=function(){this.onbtnclick&&(this.btnBorder.style.background="",this.btnInner.setAttribute("class",this.btnInner.normal))},btn.onclick=function(e){e.stopPropagation(),this.onbtnclick&&(this.outerElement.selected=this.innerChildNode,this.onbtnclick())}):(btnInner.normal=btnInner.normal+" bb-image-list-item-chevron-"+bb.screen.listColor,btnBorder.style.background="transparent",btnBorder.style["border-color"]="transparent"),btnInner.setAttribute("class",btnInner.normal)):innerChildNode.hasAttribute("data-bb-accent-text")&&(accentText=document.createElement("div"),accentText.setAttribute("class","accent-text bb-image-list-accent-text-"+bb.screen.listColor),accentText.innerHTML=innerChildNode.getAttribute("data-bb-accent-text"),details.appendChild(accentText),details.accentText=accentText),0==description.length&&(description="&nbsp;",descriptionDiv.style.visibilty="hidden",detailsClass+=" bb-image-list-item-details-nodescription",bb.device.is1024x600?(title.style["margin-top"]="16px",title.style["padding-top"]="28px",overlay.style["margin-top"]="-94px",innerChildNode.btn&&(innerChildNode.btn.style["margin-top"]="-59px")):bb.device.is1280x768||bb.device.is1280x720?(title.style["margin-top"]="-7px",title.style["padding-top"]="20px",overlay.style["margin-top"]="-140px",innerChildNode.btn&&(innerChildNode.btn.style["margin-top"]="-102px")):bb.device.is720x720?(title.style["margin-top"]="-14px",title.style["padding-top"]="20px",overlay.style["margin-top"]="-133px",innerChildNode.btn&&(innerChildNode.btn.style["margin-top"]="-89px")):(title.style["margin-top"]="-7px",title.style["padding-top"]="20px",overlay.style["margin-top"]="-121px",innerChildNode.btn&&(innerChildNode.btn.style["margin-top"]="-102px")),accentText&&(accentText.style["margin-top"]=bb.device.is1024x600?"-52px":bb.device.is1280x768||bb.device.is1280x720?"-82px":bb.device.is720x720?"-75px":"-82px")),descriptionDiv.innerHTML=description,details.setAttribute("class",detailsClass),innerChildNode.fingerDown=!1,innerChildNode.contextShown=!1,innerChildNode.overlay=overlay,innerChildNode.contextMenu=this.contextMenu,innerChildNode.description=description,innerChildNode.title=title.innerHTML,innerChildNode.ontouchstart=function(){if(bb.device.isPlayBook){if(!innerChildNode.trappedClick&&!this.contextMenu)return;if(innerChildNode.fingerDown=!0,innerChildNode.contextShown=!1,this.overlay.style.visibility="visible",innerChildNode.contextMenu){window.setTimeout(this.touchTimer,667);var e=bb.getCurScreen();innerChildNode.touchstartx=e.bbUIscrollWrapper.scrollTop}}},innerChildNode.ontouchend=function(e){if(bb.device.isPlayBook){if(!innerChildNode.trappedClick&&!this.contextMenu)return;this.overlay.style.visibility="hidden",innerChildNode.fingerDown=!1,innerChildNode.contextShown&&(e.preventDefault(),e.stopPropagation())}},innerChildNode.touchTimer=function(){if(bb.device.isPlayBook){var e=bb.getCurScreen(),t=e.bbUIscrollWrapper.scrollTop;innerChildNode.fingerDown&&50>Math.abs(innerChildNode.touchstartx-t)&&(innerChildNode.contextShown=!0,this.drawSelected(),innerChildNode.contextMenu.hideEvents.push(this.finishHighlight),innerChildNode.contextMenu.peek({title:this.title,description:this.description,selected:this}))}},innerChildNode.touchTimer=innerChildNode.touchTimer.bind(innerChildNode),innerChildNode.drawSelected=function(){this.setAttribute("class",this.highlight),this.overlay.style.visibility="visible",this.overlay.style["border-color"]=bb.options.shades.darkOutline},innerChildNode.drawSelected=innerChildNode.drawSelected.bind(innerChildNode),innerChildNode.drawUnselected=function(){this.setAttribute("class",this.normal),this.overlay.style.visibility="hidden",this.overlay.style["border-color"]="transparent"},innerChildNode.drawUnselected=innerChildNode.drawUnselected.bind(innerChildNode),this.contextMenu&&(innerChildNode.guid="bbui"+bb.guidGenerator(),innerChildNode.setAttribute("data-bb-context-menu-id",innerChildNode.guid),json={},json.id=innerChildNode.guid,json.type="bbui-context",json.header=innerChildNode.title,innerChildNode.description&&"&nbsp;"!=innerChildNode.description&&(json.subheader=innerChildNode.description),innerChildNode.setAttribute("data-webworks-context",JSON.stringify(json))),innerChildNode.trappedClick=innerChildNode.onclick,innerChildNode.onclick=void 0,innerChildNode.outerElement=this,innerChildNode.addEventListener("click",function(){innerChildNode.trappedClick&&(this.outerElement.selected=this,this.trappedClick&&setTimeout(this.trappedClick,0))},!1),innerChildNode.finishHighlight=function(){bb.screen.animating?setTimeout(this.finishHighlight,250):this.setAttribute("class",this.normal)},innerChildNode.finishHighlight=innerChildNode.finishHighlight.bind(innerChildNode),innerChildNode.parentList=this,innerChildNode.remove=function(){this.style.height="0px",this.style.opacity="0.0",this.style["-webkit-transition-property"]="all",this.style["-webkit-transition-duration"]="0.1s",this.style["-webkit-transition-timing-function"]="linear",this.style["-webkit-transform"]="translate3d(0,0,0)",bb.scroller&&bb.scroller.refresh(),window.setTimeout(this.details.performRemove,100)},innerChildNode.remove=innerChildNode.remove.bind(innerChildNode),details.performRemove=function(){var e=this.innerChildNode.parentList,t=e.items.indexOf(this.innerChildNode),i=this.innerChildNode.parentNode;i.removeChild(this.innerChildNode),e.items.splice(t,1)},details.performRemove=details.performRemove.bind(details),innerChildNode.getTitle=function(){return this.title},innerChildNode.getTitle=innerChildNode.getTitle.bind(innerChildNode),innerChildNode.getDescription=function(){return this.details.description.innerHTML},innerChildNode.getDescription=innerChildNode.getDescription.bind(innerChildNode),innerChildNode.getAccentText=function(){return this.details.accentText?this.details.accentText.innerHTML:void 0},innerChildNode.getAccentText=innerChildNode.getAccentText.bind(innerChildNode),innerChildNode.getImage=function(){return this.img},innerChildNode.getImage=innerChildNode.getImage.bind(innerChildNode))}},outerElement.styleItem=outerElement.styleItem.bind(outerElement),outerElement.appendItem=function(e){this.styleItem(e),this.appendChild(e),this.items.push(e);var t=document.createEvent("Events");t.initEvent("bbuilistready",!0,!0),document.dispatchEvent(t),bb.scroller&&bb.scroller.refresh()},outerElement.appendItem=outerElement.appendItem.bind(outerElement),outerElement.resetPadding=function(){this.style["padding-right"]="0px",this.timeout=null},outerElement.resetPadding=outerElement.resetPadding.bind(outerElement),outerElement.refresh=function(e){if(e&&e.length&&!(0>=e.length)){var t,i,n=document.createElement("div");for(this.items=[],t=0;e.length>t;t++)i=e[t],this.styleItem(i),this.items.push(i),n.appendChild(i);this.innerHTML="",this.appendChild(n);var o=document.createEvent("Events");o.initEvent("bbuilistready",!0,!0),document.dispatchEvent(o),bb.device.requiresScrollingHack&&(this.timeout?clearTimeout(this.timeout):this.style["padding-right"]="1px",this.timeout=setTimeout(this.resetPadding,20))}},outerElement.refresh=outerElement.refresh.bind(outerElement),outerElement.insertItemBefore=function(e,t){this.styleItem(e),t.parentNode.insertBefore(e,t),this.items.splice(this.items.indexOf(t),0,e);var i=document.createEvent("Events");i.initEvent("bbuilistready",!0,!0),document.dispatchEvent(i),bb.scroller&&bb.scroller.refresh()},outerElement.insertItemBefore=outerElement.insertItemBefore.bind(outerElement),outerElement.getItems=function(){var e,t=[];for(e=0;this.items.length>e;e++)t.push(this.items[e]);return t},outerElement.getItems=outerElement.getItems.bind(outerElement),outerElement.clear=function(){this.items=[],outerElement.innerHTML="",bb.scroller&&bb.scroller.refresh()},outerElement.clear=outerElement.clear.bind(outerElement),outerElement.show=function(){this.style.display="block",bb.refresh()},outerElement.show=outerElement.show.bind(outerElement),outerElement.hide=function(){this.style.display="none",bb.refresh()},outerElement.hide=outerElement.hide.bind(outerElement),outerElement.remove=function(){this.parentNode.removeChild(this),bb.refresh()},outerElement.remove=outerElement.remove.bind(outerElement),items=outerElement.querySelectorAll("[data-bb-type=item], [data-bb-type=header]");var item;for(j=0;items.length>j;j++)item=items[j],outerElement.styleItem(item),outerElement.items.push(item)}}},_bb10_labelControlContainers={apply:function(e){var t,i,n,o,r,s,a,l,b,d,c;for(t=0;e.length>t;t++){if(i=e[t],n=i.querySelectorAll("[data-bb-type=row]"),n.length>0)for(o=document.createElement("table"),o.setAttribute("class","bb-label-control-rows"),i.insertBefore(o,n[0]),r=0;n.length>r;r++)s=n[r],a=document.createElement("tr"),a.setAttribute("class","bb-label-control-label-row"),o.appendChild(a),l=document.createElement("td"),a.appendChild(l),b=s.querySelectorAll("[data-bb-type=label]")[0],b.setAttribute("class","bb-label-control-label"),s.removeChild(b),l.appendChild(b),a=document.createElement("tr"),o.appendChild(a),d=document.createElement("td"),a.appendChild(d),c=s.querySelectorAll("[data-bb-type=button],[data-bb-type=input],[data-bb-type=dropdown],textarea,input[type=file]")[0],c&&(s.removeChild(c),d.appendChild(c)),i.removeChild(s);i.show=function(){this.style.display="block",bb.refresh()},i.show=i.show.bind(i),i.hide=function(){this.style.display="none",bb.refresh()},i.hide=i.hide.bind(i),i.remove=function(){this.parentNode.removeChild(this),bb.refresh()},i.remove=i.remove.bind(i)}}},_bb10_pillButtons={apply:function(e){var t,i;for(t=0;e.length>t;t++)i=e[t],bb.pillButtons.style(i,!0)},style:function(e,t){var i,n,o,r,s,a,l,b="bb-pill-buttons-container bb-pill-buttons-container-"+bb.screen.controlColor,d="bb-pill-button",c=e.querySelectorAll("[data-bb-type=pill-button]"),h=Math.floor(100/c.length),u=10;for(e.sidePadding=u,e.setAttribute("class","bb-pill-buttons"),i=document.createElement("div"),e.appendChild(i),i.setAttribute("class",b),e.selectedColor="dark"==bb.screen.controlColor?"#909090":"#555555",pill=document.createElement("div"),pillInner=document.createElement("div"),pill.appendChild(pillInner),pill.setAttribute("class",d+" bb-pill-button-selected-"+bb.screen.controlColor+" bb-pill-buttons-pill"),pillInner.setAttribute("class","bb-pill-button-inner bb-pill-button-inner-selected-"+bb.screen.controlColor),pill.style.opacity="0",e.pill=pill,i.appendChild(pill),e.style["padding-left"]=u+"px",e.style["padding-right"]=u+"px",r=document.createElement("table"),e.table=r,s=document.createElement("tr"),r.tr=s,r.appendChild(s),r.setAttribute("class","bb-pill-buttons-table"),r.style.opacity="0",i.appendChild(r),e.styleButton=function(t){return t.isSelected=!1,n=document.createElement("div"),n.innerHTML=t.innerHTML,t.innerHTML="",t.appendChild(n),t.border=n,t.outerElement=e,"true"==t.getAttribute("data-bb-selected")&&(t.isSelected=!0,e.selected=t,t.style.color=e.selectedColor),t.setAttribute("class",d),n.setAttribute("class","bb-pill-button-inner"),t.style["z-index"]=4,t.style.width="100%",t.dotouchstart=function(){if(!this.isSelected){var e=this.outerElement.selected;e.style.color="","light"==bb.screen.controlColor&&(this.outerElement.pill.style["background-color"]="#DDDDDD"),this.outerElement.setPillLeft(this)}},t.dotouchstart=t.dotouchstart.bind(t),t.dotouchend=function(){if(!this.isSelected){var e=this.outerElement.selected;e.isSelected=!1,this.isSelected=!0,this.outerElement.selected=this,this.style.color=this.outerElement.selectedColor,"light"==bb.screen.controlColor&&(this.outerElement.pill.style["background-color"]="");var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0),t.doClick=!0,this.dispatchEvent(t)}},t.dotouchend=t.dotouchend.bind(t),bb.device.isRipple?(t.onmousedown=t.dotouchstart,t.onmouseup=t.dotouchend):(t.ontouchstart=t.dotouchstart,t.ontouchend=t.dotouchend),t.addEventListener("click",function(e){e.stopPropagation()},!0),t.setCaption=function(e){this.border.innerHTML=e},t.setCaption=t.setCaption.bind(t),t.getCaption=function(){return this.border.innerHTML},t.getCaption=t.getCaption.bind(t),t},e.styleButton=e.styleButton.bind(e),l=0;c.length>l;l++)o=c[l],o=e.styleButton(o),a=document.createElement("td"),s.appendChild(a),a.appendChild(o),a.style.width=h+"%";return e.recalculateSize=function(){var e,t=this.table.querySelectorAll("td"),i=parseInt(window.getComputedStyle(this).width)-this.sidePadding,n=Math.floor((i-4*t.length)/t.length)+"px";for(e=0;t.length>e;e++)t[e].style.width=n;this.table.style.width=i+"px",this.pill.style.width=n},e.recalculateSize=e.recalculateSize.bind(e),e.setPillLeft=function(e){if(!e&&(e=this.selected,!e)){var t=this.table.querySelectorAll("[data-bb-type=pill-button]");t.length>0&&(e=t[0],this.selected=e)}e&&(this.pill.style["-webkit-transform"]="translate3d("+e.parentNode.offsetLeft+"px,0px,0px)")},e.setPillLeft=e.setPillLeft.bind(e),e.initialize=function(){this.recalculateSize(),this.setPillLeft(),this.table.style.opacity="1",this.table.style["-webkit-transition"]="opacity 0.1s linear",this.pill.style.opacity="1"},e.initialize=e.initialize.bind(e),t?(e.onbbuidomready=function(){this.initialize(),document.removeEventListener("bbuidomprocessed",this.onbbuidomready,!1)},e.onbbuidomready=e.onbbuidomready.bind(e),document.addEventListener("bbuidomprocessed",e.onbbuidomready,!1)):window.setTimeout(e.initialize,0),e.doOrientationChange=function(){this.recalculateSize(),this.setPillLeft()},e.doOrientationChange=e.doOrientationChange.bind(e),window.addEventListener("resize",e.doOrientationChange,!1),bb.windowListeners.push({name:"resize",eventHandler:e.doOrientationChange}),e.show=function(){this.style.display="block",this.recalculateSize(),this.setPillLeft(),bb.refresh()},e.show=e.show.bind(e),e.hide=function(){this.style.display="none",bb.refresh()},e.hide=e.hide.bind(e),e.remove=function(){this.parentNode.removeChild(this),bb.refresh()},e.remove=e.remove.bind(e),e.clear=function(){var e,t=this.table.querySelectorAll("td");for(e=0;t.length>e;e++)this.table.tr.removeChild(t[e]);this.pill.style.opacity="0"},e.clear=e.clear.bind(e),e.appendButton=function(t){t=e.styleButton(t);var i=document.createElement("td");this.table.tr.appendChild(i),i.appendChild(t),this.initialize()},e.appendButton=e.appendButton.bind(e),e.getButtons=function(){for(var e=this.parentNode.querySelectorAll("[data-bb-type=pill-button]"),t=[],i=0;e.length>i;i++)t[i]=e[i].firstChild.innerHTML;return t},e.getButtons=e.getButtons.bind(e),e}},_bb10_radio={apply:function(e){for(var t=0;e.length>t;t++)bb.radio.style(e[t])},style:function(e){var e,t,i,n=bb.screen.controlColor,o=e;return e=document.createElement("div"),e.setAttribute("class","bb-radio-container-"+n),e.input=o,o.outerElement=e,o.style.display="none",o.radio=e,o.parentNode&&o.parentNode.insertBefore(e,o),e.appendChild(o),t=document.createElement("div"),t.setAttribute("class","bb-radio-dot"),t.highlight="-webkit-linear-gradient(top,  rgb("+(bb.options.shades.R+32)+", "+(bb.options.shades.G+32)+", "+(bb.options.shades.B+32)+") 0%, rgb("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+") 100%)",t.touchHighlight="-webkit-linear-gradient(top,  rgba("+(bb.options.shades.R-64)+", "+(bb.options.shades.G-64)+", "+(bb.options.shades.B-64)+",0.25) 0%, rgba("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+",0.25) 100%)",o.checked&&(t.style.background=t.highlight),e.dotDiv=t,e.appendChild(t),i=document.createElement("div"),i.setAttribute("class","bb-radio-dot-center"),o.checked||bb.radio.resetDot(i),t.appendChild(i),t.centerDotDiv=i,t.slideOutUp=function(){bb.device.is1024x600?(this.style.height="0px",this.style.width="10px",this.style.top="9px",this.style.left="15px"):(this.style.height="0px",this.style.width="20px",this.style.top="18px",this.style.left="30px"),bb.radio.resetDot(this.centerDotDiv),this.style["-webkit-transition-property"]="all",this.style["-webkit-transition-duration"]="0.1s",this.style["-webkit-transition-timing-function"]="linear",this.style["-webkit-backface-visibility"]="hidden",this.style["-webkit-perspective"]=1e3,this.style["-webkit-transform"]="translate3d(0,0,0)"},t.slideOutUp=t.slideOutUp.bind(t),t.slideOutDown=function(){bb.device.is1024x600?(this.style.height="0px",this.style.width="10px",this.style.top="30px",this.style.left="15px"):(this.style.height="0px",this.style.width="20px",this.style.top="60px",this.style.left="30px"),bb.radio.resetDot(this.centerDotDiv),this.style["-webkit-transition-property"]="all",this.style["-webkit-transition-duration"]="0.1s",this.style["-webkit-transition-timing-function"]="linear",this.style["-webkit-backface-visibility"]="hidden",this.style["-webkit-perspective"]=1e3,this.style["-webkit-transform"]="translate3d(0,0,0)"},t.slideOutDown=t.slideOutDown.bind(t),t.slideIn=function(){bb.device.is1024x600?(this.style.height="20px",this.style.width="20px",this.style.top="10px",this.style.left="9px",this.centerDotDiv.style.height="10px",this.centerDotDiv.style.width="10px",this.centerDotDiv.style.top="5px",this.centerDotDiv.style.left="5px"):(this.style.height="40px",this.style.width="40px",this.style.top="19px",this.style.left="19px",this.centerDotDiv.style.height="18px",this.centerDotDiv.style.width="18px",this.centerDotDiv.style.top="11px",this.centerDotDiv.style.left="11px"),this.style["-webkit-transition-property"]="all",this.style["-webkit-transition-duration"]="0.1s",this.style["-webkit-transition-timing-function"]="ease-in",this.style["-webkit-backface-visibility"]="hidden",this.style["-webkit-perspective"]=1e3,this.style["-webkit-transform"]="translate3d(0,0,0)",this.centerDotDiv.style["-webkit-transition-delay"]="0.1s",this.centerDotDiv.style["-webkit-transition-property"]="all",this.centerDotDiv.style["-webkit-transition-duration"]="0.1s",this.centerDotDiv.style["-webkit-transition-timing-function"]="ease-in",this.centerDotDiv.style["-webkit-perspective"]=1e3,this.centerDotDiv.style["-webkit-transform"]="translate3d(0,0,0)"},t.slideIn=t.slideIn.bind(t),e.selectedRadio=void 0,e.slideFromTop=!0,e.ontouchstart=function(){this.input.checked||(this.slideFromTop=!0,this.selectedRadio=this.getCurrentlyChecked(),this.selectedRadio&&this.getTop(this.selectedRadio.radio)>=this.getTop(this)&&(this.slideFromTop=!1),this.dotDiv.style["-webkit-transition"]="none",bb.device.is1024x600?(this.dotDiv.style.height="20px",this.dotDiv.style.width="20px",this.dotDiv.style.top="10px",this.dotDiv.style.left="9px"):(this.dotDiv.style.height="40px",this.dotDiv.style.width="40px",this.dotDiv.style.top="19px",this.dotDiv.style.left="19px"),bb.radio.resetDot(this.dotDiv.centerDotDiv),this.dotDiv.style.background=this.dotDiv.touchHighlight)},e.ontouchend=function(){this.input.checked||(this.dotDiv.style["-webkit-transition"]="none",bb.device.is1024x600?(this.dotDiv.style.height="0px",this.dotDiv.style.width="9px",this.dotDiv.style.left="16px"):(this.dotDiv.style.height="0px",this.dotDiv.style.width="18px",this.dotDiv.style.left="32px"),this.dotDiv.style.top=this.slideFromTop?bb.device.is1024x600?"9px":"18px":bb.device.is1024x600?"30px":"60px",window.setTimeout(this.doclick,0))},e.doclick=function(){if(!this.input.checked&&!this.input.disabled){var e=document.createEvent("HTMLEvents");e.initEvent("change",!1,!0),this.dotDiv.style.background=this.dotDiv.highlight,this.dotDiv.slideIn(),this.selectedRadio&&(this.selectedRadio.removeAttribute("checked"),this.selectedRadio.dispatchEvent(e),this.slideFromTop?this.selectedRadio.radio.dotDiv.slideOutDown():this.selectedRadio.radio.dotDiv.slideOutUp()),this.input.setAttribute("checked","true"),this.input.dispatchEvent(e)}},e.doclick=e.doclick.bind(e),e.getCurrentlyChecked=function(){var e=document.querySelectorAll("input[type=radio][name="+this.input.name+"][checked=true]");return e.length>0?e[0]:void 0},e.getCurrentlyChecked=e.getCurrentlyChecked.bind(e),e.getTop=function(e){for(var t=0;e;)t+=e.offsetTop,e=e.offsetParent;return t},o.setChecked=function(){this.checked||(this.slideFromTop=!0,this.outerElement.selectedRadio=this.outerElement.getCurrentlyChecked(),this.outerElement.selectedRadio&&this.outerElement.getTop(this.outerElement.selectedRadio.radio)>=this.outerElement.getTop(this.outerElement)&&(this.outerElement.slideFromTop=!1),this.outerElement.dotDiv.style["-webkit-transition"]="none",bb.device.is1024x600?(this.outerElement.dotDiv.style.height="0px",this.outerElement.dotDiv.style.width="9px",this.outerElement.dotDiv.style.left="16px"):(this.outerElement.dotDiv.style.height="0px",this.outerElement.dotDiv.style.width="18px",this.outerElement.dotDiv.style.left="32px"),this.outerElement.dotDiv.style.top=this.outerElement.slideFromTop?bb.device.is1024x600?"9px":"18px":bb.device.is1024x600?"30px":"60px",window.setTimeout(this.outerElement.doclick,0))},o.setChecked=o.setChecked.bind(o),o.getChecked=function(){return this.checked},o.setChecked=o.setChecked.bind(o),o.enable=function(){this.disabled&&(this.disabled=!1,this.outerElement.dotDiv.setAttribute("class","bb-radio-dot"))},o.enable=o.enable.bind(o),o.disable=function(){this.disabled||(this.disabled=!0,this.outerElement.dotDiv.setAttribute("class","bb-radio-dot-disabled"))},o.disable=o.disable.bind(o),o.isEnabled=function(){return!this.disabled},o.isEnabled=o.isEnabled.bind(o),o.show=function(){this.outerElement.style.display="block",bb.refresh()},o.show=o.show.bind(o),o.hide=function(){this.outerElement.style.display="none",bb.refresh()},o.hide=o.hide.bind(o),o.remove=function(){this.outerElement.parentNode.removeChild(this.outerElement),bb.refresh()},o.remove=o.remove.bind(o),e},resetDot:function(e){e.style["-webkit-transition"]="none",bb.device.is1024x600?(e.style.height="0px",e.style.width="0px",e.style.top="10px",e.style.left="9px"):(e.style.height="0px",e.style.width="0px",e.style.top="20px",e.style.left="20px")},enableGroup:function(e){var t=document.getElementsByName(e);for(i=0;t.length>i;i++)"radio"===t[i].type&&t[i].enable()},disableGroup:function(e){var t=document.getElementsByName(e);for(i=0;t.length>i;i++)"radio"===t[i].type&&t[i].disable()}},_bb10_roundPanel={apply:function(e){var t,i,n,o,r,s=bb.screen.listColor;for(t=0;e.length>t;t++){for(n=e[t],n.setAttribute("class","bb-round-panel"),o=n.querySelectorAll("[data-bb-type=panel-header]"),i=0;o.length>i;i++)r=o[i],r.setAttribute("class","bb-panel-header bb-panel-header-"+s),r.style["border-bottom-color"]=bb.options.shades.darkOutline;n.show=function(){this.style.display="block",bb.refresh()},n.show=n.show.bind(n),n.hide=function(){this.style.display="none",bb.refresh()},n.hide=n.hide.bind(n),n.remove=function(){this.parentNode.removeChild(this),bb.refresh()},n.remove=n.remove.bind(n)}}},_bb10_slider={apply:function(e){var t,i,n=bb.screen.controlColor;for(t=0;e.length>t;t++)i=e[t],outerElement=document.createElement("div"),outerElement.range=i,i.parentNode.insertBefore(outerElement,i),i.style.display="none",outerElement.appendChild(i),outerElement.minValue=i.hasAttribute("min")?parseInt(i.getAttribute("min")):0,outerElement.maxValue=i.hasAttribute("max")?parseInt(i.getAttribute("max")):0,outerElement.value=i.hasAttribute("value")?parseInt(i.getAttribute("value")):0,outerElement.step=i.hasAttribute("step")?parseInt(i.getAttribute("step")):0,outerElement.isActivated=!1,outerElement.initialXPos=0,outerElement.currentXPos=0,outerElement.transientXPos=0,outerElement.className="bb-slider",outerElement.outer=document.createElement("div"),outerElement.outer.setAttribute("class","outer bb-slider-outer-"+n),outerElement.appendChild(outerElement.outer),outerElement.fill=document.createElement("div"),outerElement.fill.className="fill",outerElement.fill.active="-webkit-linear-gradient(top, rgb("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+") 0%, rgb("+(bb.options.shades.R+16)+", "+(bb.options.shades.G+16)+", "+(bb.options.shades.B+16)+") 100%)",outerElement.fill.dormant="-webkit-linear-gradient(top, "+bb.options.highlightColor+" 0%, "+bb.options.shades.darkHighlight+" 100%)",outerElement.fill.style.background=outerElement.fill.dormant,outerElement.outer.appendChild(outerElement.fill),outerElement.inner=document.createElement("div"),outerElement.inner.className="inner",outerElement.inner.outerElement=outerElement,outerElement.outer.appendChild(outerElement.inner),outerElement.halo=document.createElement("div"),outerElement.halo.className="halo",outerElement.halo.style.background="-webkit-gradient(radial, 50% 50%, 0, 50% 50%, 43, from(rgba("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+", 0.15)), color-stop(0.8, rgba("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+", 0.15)), to(rgba("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+", 0.7)))",outerElement.inner.appendChild(outerElement.halo),outerElement.indicator=document.createElement("div"),outerElement.indicator.setAttribute("class","indicator bb-slider-indicator-"+n),outerElement.inner.appendChild(outerElement.indicator),i.outerElement=outerElement,i.setValue=function(e){var t,i=0;e&&(parseInt(this.outerElement.minValue)>e||e>parseInt(this.outerElement.maxValue))||(e&&(this.outerElement.value=e,this.value=e,t=document.createEvent("HTMLEvents"),t.initEvent("change",!1,!0),this.dispatchEvent(t)),i=this.outerElement.value==this.outerElement.maxValue?1:this.outerElement.value/(parseInt(this.outerElement.maxValue)+parseInt(this.outerElement.minValue)),this.outerElement.currentXPos=Math.floor(parseInt(window.getComputedStyle(this.outerElement.outer).width)*i),this.outerElement.fill.style.width=this.outerElement.currentXPos+"px",this.outerElement.inner.style["-webkit-transform"]="translate3d("+this.outerElement.currentXPos+"px,0px,0px)")},i.setValue=i.setValue.bind(i),window.setTimeout(i.setValue,0),outerElement.inner.animateBegin=function(e){this.outerElement.isActivated===!1&&(this.outerElement.isActivated=!0,this.outerElement.initialXPos=e.touches[0].pageX,this.outerElement.halo.style["-webkit-transform"]="scale(1)",this.outerElement.halo.style["-webkit-animation-name"]="explode",this.outerElement.indicator.setAttribute("class","indicator bb-slider-indicator-"+n+" indicator-hover-"+n),this.outerElement.indicator.style.background="-webkit-linear-gradient(top, rgb("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+") 0%, rgb("+(bb.options.shades.R+16)+", "+(bb.options.shades.G+16)+", "+(bb.options.shades.B+16)+") 100%)",this.outerElement.fill.style.background=this.outerElement.fill.active)},outerElement.inner.animateBegin=outerElement.inner.animateBegin.bind(outerElement.inner),outerElement.inner.addEventListener("touchstart",outerElement.inner.animateBegin,!1),outerElement.inner.animateEnd=function(){this.outerElement.isActivated===!0&&(this.outerElement.isActivated=!1,this.outerElement.currentXPos=this.outerElement.transientXPos,this.outerElement.value=parseInt(this.outerElement.range.value),this.outerElement.halo.style["-webkit-transform"]="scale(0)",this.outerElement.halo.style["-webkit-animation-name"]="implode",this.outerElement.indicator.setAttribute("class","indicator bb-slider-indicator-"+n),this.outerElement.indicator.style.background="",this.outerElement.fill.style.background=this.outerElement.fill.dormant)},outerElement.inner.animateEnd=outerElement.inner.animateEnd.bind(outerElement.inner),outerElement.inner.addEventListener("touchend",outerElement.inner.animateEnd,!1),outerElement.moveSlider=function(e){this.isActivated===!0&&(e.stopPropagation(),e.preventDefault(),this.transientXPos=this.currentXPos+e.touches[0].pageX-this.initialXPos,this.transientXPos=Math.max(0,Math.min(this.transientXPos,parseInt(window.getComputedStyle(this.outer).width))),this.notifyUpdated(),this.fill.style.width=this.transientXPos+"px",this.inner.style["-webkit-transform"]="translate3d("+this.transientXPos+"px,0px,0px)")},outerElement.moveSlider=outerElement.moveSlider.bind(outerElement),outerElement.notifyUpdated=function(){var e=this.transientXPos/parseInt(window.getComputedStyle(this.outer).width),t=Math.ceil((parseInt(this.minValue)+parseInt(this.maxValue))*e);if(Math.abs(t-parseInt(this.range.value))>this.step){this.range.value=t;var i=document.createEvent("HTMLEvents");i.initEvent("change",!1,!0),this.range.dispatchEvent(i)}},outerElement.notifyUpdated=outerElement.notifyUpdated.bind(outerElement),outerElement.doOrientationChange=function(){window.setTimeout(outerElement.range.setValue,0)},outerElement.doOrientationChange=outerElement.doOrientationChange.bind(outerElement),document.addEventListener("touchmove",outerElement.moveSlider,!1),bb.documentListeners.push({name:"touchmove",eventHandler:outerElement.moveSlider}),document.addEventListener("touchend",outerElement.inner.animateEnd,!1),bb.documentListeners.push({name:"touchend",eventHandler:outerElement.inner.animateEnd}),window.addEventListener("resize",outerElement.doOrientationChange,!1),bb.windowListeners.push({name:"resize",eventHandler:outerElement.doOrientationChange})
}},_bb10_textInput={apply:function(e){for(var t=0;e.length>t;t++)bb.textInput.style(e[t])},style:function(e){var t="",i=document.createElement("div");if(e.hasAttribute("class")&&(t=e.getAttribute("class")),e.parentNode&&e.parentNode.insertBefore(i,e),i.appendChild(e),i.input=e,i.setAttribute("data-bb-type","input"),i.normal="bb-input-container",e.normal=t+" bb-input",e.focused=t+" bb-input bb-input-focused",e.disabled?e.setAttribute("class",e.normal+" bb-input-disabled"):e.setAttribute("class",e.normal),e.isFocused=!1,e.clickCount=0,e.container=i,e.clearBtn="none"!=e.getAttribute("data-bb-clear"),e.hasClearBtn=!1,e.type){var n=e.type.toLowerCase();("date"==n||"time"==n||"datetime"==n||"month"==n||"datetime-local"==n||"color"==n||"search"==n)&&(e.clearBtn=!1,bb.device.newerThan10dot1&&(i.style.padding="0px",i.style["border-width"]="0px",i.style["background-color"]="transparent"))}return e.disabled?i.setAttribute("class",i.normal+" bb-input-container-disabled"):i.setAttribute("class",i.normal),e.doFocus=function(){0==this.readOnly&&(this.container.setAttribute("class",this.container.normal+" bb-input-cancel-button bb-input-container-focused"),this.clearBtn&&this.value?(this.setAttribute("class",this.focused),this.hasClearBtn=!0):(this.setAttribute("class",this.normal),this.hasClearBtn=!1),this.container.style["border-color"]=bb.options.highlightColor,this.isFocused=!0,this.clickCount=0,bb.screen.focusedInput=this)},e.doFocus=e.doFocus.bind(e),e.addEventListener("focus",e.doFocus,!1),e.doBlur=function(){this.container.setAttribute("class",this.container.normal),this.clearBtn&&this.setAttribute("class",this.normal),this.container.style["border-color"]="",this.isFocused=!1,bb.screen.focusedInput=null},e.doBlur=e.doBlur.bind(e),e.addEventListener("blur",e.doBlur,!1),e.updateClearButton=function(){this.clearBtn&&(0==this.value.length&&this.hasClearBtn||this.value.length>0&&!this.hasClearBtn)&&e.doFocus()},e.updateClearButton=e.updateClearButton.bind(e),e.addEventListener("input",e.updateClearButton,!1),e.clearBtn&&(e.container.ontouchstart=function(t){if(t.target==this){t.preventDefault(),t.stopPropagation(),this.input.value="",e.doFocus();var i=document.createEvent("HTMLEvents");i.initEvent("change",!1,!0),this.input.dispatchEvent(i)}}),e.show=function(){this.container.style.display=""},e.show=e.show.bind(e),e.hide=function(){this.container.style.display="none"},e.hide=e.hide.bind(e),e.remove=function(){this.container.parentNode&&this.container.parentNode.removeChild(this.container)},e.remove=e.remove.bind(e),e.enable=function(){this.disabled&&(this.disabled=!1,this.container.setAttribute("class",this.container.normal),this.setAttribute("class",this.normal))},e.enable=e.enable.bind(e),e.disable=function(){this.disabled||(this.disabled=!0,this.container.setAttribute("class",this.container.normal+" bb-input-container-disabled"),this.setAttribute("class",this.normal+" bb-input-disabled"))},e.disable=e.disable.bind(e),i}},_bb10_toggle={apply:function(e){for(var t=0;e.length>t;t++)bb.toggle.style(e[t],!0)},style:function(outerElement,offdom){var table,tr,td,color=bb.screen.controlColor;return outerElement.checked=!1,outerElement.enabled=!0,outerElement.buffer=bb.device.is1024x600?35:70,outerElement.isActivated=!1,outerElement.initialXPos=0,outerElement.currentXPos=0,outerElement.transientXPos=0,outerElement.movedWithSlider=!1,outerElement.startValue=!1,outerElement.hasAttribute("data-bb-disabled")&&(outerElement.enabled=!("true"==outerElement.getAttribute("data-bb-disabled").toLowerCase())),outerElement.className="bb-toggle",outerElement.outer=document.createElement("div"),outerElement.normal=outerElement.enabled?bb.device.newerThan10dot1?"outer bb-toggle-outer-"+color+"-10dot2 bb-toggle-outer-enabled-"+color:"outer bb-toggle-outer-"+color+" bb-toggle-outer-enabled-"+color:"outer bb-toggle-outer-"+color+" bb-toggle-outer-disabled",outerElement.outer.setAttribute("class",outerElement.normal),outerElement.appendChild(outerElement.outer),outerElement.fill=document.createElement("div"),outerElement.fill.className="fill",outerElement.fill.style.background=outerElement.fill.dormant,outerElement.outer.appendChild(outerElement.fill),outerElement.inner=document.createElement("div"),outerElement.inner.className="inner",outerElement.inner.outerElement=outerElement,outerElement.fill.appendChild(outerElement.inner),table=document.createElement("table"),table.className="table",tr=document.createElement("tr"),table.appendChild(tr),outerElement.inner.appendChild(table),td=document.createElement("td"),td.className="left",tr.appendChild(td),outerElement.yes=document.createElement("div"),outerElement.yes.className="yes",outerElement.yes.innerHTML=outerElement.getAttribute("data-bb-on"),td.appendChild(outerElement.yes),td=document.createElement("td"),td.className="center",tr.appendChild(td),td=document.createElement("td"),td.className="right",tr.appendChild(td),outerElement.no=document.createElement("div"),outerElement.no.className="no",outerElement.no.innerHTML=outerElement.getAttribute("data-bb-off"),td.appendChild(outerElement.no),outerElement.container=document.createElement("div"),outerElement.container.className="indicator-container",outerElement.appendChild(outerElement.container),outerElement.halo=document.createElement("div"),outerElement.halo.className="halo",outerElement.halo.style.background="-webkit-gradient(radial, 50% 50%, 0, 50% 50%, 43, from(rgba("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+", 0.15)), color-stop(0.8, rgba("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+", 0.15)), to(rgba("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+", 0.7)))",outerElement.container.appendChild(outerElement.halo),outerElement.indicator=document.createElement("div"),outerElement.indicator.normal=outerElement.enabled?"indicator bb-toggle-indicator-enabled-"+color:"indicator bb-toggle-indicator-disabled-"+color,outerElement.indicator.setAttribute("class",outerElement.indicator.normal),outerElement.container.appendChild(outerElement.indicator),outerElement.hasAttribute("onchange")&&(outerElement.onchangeEval=outerElement.getAttribute("onchange"),outerElement.onchange=function(){eval(this.onchangeEval)}),outerElement.inner.animateBegin=function(e){this.outerElement.enabled&&this.outerElement.isActivated===!1&&(this.outerElement.startValue=this.outerElement.checked,this.outerElement.movedWithSlider=!1,this.outerElement.isActivated=!0,this.outerElement.initialXPos=e.touches[0].pageX,this.outerElement.halo.style["-webkit-transform"]="scale(1)",this.outerElement.halo.style["-webkit-animation-name"]="explode",this.outerElement.indicator.setAttribute("class","indicator bb-toggle-indicator-enabled-"+color+" indicator-hover-"+color),this.outerElement.indicator.style.background="-webkit-linear-gradient(top, rgb("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+") 0%, rgb("+(bb.options.shades.R+16)+", "+(bb.options.shades.G+16)+", "+(bb.options.shades.B+16)+") 100%)")},outerElement.inner.animateBegin=outerElement.inner.animateBegin.bind(outerElement.inner),outerElement.inner.addEventListener("touchstart",outerElement.inner.animateBegin,!1),outerElement.container.addEventListener("touchstart",outerElement.inner.animateBegin,!1),outerElement.inner.animateEnd=function(){this.outerElement.enabled&&this.outerElement.isActivated===!0&&(this.outerElement.isActivated=!1,this.outerElement.currentXPos=this.outerElement.transientXPos,this.outerElement.halo.style["-webkit-transform"]="scale(0)",this.outerElement.halo.style["-webkit-animation-name"]="implode",this.outerElement.indicator.setAttribute("class","indicator bb-toggle-indicator-enabled-"+color),this.outerElement.indicator.style.background="",this.outerElement.positionButton(),this.outerElement.movedWithSlider&&this.outerElement.startValue!=this.outerElement.checked&&this.outerElement.onchange&&this.outerElement.onchange())},outerElement.inner.animateEnd=outerElement.inner.animateEnd.bind(outerElement.inner),outerElement.addEventListener("touchend",outerElement.inner.animateEnd,!1),outerElement.moveToggle=function(e){if(this.enabled&&this.isActivated===!0){this.movedWithSlider=!0,e.stopPropagation(),e.preventDefault();var t,i=parseInt(window.getComputedStyle(this.fill).width)-this.buffer;this.transientXPos=this.currentXPos+e.touches[0].pageX-this.initialXPos,this.transientXPos=Math.max(0,Math.min(this.transientXPos,i)),this.inner.style["-webkit-transform"]="translate3d("+this.transientXPos+"px,0px,0px)",this.container.style["-webkit-transform"]="translate3d("+this.transientXPos+"px,0px,0px)",t=this.transientXPos/i,this.checked=t>.5}},outerElement.moveToggle=outerElement.moveToggle.bind(outerElement),outerElement.doClick=function(){this.enabled&&(this.movedWithSlider||this.setChecked(!this.checked))},outerElement.doClick=outerElement.doClick.bind(outerElement),outerElement.addEventListener("click",outerElement.doClick,!1),outerElement.positionButton=function(){var e=this.checked?parseInt(window.getComputedStyle(this.fill).width)-this.buffer:0;this.inner.style["-webkit-transform"]="translate3d("+e+"px,0px,0px)",this.inner.style["-webkit-transition-duration"]="0.1s",this.inner.style["-webkit-transition-timing-function"]="linear",this.inner.addEventListener("webkitTransitionEnd",function(){this.style["-webkit-transition"]=""}),this.container.style["-webkit-transform"]="translate3d("+e+"px,0px,0px)",this.container.style["-webkit-transition-duration"]="0.1s",this.container.style["-webkit-transition-timing-function"]="linear",this.container.addEventListener("webkitTransitionEnd",function(){this.style["-webkit-transition"]=""}),this.indicator.style["background-image"]=this.checked&&this.enabled?"-webkit-linear-gradient(top, "+bb.options.highlightColor+" 0%, "+bb.options.shades.darkHighlight+" 100%)":"",this.currentXPos=e},outerElement.positionButton=outerElement.positionButton.bind(outerElement),outerElement.setChecked=function(e){e!=this.checked&&(this.checked=e,this.onchange&&this.onchange()),this.positionButton()},outerElement.setChecked=outerElement.setChecked.bind(outerElement),outerElement.getChecked=function(){return this.checked},outerElement.getChecked=outerElement.getChecked.bind(outerElement),outerElement.show=function(){this.style.display="block",bb.refresh()},outerElement.show=outerElement.show.bind(outerElement),outerElement.hide=function(){this.style.display="none",bb.refresh()},outerElement.hide=outerElement.hide.bind(outerElement),outerElement.remove=function(){this.parentNode.removeChild(this),bb.refresh()},outerElement.remove=outerElement.remove.bind(outerElement),outerElement.setOnCaption=function(e){this.yes.innerHTML=e},outerElement.setOnCaption=outerElement.setOnCaption.bind(outerElement),outerElement.setOffCaption=function(e){this.no.innerHTML=e},outerElement.setOffCaption=outerElement.setOffCaption.bind(outerElement),outerElement.getOnCaption=function(){return this.yes.innerHTML},outerElement.getOnCaption=outerElement.getOnCaption.bind(outerElement),outerElement.getOffCaption=function(){return this.no.innerHTML},outerElement.getOffCaption=outerElement.getOffCaption.bind(outerElement),outerElement.enable=function(){this.enabled||(this.enabled=!0,this.indicator.normal="indicator bb-toggle-indicator-enabled-"+color,this.indicator.setAttribute("class",this.indicator.normal),this.normal=bb.device.newerThan10dot1?"outer bb-toggle-outer-"+color+"-10dot2 bb-toggle-outer-enabled-"+color:"outer bb-toggle-outer-"+color+" bb-toggle-outer-enabled-"+color,this.outer.setAttribute("class",this.normal),this.positionButton())},outerElement.enable=outerElement.enable.bind(outerElement),outerElement.disable=function(){this.enabled&&(this.enabled=!1,this.indicator.normal="indicator bb-toggle-indicator-disabled-"+color,this.indicator.setAttribute("class",this.indicator.normal),this.normal="outer bb-toggle-outer-"+color+" bb-toggle-outer-disabled",this.outer.setAttribute("class",this.normal),this.positionButton())},outerElement.disable=outerElement.disable.bind(outerElement),outerElement.checked=outerElement.hasAttribute("data-bb-checked")?"true"==outerElement.getAttribute("data-bb-checked").toLowerCase():!1,offdom?(outerElement.onbbuidomready=function(){this.positionButton(),document.removeEventListener("bbuidomready",this.onbbuidomready,!1)},outerElement.onbbuidomready=outerElement.onbbuidomready.bind(outerElement),document.addEventListener("bbuidomready",outerElement.onbbuidomready,!1)):setTimeout(outerElement.positionButton,0),document.addEventListener("touchmove",outerElement.moveToggle,!1),bb.documentListeners.push({name:"touchmove",eventHandler:outerElement.moveToggle}),document.addEventListener("touchend",outerElement.inner.animateEnd,!1),bb.documentListeners.push({name:"touchend",eventHandler:outerElement.inner.animateEnd}),outerElement}},_bb_PlayBook_10_scrollPanel={apply:function(e){var t,i,n,o,r;for(t=0;e.length>t;t++){for(n=e[t],r=[],o=document.createElement("div"),n.appendChild(o),i=0;n.childNodes.length-1>i;i++)r.push(n.childNodes[i]);for(i=0;r.length>i;i++)o.appendChild(r[i]);bb.device.isPlayBook?n.scroller=new iScroll(n,{vScrollbar:!0,hideScrollbar:!0,fadeScrollbar:!0,onBeforeScrollStart:function(e){bb.scroller&&bb.scroller.disable(),e.preventDefault()},onBeforeScrollEnd:function(){bb.scroller&&bb.scroller.enable()},onScrollEnd:function(){evt=document.createEvent("Events"),evt.initEvent("bbuiscrolling",!0,!0),document.dispatchEvent(evt)},onScrollMove:function(e){n.onscroll&&n.onscroll(e),evt=document.createEvent("Events"),evt.initEvent("bbuiscrolling",!0,!0),document.dispatchEvent(evt)}}):(n.scroller=null,n.style["-webkit-overflow-scrolling"]="-blackberry-touch",n.addEventListener("scroll",function(){evt=document.createEvent("Events"),evt.initEvent("bbuiscrolling",!0,!0),document.dispatchEvent(evt),this.timeout?clearTimeout(this.timeout):this.style["padding-right"]="1px",this.timeout=setTimeout(this.resetPadding,20)},!1),n.resetPadding=function(){this.style["padding-right"]="0px",this.timeout=null},n.resetPadding=n.resetPadding.bind(n)),n.show=function(){this.style.display="block",bb.refresh()},n.show=n.show.bind(n),n.hide=function(){this.style.display="none",bb.refresh()},n.hide=n.hide.bind(n),n.remove=function(){this.parentNode.removeChild(this),bb.refresh()},n.remove=n.remove.bind(n),n.refresh=function(){this.scroller&&this.scroller.refresh()},n.refresh=n.refresh.bind(n),setTimeout(n.refresh,0),n.scrollTo=function(e,t){this.scroller?this.scroller.scrollTo(e,t):this.scrollTop=e},n.scrollTo=n.scrollTo.bind(n),n.scrollToElement=function(e){if(this.scroller)this.scroller.scrollToElement(e);else{if(!e)return;var t=0,i=e;if(i.offsetParent)do t+=i.offsetTop;while(i=i.offsetParent);this.scrollTo(t,0)}},n.scrollToElement=n.scrollToElement.bind(n),n.setAttribute("class","bb-scroll-panel")}}},_PlayBook_contextMenu={create:function(e){var t=300;bb.device.is1024x600?t=100:bb.device.is720x720&&(t=300);var i,n=document.createElement("div"),o=document.createElement("div"),r=document.createElement("div");return n.setAttribute("class","bb-context-menu bb-context-menu-dark"),n.actions=[],n.hideEvents=[],n.threshold=t,n.visible=!1,n.overlay=document.createElement("div"),n.overlay.threshold=t,n.overlay.setAttribute("class","bb-context-menu-overlay"),n.overlay.menu=n,e.appendChild(n.overlay),n.overlay.ontouchmove=function(e){if(this.menu.peeking){var t=e.touches[0];this.startPos&&this.startPos-t.pageX>this.threshold&&(this.menu.show(this.menu.selected),this.closeMenu=!1)}},n.overlay.ontouchend=function(){this.closeMenu&&(this.menu.hide(),event.preventDefault())},n.overlay.ontouchstart=function(e){if(this.closeMenu=!0,!this.menu.peeking&&this.menu.visible)e.preventDefault();else if(!this.menu.peeking)return;var t=e.touches[0];this.startPos=t.pageX,e.preventDefault()},i=document.createElement("div"),i.setAttribute("class","bb-context-menu-item bb-context-menu-header-dark"),n.header=i,n.appendChild(i),o.setAttribute("class","bb-context-menu-header-title bb-context-menu-header-title-dark"),o.style.width=_PlayBook_contextMenu.getWidth()-20+"px",n.topTitle=o,i.appendChild(o),r.setAttribute("class","bb-context-menu-header-description"),r.style.width=_PlayBook_contextMenu.getWidth()-20+"px",n.description=r,i.appendChild(r),n.scrollContainer=document.createElement("div"),n.scrollContainer.setAttribute("class","bb-context-menu-scroller"),n.appendChild(n.scrollContainer),n.style.left=_PlayBook_contextMenu.getLeft(),n.show=function(e){e?(this.header.style.display="",this.header.style.visibility="",e.title&&(this.topTitle.innerHTML=e.title),e.description&&(this.description.innerHTML=e.description),this.selected=e,n.scrollContainer.style.top=bb.device.isPlayBook?"64px":"130px"):(this.header.style.display="none",this.selected=void 0,n.scrollContainer.style.top="0px"),n.scrollContainer.style["overflow-y"]="scroll",n.scrollContainer.style["overflow-x"]="hidden",n.scrollContainer.style["-webkit-overflow-scrolling"]="-blackberry-touch",this.peeking=!1,this.overlay.style.display="inline",this.style["-webkit-transition"]="all 0.3s ease-in-out",this.style["-webkit-transform"]="translate(-"+_PlayBook_contextMenu.getWidth()+"px, 0)",this.style["-webkit-backface-visibility"]="hidden",this.style["-webkit-perspective"]="1000",this.addEventListener("touchstart",this.touchHandler,!1),this.onclick=function(){this.hide()},this.header.addEventListener("click",this.hide,!1),this.style.visibility="visible",this.visible=!0,bb.device.isPlayBook?blackberry.app.event.onSwipeDown(""):blackberry.event.removeEventListener("swipedown",bb.menuBar.showMenuBar)},n.show=n.show.bind(n),n.hide=function(){this.overlay.style.display="none",this.removeEventListener("touchstart",this.touchHandler,!1),this.removeEventListener("touchmove",this.touchMoveHandler,!1),this.style["-webkit-transition"]="all 0.5s ease-in-out",this.style["-webkit-transform"]="translate("+_PlayBook_contextMenu.getWidth()+"px, 0px)",this.style["-webkit-backface-visibility"]="hidden",this.style["-webkit-perspective"]="1000",this.peeking||this.header.removeEventListener("click",this.hide,!1),this.peeking=!1,this.visible=!1,n.scrollContainer.style["overflow-y"]="",n.scrollContainer.style["overflow-x"]="",n.scrollContainer.style["-webkit-overflow-scrolling"]="";for(var e=n.hideEvents.length-1;e>=0;e--)n.hideEvents[e](),n.hideEvents.pop();if(bb.device.isPlayBook)for(var e=0;this.actions.length>e;e++)this.actions[e].ontouchend();bb.device.isPlayBook?blackberry.app.event.onSwipeDown(bb.menuBar.showMenuBar):blackberry.event.addEventListener("swipedown",bb.menuBar.showMenuBar)},n.hide=n.hide.bind(n),n.peek=function(e){e?(this.header.style.display="",e.title&&(this.topTitle.innerHTML=e.title),e.description&&(this.description.innerHTML=e.description),this.selected=e,n.scrollContainer.style.top=bb.device.isPlayBook?"64px":"130px"):n.scrollContainer.style.top="0px",this.header.style.visibility="hidden",this.header.style["margin-bottom"]="-"+Math.floor(this.header.offsetHeight/2)+"px",this.peeking=!0,this.overlay.style.display="inline",this.style["-webkit-transition"]="all 0.3s ease-in-out",this.style["-webkit-transform"]="translate(-"+_PlayBook_contextMenu.getPeekWidth()+", 0)",this.style["-webkit-backface-visibility"]="hidden",this.style["-webkit-perspective"]="1000",this.addEventListener("touchstart",this.touchHandler,!1),this.addEventListener("touchmove",this.touchMoveHandler,!1),this.onclick=function(e){(e.target==this||e.target==this.scrollContainer)&&this.show(this.selected)},this.header.removeEventListener("click",this.hide,!1),this.style.visibility="visible",this.visible=!0,bb.device.isPlayBook?blackberry.app.event.onSwipeDown(""):blackberry.event.removeEventListener("swipedown",bb.menuBar.showMenuBar)},n.peek=n.peek.bind(n),n.clearWWcontextMenu=function(){},n.clearWWcontextMenu=n.clearWWcontextMenu.bind(n),n.touchHandler=function(e){if(this.peeking){var t=e.touches[0];this.startPos=t.pageX,e.target==this.scrollContainer||e.target.parentNode==this.scrollContainer&&e.target!=this.header&&(e.preventDefault(),e.stopPropagation())}},n.touchHandler=n.touchHandler.bind(n),n.touchMoveHandler=function(e){if(this.peeking){var t=e.touches[0];this.startPos&&this.startPos-t.pageX>this.threshold&&this.show(this.selected)}},n.touchMoveHandler=n.touchMoveHandler.bind(n),n.onclick=function(e){this.peeking&&(this.show(this.selected),e.stopPropagation())},n.centerMenuItems=function(){var e,t,i,n=bb.innerHeight(),o=111,r=0,s=0,a=!0;for(bb.device.isPlayBook?o=53:bb.device.is720x720?o=80:bb.device.is1280x720&&(o=91),s=void 0==this.actionBar?o:0,t=0;this.actions.length>t;t++)i=this.actions[t],1==i.visible&&(r++,a&&this.pinnedAction!=i?(a=!1,i.setAttribute("class",i.normal+" bb-context-menu-item-first-dark"),i.isFirst=!0):this.pinnedAction!=i&&i.setAttribute("class",i.normal));r=this.pinnedAction?r-1:r,e=n-Math.floor(n/2)-Math.floor(r*o/2)-s,0>e&&(e=0),this.scrollContainer.style["padding-top"]=e+"px"},n.centerMenuItems=n.centerMenuItems.bind(n),n.orientationChanged=function(){this.style["-webkit-transition"]="",this.style.left=bb.innerWidth()+"px",this.style.height=bb.innerHeight()+"px",this.centerMenuItems()},n.orientationChanged=n.orientationChanged.bind(n),window.addEventListener("orientationchange",n.orientationChanged,!1),bb.windowListeners.push({name:"orientationchange",eventHandler:n.orientationChanged}),n.addEventListener("webkitTransitionEnd",function(){this.visible||(this.style.visibility="hidden")}),n.add=function(e){var t,i,n=e.innerHTML,o=!1;t="bb-context-menu-item bb-context-menu-item-dark",e.hasAttribute("data-bb-visible")&&"false"==e.getAttribute("data-bb-visible").toLowerCase()?(e.visible=!1,e.style.display="none"):e.visible=!0,this.actions.push(e),o=e.hasAttribute("data-bb-pin")&&"true"==e.getAttribute("data-bb-pin").toLowerCase(),o&&!this.pinnedAction?(t+=" bb-context-menu-item-first-dark",e.style.bottom="-2px",e.style.position="absolute",e.style.width="100%",this.pinnedAction=e,this.appendChild(e),this.scrollContainer.style.bottom=bb.device.isPlayBook?"64px":bb.device.is720x720?"95px":"130px"):this.scrollContainer.appendChild(e),i=t+" bb-context-menu-item-hover",e.normal=t,e.highlight=i,e.innerHTML="";var r=document.createElement("div"),s=document.createElement("img");s.setAttribute("src",e.getAttribute("data-bb-img")),s.setAttribute("class","bb-context-menu-item-image"),e.img=s,e.appendChild(s),r.setAttribute("class","bb-context-menu-item-inner"),e.appendChild(r),r.innerHTML=n,e.display=r,e.menu=this,e.setAttribute("class",t),e.ontouchstart=function(e){if(this.menu.peeking?this.style["border-left-color"]=bb.options.highlightColor:this.style["background-color"]=bb.options.highlightColor,e.stopPropagation(),bb.device.isPlayBook){var t,i;for(i=0;this.menu.actions.length>i;i++)t=this.menu.actions[i],t!=this&&t.ontouchend()}},e.ontouchend=function(){this.menu.peeking?this.style["border-left-color"]="transparent":this.style["background-color"]=""},e.addEventListener("click",this.hide,!1),e.setCaption=function(e){this.display.innerHTML=e},e.setCaption=e.setCaption.bind(e),e.setImage=function(e){this.img.setAttribute("src",e)},e.setImage=e.setImage.bind(e),e.hide=function(){this.visible&&(this.visible=!1,this.style.display="none",this.menu.centerMenuItems())},e.hide=e.hide.bind(e),e.show=function(){this.visible||(this.visible=!0,this.style.display="",this.menu.centerMenuItems())},e.show=e.show.bind(e)},n.add=n.add.bind(n),n},getWidth:function(){return bb.device.isPlayBook?"300":"563"},getPeekWidth:function(){return bb.device.isPlayBook?"55px":"121px"},getLeft:function(){return window.innerWidth+3+"px"}};